# ArchbaseFilePreviewer

Visualizador universal de arquivos para aplicações React. Suporta múltiplos formatos incluindo PDF, imagens, vídeos, áudio, texto/código e arquivos do Microsoft Office.

## Uso Básico

```tsx
import { ArchbaseFilePreviewer } from '@archbase/components';

function App() {
  return (
    <ArchbaseFilePreviewer
      file="/path/to/document.pdf"
      width="100%"
      height={600}
    />
  );
}
```

## Formatos Suportados

### Imagens
- JPEG, PNG, GIF, SVG, WebP, BMP, ICO, TIFF

### Vídeos
- MP4, WebM, OGG, MOV, AVI, MKV

### Áudio
- MP3, WAV, OGG, AAC, FLAC, M4A

### Texto/Código
- TXT, MD, JSON, XML, HTML, CSS, JS, TS, e mais

### PDF
- Documentos PDF completos

### Office (via preview)
- DOCX, XLSX, PPTX (preview limitado)

## Upload de Arquivos

```tsx
import { ArchbaseFilePreviewer } from '@archbase/components';
import { useState } from 'react';

function App() {
  const [file, setFile] = useState<File | null>(null);

  return (
    <div>
      <input
        type="file"
        onChange={(e) => setFile(e.target.files?.[0] || null)}
      />
      <ArchbaseFilePreviewer
        file={file}
        width="100%"
        height={600}
      />
    </div>
  );
}
```

## Layout Modos

```tsx
import { ArchbaseFilePreviewer } from '@archbase/components';

function App() {
  return (
    <ArchbaseFilePreviewer
      file="/path/to/image.png"
      layoutMode="responsive"
      width="100%"
      height={600}
    />
  );
}
```

### Modos de Layout

- `contain` - Mantém proporção, contém na área (padrão)
- `cover` - Mantém proporção, cobre a área
- `fill` - Preenche a área sem manter proporção
- `responsive` - Altura automática responsiva

## Toolbar Customizada

```tsx
import { ArchbaseFilePreviewer } from '@archbase/components';

function App() {
  return (
    <ArchbaseFilePreviewer
      file="/path/to/image.png"
      width="100%"
      height={600}
      showToolbar
      toolbarActions={{
        download: true,
        zoomIn: true,
        zoomOut: true,
        rotate: true,
        fullscreen: true
      }}
    />
  );
}
```

## Eventos

```tsx
import { ArchbaseFilePreviewer } from '@archbase/components';

function App() {
  return (
    <ArchbaseFilePreviewer
      file="/path/to/document.pdf"
      onLoadingChange={(loading) => console.log('Loading:', loading)}
      onLoad={() => console.log('Loaded!')}
      onError={(error) => console.error('Error:', error)}
      onZoomChange={(scale) => console.log('Zoom:', scale)}
      onFullscreenChange={(isFullscreen) => console.log('Fullscreen:', isFullscreen)}
    />
  );
}
```

## Detecção Automática de Tipo

O componente detecta automaticamente o tipo de arquivo por:

1. Extensão do arquivo
2. Tipo MIME (se disponível)
3. Magic bytes (conteúdo do arquivo)

```tsx
import { ArchbaseFilePreviewer, detectFileType } from '@archbase/components';

function App() {
  const file = new File(['content'], 'document.pdf', { type: 'application/pdf' });

  const fileType = detectFileType(file);
  console.log(fileType); // 'pdf'

  return <ArchbaseFilePreviewer file={file} />;
}
```

## Props

| Prop | Tipo | Padrão | Descrição |
|------|------|--------|-----------|
| `file` | `FileSource` | - | Arquivo a ser visualizado |
| `width` | `string \| number` | `'100%'` | Largura do visualizador |
| `height` | `string \| number` | `600` | Altura do visualizador |
| `layoutMode` | `LayoutMode` | `'contain'` | Modo de layout |
| `showToolbar` | `boolean` | `true` | Mostrar toolbar |
| `toolbarActions` | `ToolbarActions` | - | Ações da toolbar |
| `disabled` | `boolean` | `false` | Desabilitar interações |
| `noData` | `ReactNode` | - | Conteúdo quando não há arquivo |
| `loading` | `ReactNode` | - | Conteúdo de carregamento customizado |
| `onLoad` | `function` | - | Callback ao carregar arquivo |
| `onError` | `function` | - | Callback ao ocorrer erro |
| `onLoadingChange` | `function` | - | Callback ao mudar estado de loading |
| `onZoomChange` | `function` | - | Callback ao mudar zoom |
| `onRotate` | `function` | - | Callback ao rotacionar |
| `onFullscreenChange` | `function` | - | Callback ao mudar fullscreen |
| `onDownload` | `function` | - | Callback ao baixar arquivo |
| `onClose` | `function` | - | Callback ao fechar |

### FileSource

```typescript
type FileSource =
  | string              // URL do arquivo
  | File               // Objeto File do navegador
  | Blob               // Objeto Blob
  | { url: string }     // Objeto com URL
  | { base64: string }  // Base64
  | Uint8Array;        // Array de bytes
```

### ToolbarActions

```typescript
interface ToolbarActions {
  download?: boolean;
  zoomIn?: boolean;
  zoomOut?: boolean;
  rotate?: boolean;
  fullscreen?: boolean;
}
```

## Acessibilidade

- Navegação por teclado
- Labels ARIA apropriados
- Suporte a screen readers
- Zoom com acessibilidade

## Referências

- [react-file-previewer](https://github.com/felipecaparelli/react-file-previewer)
- [ArchbasePDFViewer](/components/viewers/archbase-pdf-viewer) - Visualizador de PDF
