import{j as A}from"./jsx-runtime-c9381026.js";import{_ as P}from"./extends-4c19d496.js";import{_ as k}from"./objectWithoutPropertiesLoose-68193569.js";import{r as s}from"./index-8b3efc3f.js";import{f as B,u as N}from"./polymorphic-factory-0b25d542.js";import{I as C}from"./InputBase-b0caed13.js";function j(){return typeof process<"u"&&process.env?"production":"development"}var M=s.useLayoutEffect,$=function(e){var t=s.useRef(e);return M(function(){t.current=e}),t},R=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},O=function(e,t){var r=s.useRef();return s.useCallback(function(i){e.current=i,r.current&&R(r.current,null),r.current=t,t&&R(t,i)},[t])},L={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Y=function(e){Object.keys(L).forEach(function(t){e.style.setProperty(t,L[t],"important")})},w=Y,o=null,H=function(e,t){var r=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?r+t.borderSize:r-t.paddingSize};function G(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),w(o)),o.parentNode===null&&document.body.appendChild(o);var i=n.paddingSize,u=n.borderSize,a=n.sizingStyle,c=a.boxSizing;Object.keys(a).forEach(function(g){var v=g;o.style[v]=a[v]}),w(o),o.value=e;var d=H(o,n);o.value=e,d=H(o,n),o.value="x";var f=o.scrollHeight-i,l=f*t;c==="border-box"&&(l=l+i+u),d=Math.max(l,d);var p=f*r;return c==="border-box"&&(p=p+i+u),d=Math.min(p,d),[d,f]}var T=function(){},U=function(e,t){return e.reduce(function(r,i){return r[i]=t[i],r},{})},X=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Z=!!document.documentElement.currentStyle,q=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var r=U(X,t),i=r.boxSizing;if(i==="")return null;Z&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var u=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:u,borderSize:a}},D=q;function E(n,e,t){var r=$(t);s.useLayoutEffect(function(){var i=function(a){return r.current(a)};if(n)return n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}},[])}var J=function(e){E(window,"resize",e)},K=function(e){E(document.fonts,"loadingdone",e)},Q=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],V=function(e,t){var r=e.cacheMeasurements,i=e.maxRows,u=e.minRows,a=e.onChange,c=a===void 0?T:a,d=e.onHeightChange,f=d===void 0?T:d,l=k(e,Q),p=l.value!==void 0,g=s.useRef(null),v=O(g,t),z=s.useRef(0),b=s.useRef(),m=function(){var h=g.current,S=r&&b.current?b.current:D(h);if(S){b.current=S;var y=G(S,h.value||h.placeholder||"x",u,i),x=y[0],I=y[1];z.current!==x&&(z.current=x,h.style.setProperty("height",x+"px","important"),f(x,{rowHeight:I}))}},W=function(h){p||m(),c(h)};return s.useLayoutEffect(m),J(m),K(m),s.createElement("textarea",P({},l,{onChange:W,ref:v}))},ee=s.forwardRef(V);const te={},F=B((n,e)=>{const{autosize:t,maxRows:r,minRows:i,__staticSelector:u,resize:a,...c}=N("Textarea",te,n),d=t&&j()!=="test";return A(C,{component:d?ee:"textarea",ref:e,...c,__staticSelector:u||"Textarea",multiline:!0,"data-no-overflow":t&&r===void 0||void 0,__vars:{"--input-resize":a},...d?{maxRows:r,minRows:i}:{}})});F.classes=C.classes;F.displayName="@mantine/core/Textarea";export{F as T};
