import{r as k}from"./index-8b3efc3f.js";import{j as C,a as V,F as W}from"./jsx-runtime-c9381026.js";import{f as v,t as $,u as q}from"./polymorphic-factory-36f51e7a.js";import{H as G,a as J,u as K,C as E,s as Q}from"./pick-calendar-levels-props-46525dca.js";import{u as X}from"./use-input-props-713190c3.js";import{I as H}from"./Input-d93c779c.js";import{M as Y}from"./Modal-f0a12e0c.js";import{P as F}from"./Popover-4c00f6e4.js";import{d as r}from"./dayjs.min-5b59225a.js";import{u as Z}from"./use-resolved-styles-api-f52582d3.js";function me(n=!1,s){const{onOpen:l,onClose:f}=s||{},[p,c]=k.useState(n),g=k.useCallback(()=>{c(e=>e||(l==null||l(),!0))},[l]),i=k.useCallback(()=>{c(e=>e&&(f==null||f(),!1))},[f]),u=k.useCallback(()=>{p?i():g()},[i,g,p]);return[p,{open:g,close:i,toggle:u}]}var L={input:"m_6fa5e2aa"};const ee={},M=v((n,s)=>{const{inputProps:l,wrapperProps:f,placeholder:p,classNames:c,styles:g,unstyled:i,popoverProps:u,modalProps:e,dropdownType:d,children:o,formattedValue:S,dropdownHandlers:h,dropdownOpened:m,onClick:P,clearable:w,onClear:I,clearButtonProps:R,rightSection:B,shouldClear:T,readOnly:_,disabled:t,value:a,name:D,form:x,type:z,...O}=X("PickerInputBase",ee,n),b=C(H.ClearButton,{onClick:I,unstyled:i,...R}),y=()=>{z==="range"&&Array.isArray(a)&&a[0]&&!a[1]&&I(),h.close()};return V(W,{children:[d==="modal"&&!_&&C(Y,{opened:m,onClose:y,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:i,...e,children:o}),C(H.Wrapper,{...f,children:V(F,{position:"bottom-start",opened:m,trapFocus:!0,returnFocus:!1,unstyled:i,...u,disabled:(u==null?void 0:u.disabled)||d==="modal"||_,onChange:A=>{var N;A||((N=u==null?void 0:u.onClose)==null||N.call(u),y())},children:[C(F.Target,{children:C(H,{"data-dates-input":!0,"data-read-only":_||void 0,disabled:t,component:"button",type:"button",multiline:!0,onClick:A=>{P==null||P(A),h.toggle()},__clearSection:b,__clearable:w&&T&&!_&&!t,rightSection:B,...l,ref:s,classNames:{...c,input:$(L.input,c==null?void 0:c.input)},...O,children:S||C(H.Placeholder,{error:l.error,unstyled:i,className:c==null?void 0:c.placeholder,style:g==null?void 0:g.placeholder,children:p})})}),C(F.Dropdown,{"data-dates-dropdown":!0,children:o})]})}),C(G,{value:a,name:D,form:x,type:z})]})});M.classes=L;M.displayName="@mantine/dates/PickerInputBase";function j(n,s){const l=[...s].sort((f,p)=>f.getTime()-p.getTime());return r(l[0]).startOf("day").subtract(1,"ms").isBefore(n)&&r(l[1]).endOf("day").add(1,"ms").isAfter(n)}function te({type:n,level:s,value:l,defaultValue:f,onChange:p,allowSingleDateInRange:c,allowDeselect:g,onMouseLeave:i,applyTimezone:u=!0}){const[e,d]=J({type:n,value:l,defaultValue:f,onChange:p,applyTimezone:u}),[o,S]=k.useState(n==="range"&&e[0]&&!e[1]?e[0]:null),[h,m]=k.useState(null),P=t=>{if(n==="range"){if(o instanceof Date&&!e[1]){if(r(t).isSame(o,s)&&!c){S(null),m(null),d([null,null]);return}const a=[t,o];a.sort((D,x)=>D.getTime()-x.getTime()),d(a),m(null),S(null);return}if(e[0]&&!e[1]&&r(t).isSame(e[0],s)&&!c){S(null),m(null),d([null,null]);return}d([t,null]),m(null),S(t);return}if(n==="multiple"){e.some(a=>r(a).isSame(t,s))?d(e.filter(a=>!r(a).isSame(t,s))):d([...e,t]);return}e&&g&&r(t).isSame(e,s)?d(null):d(t)},w=t=>o instanceof Date&&h instanceof Date?j(t,[h,o]):e[0]instanceof Date&&e[1]instanceof Date?j(t,e):!1,I=n==="range"?t=>{i==null||i(t),m(null)}:i,R=t=>e[0]instanceof Date&&r(t).isSame(e[0],s)?!(h&&r(h).isBefore(e[0])):!1,B=t=>e[1]instanceof Date?r(t).isSame(e[1],s):!(e[0]instanceof Date)||!h?!1:r(h).isBefore(e[0])&&r(t).isSame(e[0],s),T=t=>{if(n==="range")return{selected:e.some(D=>D&&r(D).isSame(t,s)),inRange:w(t),firstInRange:R(t),lastInRange:B(t),"data-autofocus":!!e[0]&&r(e[0]).isSame(t,s)||void 0};if(n==="multiple")return{selected:e.some(D=>D&&r(D).isSame(t,s)),"data-autofocus":!!e[0]&&r(e[0]).isSame(t,s)||void 0};const a=r(e).isSame(t,s);return{selected:a,"data-autofocus":a||void 0}},_=n==="range"&&o?m:()=>{};return k.useEffect(()=>{if(n==="range")if(e[0]&&!e[1]&&(o==null?void 0:o.getTime())!==e[0].getTime())S(e[0]);else{const t=e[0]==null&&e[1]==null,a=e[0]!=null&&e[1]!=null;(t||a)&&(S(null),m(null))}},[e]),{onDateChange:P,onRootMouseLeave:I,onHoveredDateChange:_,getControlProps:T,_value:e,setValue:d}}const se={type:"default",defaultLevel:"month",numberOfColumns:1},U=v((n,s)=>{const l=q("DatePicker",se,n),{classNames:f,styles:p,vars:c,type:g,defaultValue:i,value:u,onChange:e,__staticSelector:d,getDayProps:o,allowSingleDateInRange:S,allowDeselect:h,onMouseLeave:m,numberOfColumns:P,hideOutsideDates:w,__onDayMouseEnter:I,__onDayClick:R,__timezoneApplied:B,...T}=l,{onDateChange:_,onRootMouseLeave:t,onHoveredDateChange:a,getControlProps:D}=te({type:g,level:"day",allowDeselect:h,allowSingleDateInRange:S,value:u,defaultValue:i,onChange:e,onMouseLeave:m,applyTimezone:!B}),{resolvedClassNames:x,resolvedStyles:z}=Z({classNames:f,styles:p,props:l}),O=K();return C(E,{ref:s,minLevel:"month",classNames:x,styles:z,__staticSelector:d||"DatePicker",onMouseLeave:t,numberOfColumns:P,hideOutsideDates:w??P!==1,__onDayMouseEnter:(b,y)=>{a(y),I==null||I(b,y)},__onDayClick:(b,y)=>{_(y),R==null||R(b,y)},getDayProps:b=>({...D(b),...o==null?void 0:o(b)}),...T,date:Q("add",T.date,O.getTimezone(),B),__timezoneApplied:!0})});U.classes=E.classes;U.displayName="@mantine/dates/DatePicker";export{U as D,M as P,me as u};
