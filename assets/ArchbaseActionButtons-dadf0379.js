import{a as P,F as ne,j as u}from"./jsx-runtime-c9381026.js";import{r as d,R as pe}from"./index-8b3efc3f.js";import{b as Ae}from"./polymorphic-factory-bf652503.js";import{u as ie}from"./use-media-query-91643880.js";import{p as _}from"./px-90b8b31c.js";import{T as ge}from"./Tooltip-3000dbce.js";import{S as J}from"./Space-a5b43da0.js";import{M as H}from"./Menu-316143ba.js";import{B as me}from"./Button-92934f28.js";import{c as ke}from"./createReactComponent-60e598cf.js";import{A as Be}from"./ActionIcon-bbc9f6f7.js";import{T as Ee}from"./Text-70cb1fd9.js";var oe=ke("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]);function Pe(e,t){return t===e.length-1}var B=[],Ce=function(){return B.some(function(e){return e.activeTargets.length>0})},Ve=function(){return B.some(function(e){return e.skippedTargets.length>0})},se="ResizeObserver loop completed with undelivered notifications.",Me=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:se}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=se),window.dispatchEvent(e)},V;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(V||(V={}));var E=function(e){return Object.freeze(e)},De=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,E(this)}return e}(),we=function(){function e(t,r,n,i){return this.x=t,this.y=r,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,E(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,i=t.top,o=t.right,s=t.bottom,a=t.left,l=t.width,c=t.height;return{x:r,y:n,top:i,right:o,bottom:s,left:a,width:l,height:c}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Z=function(e){return e instanceof SVGElement&&"getBBox"in e},xe=function(e){if(Z(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},ae=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},We=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},C=typeof window<"u"?window:{},I=new WeakMap,ue=/auto|scroll/,_e=/^tb|vertical/,Ie=/msie|trident/i.test(C.navigator&&C.navigator.userAgent),b=function(e){return parseFloat(e||"0")},x=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new De((r?t:e)||0,(r?e:t)||0)},ce=E({devicePixelContentBoxSize:x(),borderBoxSize:x(),contentBoxSize:x(),contentRect:new we(0,0,0,0)}),ye=function(e,t){if(t===void 0&&(t=!1),I.has(e)&&!t)return I.get(e);if(xe(e))return I.set(e,ce),ce;var r=getComputedStyle(e),n=Z(e)&&e.ownerSVGElement&&e.getBBox(),i=!Ie&&r.boxSizing==="border-box",o=_e.test(r.writingMode||""),s=!n&&ue.test(r.overflowY||""),a=!n&&ue.test(r.overflowX||""),l=n?0:b(r.paddingTop),c=n?0:b(r.paddingRight),w=n?0:b(r.paddingBottom),p=n?0:b(r.paddingLeft),M=n?0:b(r.borderTopWidth),q=n?0:b(r.borderRightWidth),ee=n?0:b(r.borderBottomWidth),X=n?0:b(r.borderLeftWidth),D=p+c,y=l+w,z=X+q,R=M+ee,m=a?e.offsetHeight-R-e.clientHeight:0,O=s?e.offsetWidth-z-e.clientWidth:0,$=i?D+z:0,G=i?y+R:0,f=n?n.width:b(r.width)-$-O,v=n?n.height:b(r.height)-G-m,g=f+D+O+z,W=v+y+m+R,S=E({devicePixelContentBoxSize:x(Math.round(f*devicePixelRatio),Math.round(v*devicePixelRatio),o),borderBoxSize:x(g,W,o),contentBoxSize:x(f,v,o),contentRect:new we(p,l,f,v)});return I.set(e,S),S},ze=function(e,t,r){var n=ye(e,r),i=n.borderBoxSize,o=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(t){case V.DEVICE_PIXEL_CONTENT_BOX:return s;case V.BORDER_BOX:return i;default:return o}},Le=function(){function e(t){var r=ye(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=E([r.borderBoxSize]),this.contentBoxSize=E([r.contentBoxSize]),this.devicePixelContentBoxSize=E([r.devicePixelContentBoxSize])}return e}(),Re=function(e){if(xe(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},Ne=function(){var e=1/0,t=[];B.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(c){var w=new Le(c.target),p=Re(c.target);a.push(w),c.lastReportedSize=ze(c.target,c.observedBox),p<e&&(e=p)}),t.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var i=n[r];i()}return e},le=function(e){B.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(i){i.isActive()&&(Re(i.target)>e?r.activeTargets.push(i):r.skippedTargets.push(i))})})},He=function(){var e=0;for(le(e);Ce();)e=Ne(),le(e);return Ve()&&Me(),e>0},j,Oe=[],Fe=function(){return Oe.splice(0).forEach(function(e){return e()})},qe=function(e){if(!j){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Fe()}).observe(r,n),j=function(){r.textContent="".concat(t?t--:t++)}}Oe.push(e),j()},Xe=function(e){qe(function(){requestAnimationFrame(e)})},F=0,$e=function(){return!!F},Ge=250,Ue={attributes:!0,characterData:!0,childList:!0,subtree:!0},de=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],fe=function(e){return e===void 0&&(e=0),Date.now()+e},Q=!1,Je=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Ge),!Q){Q=!0;var n=fe(t);Xe(function(){var i=!1;try{i=He()}finally{if(Q=!1,t=n-fe(),!$e())return;i?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Ue)};document.body?r():C.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),de.forEach(function(r){return C.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),de.forEach(function(r){return C.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),K=new Je,ve=function(e){!F&&e>0&&K.start(),F+=e,!F&&K.stop()},je=function(e){return!Z(e)&&!We(e)&&getComputedStyle(e).display==="inline"},Qe=function(){function e(t,r){this.target=t,this.observedBox=r||V.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=ze(this.target,this.observedBox,!0);return je(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Ye=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),L=new WeakMap,he=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},N=function(){function e(){}return e.connect=function(t,r){var n=new Ye(t,r);L.set(t,n)},e.observe=function(t,r,n){var i=L.get(t),o=i.observationTargets.length===0;he(i.observationTargets,r)<0&&(o&&B.push(i),i.observationTargets.push(new Qe(r,n&&n.box)),ve(1),K.schedule())},e.unobserve=function(t,r){var n=L.get(t),i=he(n.observationTargets,r),o=n.observationTargets.length===1;i>=0&&(o&&B.splice(B.indexOf(n),1),n.observationTargets.splice(i,1),ve(-1))},e.disconnect=function(t){var r=this,n=L.get(t);n.observationTargets.slice().forEach(function(i){return r.unobserve(t,i.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Ke=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");N.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ae(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");N.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ae(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");N.unobserve(this,t)},e.prototype.disconnect=function(){N.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const Ze=e=>{const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),t},et=Ze,tt=pe[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],Se=tt,rt=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:Ke;function nt(e,t){const r=ot(),n=et(t);return Se(()=>{let i=!1;const o=e&&"current"in e?e.current:e;if(!o)return()=>{};function s(a,l){i||n.current(a,l)}return r.subscribe(o,s),()=>{i=!0,r.unsubscribe(o,s)}},[e,r,n]),r.observer}function it(){let e=!1,t=[];const r=new Map,n=new rt((i,o)=>{t=t.concat(i),e||window.requestAnimationFrame(()=>{const s=new Set;for(let a=0;a<t.length;a++){if(s.has(t[a].target))continue;s.add(t[a].target);const l=r.get(t[a].target);l==null||l.forEach(c=>c(t[a],o))}t=[],e=!1}),e=!0});return{observer:n,subscribe(i,o){n.observe(i);const s=r.get(i)??[];s.push(o),r.set(i,s)},unsubscribe(i,o){const s=r.get(i)??[];if(s.length===1){n.unobserve(i),r.delete(i);return}const a=s.indexOf(o);a!==-1&&s.splice(a,1),r.set(i,s)}}}let Y;const ot=()=>Y||(Y=it()),st=(e,t)=>{const[r,n]=d.useState(()=>{const i=e&&"current"in e?e.current:e;return i?[i.offsetWidth,i.offsetHeight]:[(t==null?void 0:t.initialWidth)??0,(t==null?void 0:t.initialHeight)??0]});return Se(()=>{const i=e&&"current"in e?e.current:e;i&&n([i.offsetWidth,i.offsetHeight])},[e]),nt(e,i=>{const o=i.target;n([o.offsetWidth,o.offsetHeight])}),r};function at({action:e,options:t,variant:r,handleExecuteAction:n,customComponents:i},o){const s=i?i.largeButtonType:null;if(s){let a={};return i&&i.largeButtonProps&&(a=i.largeButtonProps),u(s,{ref:o,action:e,variant:t&&t.largerButtonVariant?t.largerButtonVariant:r,disabled:!e.enabled,onClick:()=>n(e),...a},e.id)}else return P(me,{ref:o,color:e.color,variant:t&&t.largerButtonVariant?t.largerButtonVariant:r,disabled:!e.enabled,onClick:()=>n(e),children:[e.icon,u(Ee,{children:e.label})]},e.id)}function ut({action:e,options:t,variant:r,handleExecuteAction:n,customComponents:i},o){const s=i?i.mediumButtonType:null;if(s){let a={};return i&&i.mediumButtonProps&&(a=i.mediumButtonProps),u(s,{ref:o,action:e,variant:t&&t.smallerButtonVariant?t.smallerButtonVariant:r,disabled:!e.enabled,onClick:()=>n(e),...a},e.id)}else return u(Be,{ref:o,color:e.color,variant:t&&t.smallerButtonVariant?t.smallerButtonVariant:r,disabled:!e.enabled,onClick:()=>n(e),children:e.icon},e.id)}function ct({action:e,options:t,variant:r,handleExecuteAction:n,customComponents:i}){const o=i?i.smallButtonType:null;return u(H.Item,{leftSection:e.icon,disabled:!e.enabled,color:t&&t.menuItemApplyActionColor?e.color:void 0,onClick:()=>n(e),children:u(ge,{withinPortal:!0,withArrow:!0,disabled:!e.hint,label:e.hint,children:o?u("div",{children:u(o,{action:e,variant:t&&t.menuItemVariant?t.menuItemVariant:r})}):u(Ee,{variant:t&&t.menuItemVariant?t.menuItemVariant:r,children:e.label})})},e.id)}function lt(e,t,r){return t?at(e,r):ut(e,r)}function be({actions:e,variant:t,customComponents:r,options:n}){const i=d.useRef(null),o=d.useRef([]),s=d.useRef(null),a=d.useRef([]),l=d.useRef([]),[c,w]=d.useState(e.length),[p,M]=d.useState([]),[q,ee]=st(i),[X,D]=d.useState(!1),y=Ae(),z=n&&n.largerBreakPoint?n.largerBreakPoint:y.breakpoints.md,R=n&&n.smallerBreakPoint?n.smallerBreakPoint:y.breakpoints.sm,m=ie(`(min-width: ${z})`),O=ie(`(max-width: ${R})`),$=n&&n.largerSpacing?_(n.largerSpacing):_("1rem"),G=n&&n.smallerSpacing?_(n.smallerSpacing):_("0.25rem"),f=m?$:G,v=n&&n.menuPosition?n.menuPosition:"right",g=m?a:l,W=d.useCallback(()=>{const h=i.current;if(h){const T=h.clientWidth;let A=0,re=0,U=0;re+=s.current?s.current.offsetWidth:50,o.current.filter(k=>k.current).length===e.length&&g.current.length===0&&(g.current=[],o.current.forEach(k=>{g.current=[...g.current,k.current.offsetWidth]})),g.current.forEach((k,Te)=>{A+=k+(Pe(e,Te)?0:f),A<=T-(re+Number(f))&&U++}),O?(M(e),w(0)):(M(e.slice(U)),w(U))}},[e,O,g,f]);d.useLayoutEffect(()=>{W()},[e,q,W]);function S(h){h.enabled&&h.executeAction()}function te(){return s.current=null,p.length>0&&P(ne,{children:[c!==0&&v==="right"?u(J,{w:f}):void 0,u("div",{ref:s,children:P(H,{opened:X,onChange:D,withinPortal:!0,position:n&&n.menuDropdownPosition?n.menuDropdownPosition:v==="right"?"bottom-end":"bottom-start",children:[u(H.Target,{children:m?u(me,{color:n&&n.menuButtonColor?n.menuButtonColor:"blue.5",variant:n&&n.menuButtonVariant?n.menuButtonVariant:t,px:"10px",children:u(oe,{})}):u(Be,{color:n&&n.menuButtonColor?n.menuButtonColor:"blue.5",variant:n&&n.menuButtonVariant?n.menuButtonVariant:t,children:u(oe,{})})}),u(H.Dropdown,{children:p.map(h=>ct({action:h,options:n,variant:t,handleExecuteAction:S,customComponents:r}))})]})}),c!==0&&v==="left"?u(J,{w:f}):void 0]})}return o.current=[],P("div",{style:{width:"100%",display:"flex",justifyContent:v==="right"?"flex-end":"flex-start"},ref:i,children:[v==="left"?te():void 0,e.map((h,T)=>{const A=pe.createRef();if(o.current=[...o.current,A],!(T>=c))return P(ne,{children:[u(ge,{withArrow:!0,withinPortal:!0,disabled:!h.hint,label:h.hint,children:u("div",{children:lt({action:h,options:n,variant:t,handleExecuteAction:S,customComponents:r},m,A)})}),c===T+1?void 0:u(J,{w:f},T)]})}),v==="right"?te():void 0]})}try{be.displayName="ArchbaseActionButtons",be.__docgenInfo={description:"",displayName:"ArchbaseActionButtons",props:{actions:{defaultValue:null,description:"Lista de ações",name:"actions",required:!0,type:{name:"ArchbaseAction[]"}},variant:{defaultValue:null,description:"Variação padrão para todo o componente, que será sobrescrito pela variação mais específica de options",name:"variant",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"Opções de personalização",name:"options",required:!1,type:{name:"ArchbaseActionButtonsOptions"}},customComponents:{defaultValue:null,description:"Definição dos componentes personalizados",name:"customComponents",required:!1,type:{name:"ActionButtonsCustomComponentsDefinition"}}}}}catch{}export{be as A};
