import{a as y,j as e}from"./jsx-runtime-29545a09.js";import{p as n,u as X}from"./useArchbaseRemoteServiceApi-05255476.js";import{A as Y}from"./DemoIOCTypes-d657846a.js";import{u as J,a as K}from"./useArchbaseDataSource-0bdc03a6.js";import{u as Q}from"./useArchbaseRemoteDataSource-644521a9.js";import{u as q,D as g}from"./useArchbaseDataSourceListener-cbed610e.js";import{t as p}from"./i18next-a4b2730f.js";import{r as C}from"./index-76fb7be0.js";import"./index-1076ae77.js";import{u as Z}from"./use-force-update-df6d2b99.js";import{P as ee}from"./Paper-9304c07a.js";import{A as re}from"./ArchbaseAlert-d4f20d19.js";import{I as te}from"./IconBug-81bb8ee5.js";import{S as ae}from"./ScrollArea-d1e51cef.js";import{L as oe}from"./LoadingOverlay-daa9890b.js";import{S as ie}from"./Stack-1cc1addd.js";import{S as ne}from"./Space-3f7303e6.js";import{G as _}from"./Group-ec80c87c.js";import{B as E}from"./Button-45c30308.js";import{I as se}from"./IconDeviceFloppy-9fc3d121.js";import{I as D}from"./IconX-8ec7c03b.js";import{u as le}from"./ArchbaseAppContext-a2fe1edf.js";import{A as me}from"./ArchbaseNotifications-c6fc9152.js";import{p as pe}from"./pessoasData-6b8000da.js";import"./ArchbaseRemoteApiService-ede5188b.js";import"./_commonjsHelpers-de833af9.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./___vite-browser-external_commonjs-proxy-698e55bb.js";import"./string-utils-e92dc4e1.js";import"./index-83127612.js";import"./index-44ceb156.js";import"./lodash-4d0be66a.js";import"./polymorphic-factory-e212381f.js";import"./Mantine.context-0732ca39.js";import"./Alert-1c6f8f93.js";import"./CloseButton-c44b8f52.js";import"./UnstyledButton-6bceb5b8.js";import"./use-id-9525279e.js";import"./use-isomorphic-effect-f46ba680.js";import"./createReactComponent-1d99d95b.js";import"./index-9d475cdf.js";import"./create-safe-context-978e3819.js";import"./use-merged-ref-962e80ee.js";import"./DirectionProvider-3f93a9e9.js";import"./OptionalPortal-d3ff2b4f.js";import"./index-d3ea75b5.js";import"./Loader-2934e180.js";import"./Transition-7fd90e94.js";import"./use-reduced-motion-94535b68.js";import"./use-media-query-404d9c84.js";import"./use-did-update-4c7f685e.js";import"./use-mantine-color-scheme-940af2ab.js";import"./use-local-storage-21e66413.js";import"./FocusTrap-0274480a.js";import"./Text-052cbebe.js";import"./Flex-472ba316.js";import"./TextInput-256f3fb5.js";import"./InputBase-b1a2e9dc.js";import"./Input-abb5d566.js";import"./create-optional-context-e52a7171.js";import"./use-input-props-0bcecfab.js";import"./Accordion-ee2e152a.js";import"./AccordionChevron-793bd026.js";import"./create-scoped-keydown-handler-870d0701.js";import"./get-style-object-71cabcb5.js";import"./use-uncontrolled-625105b4.js";import"./notifications.store-cc6c29fc.js";import"./store-8002eacc.js";import"./types-5decf4ed.js";function A({innerRef:u,isError:d=!1,isCanceling:b=!1,isSaving:t=!1,error:o="",clearError:c=()=>{},autoCloseAlertError:N=15e3,width:L="100%",height:k="100%",withBorder:j=!0,children:G,radius:O,variant:f,dataSource:r,onSave:V,onCancel:S,onBeforeSave:I,onAfterSave:w,onBeforeCancel:B,onAfterCancel:x,onError:i}){const h=le(),U=C.useRef(),[$,s]=C.useState(d),[M,l]=C.useState(o),z=Z();q({dataSource:r,listener:a=>{a.type===g.onError&&(s(!0),l(a.error)),(a.type===g.afterEdit||a.type===g.afterInsert)&&z()}});const W=async a=>{try{V?V(a):(I&&I(a),r.isBrowsing()||r.save().then(()=>{w&&w(a)}).catch(m=>{i&&i(n(m)),s(!0),l(n(m))}))}catch(m){i&&i(n(m)),s(!0),l(n(m))}},T=()=>{try{S?S():(B&&B(),r.isBrowsing()||r.cancel(),x&&x())}catch(a){i&&i(n(a)),s(!0),l(n(a))}},H=()=>{c&&c(),s(!1),l("")};return y(ee,{ref:u||U,withBorder:j,radius:O,style:{width:L,height:k,padding:20},children:[$?e(re,{autoClose:N,withCloseButton:!0,withBorder:!0,icon:e(te,{size:"1.4rem"}),title:p("WARNING"),titleColor:"rgb(250, 82, 82)",variant:f??h.variant,onClose:H,children:e("span",{children:M})}):null,y(ae,{h:`calc(100% - ${d?"80px":"0px"})`,children:[e(oe,{visible:b||t,opacity:.3}),G,y(ie,{children:[e(ne,{h:"lg"}),r&&!r.isBrowsing()?y(_,{gap:"md",children:[e(E,{leftSection:e(se,{}),onClick:()=>W(r.getCurrentRecord()),disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"green",children:`${p("Ok")}`}),e(E,{leftSection:e(D,{}),onClick:T,disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"red",children:`${p("Cancel")}`})]}):e(_,{gap:"md",children:e(E,{leftSection:e(D,{}),onClick:T,variant:f??h.variant,children:`${p("Close")}`})})]})]})]})}try{A.displayName="ArchbaseFormTemplate",A.__docgenInfo={description:"",displayName:"ArchbaseFormTemplate",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"ArchbaseDataSource<T, ID>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isCanceling:{defaultValue:{value:"false"},description:"",name:"isCanceling",required:!1,type:{name:"boolean"}},isSaving:{defaultValue:{value:"false"},description:"",name:"isSaving",required:!1,type:{name:"boolean"}},isError:{defaultValue:{value:"false"},description:"",name:"isError",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:""},description:"",name:"error",required:!1,type:{name:"string"}},clearError:{defaultValue:{value:"() => {}"},description:"",name:"clearError",required:!1,type:{name:"() => void"}},autoCloseAlertError:{defaultValue:{value:"15000"},description:"",name:"autoCloseAlertError",required:!1,type:{name:"number"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},withBorder:{defaultValue:{value:"true"},description:"",name:"withBorder",required:!1,type:{name:"boolean"}},radius:{defaultValue:null,description:"",name:"radius",required:!1,type:{name:"string | number"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(entityToSave: any) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onBeforeSave:{defaultValue:null,description:"",name:"onBeforeSave",required:!1,type:{name:"(entityToSave: T) => void"}},onAfterSave:{defaultValue:null,description:"",name:"onAfterSave",required:!1,type:{name:"(savedEntity: T) => void"}},onBeforeCancel:{defaultValue:null,description:"",name:"onBeforeCancel",required:!1,type:{name:"() => void"}},onAfterCancel:{defaultValue:null,description:"",name:"onAfterCancel",required:!1,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(error: string) => void"}}}}}catch{}const ue=()=>{const u=J(),d=X(Y.Pessoa),{dataSource:b}=Q({name:"dsPessoas",service:d,pageSize:10,loadOnStart:!0,currentPage:0,onLoadComplete:o=>{},onDestroy:o=>{},onError:(o,c)=>{me.showError(p("WARNING"),o,c)}});q({dataSource:b,listener:o=>{}});const{dataSource:t}=K({initialData:de,name:"dsPessoas"});return t!=null&&t.isBrowsing()&&!(t!=null&&t.isEmpty())&&t.edit(),q({dataSource:t,listener:o=>{switch(o.type){case g.fieldChanged:{u();break}}}}),e("div",{style:{width:"100%",height:"calc(100vh - 50px)"},children:e(A,{dataSource:t,title:"Edição",isError:!0,error:"Testando erro"})})},de=[pe[0]],Br={title:"Modelos/Form template",component:A},v={name:"Exemplo simples",render:()=>e(ue,{})};var R,P,F;v.parameters={...v.parameters,docs:{...(R=v.parameters)==null?void 0:R.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseFormTemplateExample />
}`,...(F=(P=v.parameters)==null?void 0:P.docs)==null?void 0:F.source}}};export{v as Primary,Br as default};
