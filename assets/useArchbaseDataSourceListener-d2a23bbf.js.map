{"version":3,"file":"useArchbaseDataSourceListener-d2a23bbf.js","sources":["../../src/components/hooks/useArchbaseDataSourceListener.ts"],"sourcesContent":["import { useEffect } from 'react'\nimport type { DataSourceEvent, ArchbaseDataSource } from '../datasource/ArchbaseDataSource'\n\nexport type UseArchbaseDataSourceListenerProps<T, ID> = {\n  dataSource: ArchbaseDataSource<T, ID>\n  listener: (event: DataSourceEvent<T>) => void\n}\n\nexport const useArchbaseDataSourceListener = <T, ID>(\n  props: UseArchbaseDataSourceListenerProps<T, ID>\n): void => {\n  /**\n   * Registrando listeners\n   * @param dataSource\n   */\n  const registerListeners = (dataSource: ArchbaseDataSource<T, string>) => {\n    dataSource.addListener(props.listener)\n  }\n  /**\n   * Removendo listeners\n   * @param dataSource\n   */\n  const unRegisterListeners = (dataSource: ArchbaseDataSource<T, string>) => {\n    dataSource.removeListener(props.listener)\n  }\n\n  useEffect(() => {\n    if (props.dataSource) {\n      unRegisterListeners(props.dataSource)\n      registerListeners(props.dataSource)\n    }\n    return () => {\n      if (props.dataSource) {\n        unRegisterListeners(props.dataSource)\n      }\n    }\n  }, [props.dataSource.uuid])\n}\n"],"names":["useArchbaseDataSourceListener","props","registerListeners","dataSource","unRegisterListeners","useEffect"],"mappings":"wCAQa,MAAAA,EACXC,GACS,CAKH,MAAAC,EAAqBC,GAA8C,CAC5DA,EAAA,YAAYF,EAAM,QAAQ,CAAA,EAMjCG,EAAuBD,GAA8C,CAC9DA,EAAA,eAAeF,EAAM,QAAQ,CAAA,EAG1CI,EAAAA,UAAU,KACJJ,EAAM,aACRG,EAAoBH,EAAM,UAAU,EACpCC,EAAkBD,EAAM,UAAU,GAE7B,IAAM,CACPA,EAAM,YACRG,EAAoBH,EAAM,UAAU,CACtC,GAED,CAACA,EAAM,WAAW,IAAI,CAAC,CAC5B"}