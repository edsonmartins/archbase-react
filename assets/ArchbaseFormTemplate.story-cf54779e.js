import{a as y,j as e}from"./jsx-runtime-c9381026.js";import{u as X}from"./useArchbaseRemoteServiceApi-5974aa1a.js";import{A as Y}from"./DemoIOCTypes-d657846a.js";import{u as J,a as K}from"./useArchbaseDataSource-c5d317be.js";import{u as Q}from"./useArchbaseRemoteDataSource-d81fd1bf.js";import{u as q,D as g}from"./useArchbaseDataSourceListener-92dd263c.js";import{t as p}from"./i18next-a4b2730f.js";import{r as C}from"./index-8b3efc3f.js";import"./index-9e992aa6.js";import{u as Z}from"./use-force-update-11fe72c1.js";import{P as ee}from"./Paper-fe8e8b68.js";import{A as re}from"./ArchbaseAlert-90ea4921.js";import{I as te}from"./IconBug-b91acd15.js";import{S as ae}from"./ScrollArea-556e0f32.js";import{L as oe}from"./LoadingOverlay-789a86ce.js";import{S as ie}from"./Stack-0a5fcadb.js";import{S as ne}from"./Space-a5f0cacf.js";import{G as _}from"./Group-28f303e3.js";import{B as E}from"./Button-beee2faa.js";import{I as se}from"./IconDeviceFloppy-e64fda70.js";import{I as D}from"./IconX-efebeb5f.js";import{p as n}from"./ArchbaseErrorHelper-1b9b234b.js";import{u as le}from"./ArchbaseAppContext-3b02e65f.js";import{p as me}from"./pessoasData-6b8000da.js";import{A as pe}from"./ArchbaseNotifications-c9d1e374.js";import"./ArchbaseIOCTypes-dfd3b385.js";import"./IsNotEmpty-d2b4946f.js";import"./_commonjsHelpers-de833af9.js";import"./v4-4a60fe23.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./string-utils-046f5c60.js";import"./index-1905cc86.js";import"./index-d0400ba7.js";import"./index-07970463.js";import"./index-bd3702cd.js";import"./lodash-4d0be66a.js";import"./polymorphic-factory-36f51e7a.js";import"./Mantine.context-e727d900.js";import"./Alert-806e4ede.js";import"./Input-d93c779c.js";import"./create-optional-context-86e78b6c.js";import"./use-resolved-styles-api-f52582d3.js";import"./UnstyledButton-b0502f12.js";import"./use-id-f896cdc5.js";import"./use-isomorphic-effect-aa890e3d.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./create-safe-context-941c9e18.js";import"./use-merged-ref-a374cf59.js";import"./DirectionProvider-1e219af7.js";import"./OptionalPortal-355abca9.js";import"./index-a38d0dca.js";import"./Loader-29e884c2.js";import"./FocusTrap-c6f4da6f.js";import"./use-did-update-bccd292e.js";import"./Transition-ec8db713.js";import"./use-reduced-motion-73d958ef.js";import"./use-media-query-91643880.js";import"./use-mantine-color-scheme-dd296b2f.js";import"./noop-1bad6ac0.js";import"./use-local-storage-3e1e375d.js";import"./use-window-event-860a85e7.js";import"./ArchbaseDialog-b31b834f.js";import"./Text-f1dc7ab8.js";import"./Flex-edc9651b.js";import"./TextInput-d0773f08.js";import"./InputBase-c248c15b.js";import"./use-input-props-713190c3.js";import"./Accordion-2693d420.js";import"./AccordionChevron-7ec5dd1a.js";import"./create-scoped-keydown-handler-870d0701.js";import"./get-style-object-71cabcb5.js";import"./use-uncontrolled-f56237fb.js";import"./Modal-f0a12e0c.js";import"./types-5decf4ed.js";import"./notifications.store-2c4c9735.js";import"./store-704b6bc9.js";function A({innerRef:u,isError:d=!1,isCanceling:b=!1,isSaving:t=!1,error:o="",clearError:c=()=>{},autoCloseAlertError:N=15e3,width:L="100%",height:k="100%",withBorder:j=!0,children:G,radius:O,variant:f,dataSource:r,onSave:V,onCancel:S,onBeforeSave:I,onAfterSave:w,onBeforeCancel:B,onAfterCancel:x,onError:i}){const h=le(),U=C.useRef(),[$,s]=C.useState(d),[M,l]=C.useState(o),z=Z();q({dataSource:r,listener:a=>{a.type===g.onError&&(s(!0),l(a.error)),(a.type===g.afterEdit||a.type===g.afterInsert)&&z()}});const W=async a=>{try{V?V(a):(I&&await I(a),r.isBrowsing()||r.save().then(()=>{w&&w(a)}).catch(m=>{i&&i(n(m)),s(!0),l(n(m))}))}catch(m){i&&i(n(m)),s(!0),l(n(m))}},T=()=>{try{S?S():(B&&B(),r.isBrowsing()||r.cancel(),x&&x())}catch(a){i&&i(n(a)),s(!0),l(n(a))}},H=()=>{c&&c(),s(!1),l("")};return y(ee,{ref:u||U,withBorder:j,radius:O,style:{width:L,height:k,padding:20},children:[$?e(re,{autoClose:N,withCloseButton:!0,withBorder:!0,icon:e(te,{size:"1.4rem"}),title:p("WARNING"),titleColor:"rgb(250, 82, 82)",variant:f??h.variant,onClose:H,children:e("span",{children:M})}):null,y(ae,{h:`calc(100% - ${d?"80px":"0px"})`,children:[e(oe,{visible:b||t,opacity:.3}),G,y(ie,{children:[e(ne,{h:"lg"}),r&&!r.isBrowsing()?y(_,{gap:"md",children:[e(E,{leftSection:e(se,{}),onClick:()=>W(r.getCurrentRecord()),disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"green",children:`${p("Ok")}`}),e(E,{leftSection:e(D,{}),onClick:T,disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"red",children:`${p("Cancel")}`})]}):e(_,{gap:"md",children:e(E,{leftSection:e(D,{}),onClick:T,variant:f??h.variant,children:`${p("Close")}`})})]})]})]})}try{A.displayName="ArchbaseFormTemplate",A.__docgenInfo={description:"",displayName:"ArchbaseFormTemplate",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"ArchbaseDataSource<T, ID>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isCanceling:{defaultValue:{value:"false"},description:"",name:"isCanceling",required:!1,type:{name:"boolean"}},isSaving:{defaultValue:{value:"false"},description:"",name:"isSaving",required:!1,type:{name:"boolean"}},isError:{defaultValue:{value:"false"},description:"",name:"isError",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:""},description:"",name:"error",required:!1,type:{name:"string"}},clearError:{defaultValue:{value:"() => {}"},description:"",name:"clearError",required:!1,type:{name:"() => void"}},autoCloseAlertError:{defaultValue:{value:"15000"},description:"",name:"autoCloseAlertError",required:!1,type:{name:"number"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},withBorder:{defaultValue:{value:"true"},description:"",name:"withBorder",required:!1,type:{name:"boolean"}},radius:{defaultValue:null,description:"",name:"radius",required:!1,type:{name:"string | number"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(entityToSave: any) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onBeforeSave:{defaultValue:null,description:"",name:"onBeforeSave",required:!1,type:{name:"(entityToSave: T) => void"}},onAfterSave:{defaultValue:null,description:"",name:"onAfterSave",required:!1,type:{name:"(savedEntity: T) => void"}},onBeforeCancel:{defaultValue:null,description:"",name:"onBeforeCancel",required:!1,type:{name:"() => void"}},onAfterCancel:{defaultValue:null,description:"",name:"onAfterCancel",required:!1,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(error: string) => void"}}}}}catch{}const ue=()=>{const u=J(),d=X(Y.Pessoa),{dataSource:b}=Q({name:"dsPessoas",service:d,pageSize:10,loadOnStart:!0,currentPage:0,onLoadComplete:o=>{},onDestroy:o=>{},onError:(o,c)=>{pe.showError(p("WARNING"),o,c)}});q({dataSource:b,listener:o=>{}});const{dataSource:t}=K({initialData:de,name:"dsPessoas"});return t!=null&&t.isBrowsing()&&!(t!=null&&t.isEmpty())&&t.edit(),q({dataSource:t,listener:o=>{switch(o.type){case g.fieldChanged:{u();break}}}}),e("div",{style:{width:"100%",height:"calc(100vh - 50px)"},children:e(A,{dataSource:t,title:"Edição",isError:!0,error:"Testando erro"})})},de=[me[0]],Nr={title:"Modelos/Form template",component:A},v={name:"Exemplo simples",render:()=>e(ue,{})};var R,P,F;v.parameters={...v.parameters,docs:{...(R=v.parameters)==null?void 0:R.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseFormTemplateExample />
}`,...(F=(P=v.parameters)==null?void 0:P.docs)==null?void 0:F.source}}};export{v as Primary,Nr as default};
