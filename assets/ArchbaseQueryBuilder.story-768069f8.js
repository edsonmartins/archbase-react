import{j as e,a as n}from"./jsx-runtime-2ca98591.js";import{r as d}from"./index-402471b7.js";import"./ArchbaseAdvancedTabs-2e888216.js";import{C as y,u as C,E as N,D as w,Q,F as t,O as o,G as l,M as B,H as m}from"./ArchbaseGlobalFilter-e508298c.js";import{f as I,S as O}from"./ArchbaseRemoteApiService-32c8b54f.js";import{u as _}from"./useArchbaseDataSource-86b4bc22.js";import{u as G}from"./useArchbaseRemoteDataSource-0c2e1817.js";import{u as R}from"./ArchbaseLocalFilterDataSource-dc5c2882.js";import{u as p}from"./useArchbaseDataSourceListener-d2a23bbf.js";import{u as M}from"./useArchbaseRemoteServiceApi-9ac3e894.js";import"./useArchbasePassiveLayoutEffect-8e758e5c.js";import{A as L,p as V}from"./DemoContainerIOC-f3770621.js";import{A as j}from"./ArchbaseNotifications-af02f1d8.js";import{G as F,C as h}from"./Grid-10ef5cfd.js";import{G as U}from"./Group-d6868f5c.js";import{T as z}from"./Text-6036efe5.js";import"./_commonjsHelpers-de833af9.js";import"./index-29301433.js";import"./index-9d475cdf.js";import"./ArchbaseFloatingWindow-cac83535.js";import"./use-isomorphic-effect-d441b347.js";import"./Box-603b1b1a.js";import"./MantineProvider-c53063b6.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-20a9f65a.js";import"./Button-86c3033b.js";import"./createReactComponent-b82b540a.js";import"./Paper-165ce658.js";import"./use-window-event-f88e3fb7.js";import"./extends-98964cd2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./___vite-browser-external_commonjs-proxy-19bb288c.js";const H=[],J=()=>{const g=C(),k=M(L.Pessoa),{dataSource:x}=G({name:"dsPessoas",service:k,pageSize:50,loadOnStart:!0,currentPage:0,onLoadComplete:r=>{},onDestroy:r=>{},onError:(r,s)=>{j.showError(I("WARNING"),r,s)}});p({dataSource:x,listener:r=>{}});const[i,c]=d.useState({currentFilter:N(),activeFilterIndex:-1,expandedFilter:!1}),q=d.useRef(),{dataSource:E}=R({initialData:H,name:"dsFilters"}),{dataSource:a}=_({initialData:K,name:"dsPessoas"});a!=null&&a.isBrowsing()&&!(a!=null&&a.isEmpty())&&a.edit(),p({dataSource:a,listener:r=>{switch(r.type){case w.fieldChanged:{g();break}}}});const A=(r,s)=>{c({...i,currentFilter:r,activeFilterIndex:s})},T=r=>{c({...i,expandedFilter:r})},P=(r,s)=>{c({...i,currentFilter:r,activeFilterIndex:s})},D=()=>{},v=d.useMemo(()=>n(Q,{children:[e(t,{name:"id",label:"ID",dataType:"number",sortable:!0,quickFilter:!0,quickFilterSort:!0}),e(t,{name:"nome",label:"Nome da pessoa",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),n(t,{name:"sexo",label:"Sexo",dataType:"string",sortable:!0,quickFilter:!0,quickFilterSort:!0,children:[e(l,{label:"Masculino",value:"Masculino"}),e(l,{label:"Feminino",value:"Feminino"})]}),e(t,{name:"cpf",label:"CPF",dataType:"string",sortable:!0,quickFilter:!0,mask:B.CPF}),e(t,{name:"pai",label:"Nome do pai",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),e(t,{name:"mae",label:"Nome do mÃ£e",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),e(t,{name:"cidade",label:"Cidade",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),e(t,{name:"Estado",label:"Estado",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),e(t,{name:"email",label:"E-mail",dataType:"string",sortable:!0,quickFilter:!0,operator:o,quickFilterSort:!0}),e(t,{name:"data_nasc",label:"Data nascimento",dataType:"date",sortable:!0,quickFilter:!0,operator:m}),e(t,{name:"peso",label:"Peso KG",dataType:"number",sortable:!0,quickFilter:!0,operator:m,quickFilterSort:!0}),n(t,{name:"status",label:"Status da pessoa",dataType:"string",sortable:!0,quickFilter:!0,quickFilterSort:!0,children:[e(l,{label:"APROVADO",value:"0"}),e(l,{label:"REJEITADO",value:"1"}),e(l,{label:"PENDENTE",value:"2"})]})]}),[]);return e(F,{children:e(F.Col,{span:12,children:n(h,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(h.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(U,{position:"apart",children:e(z,{weight:500,children:"QueryBuilder Filter Component"})})}),e(O,{sx:r=>({height:800}),children:e(y,{id:"this.props.filterName",viewName:"ViewPessoa",apiVersion:"1.00",ref:q,expandedFilter:i.expandedFilter,persistenceDelegator:E,currentFilter:i.currentFilter,activeFilterIndex:i.activeFilterIndex,onSelectedFilter:P,onFilterChanged:A,onSearchByFilter:D,onToggleExpandedFilter:T,width:"560px",height:"170px",children:v})})]})})})},K=[V[0]],Te={title:"Filtros/Query builder",component:y},u={name:"Exemplo simples",render:()=>e(J,{})};var b,S,f;u.parameters={...u.parameters,docs:{...(b=u.parameters)==null?void 0:b.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseQueryBuilderExample />
}`,...(f=(S=u.parameters)==null?void 0:S.docs)==null?void 0:f.source}}};export{u as Primary,Te as default};
//# sourceMappingURL=ArchbaseQueryBuilder.story-768069f8.js.map
