import{j as a,a as c}from"./jsx-runtime-c9381026.js";import{b as oe,c as ne,d as le,u as se,a as de}from"./useArchbaseDataSource-c5d317be.js";import{D as o,u as ue}from"./useArchbaseDataSourceListener-92dd263c.js";import"./index-9e992aa6.js";import{r as t}from"./index-8b3efc3f.js";import{b as me,B as ce}from"./polymorphic-factory-bf652503.js";import{u as pe}from"./use-mantine-color-scheme-12883fe8.js";import{u as fe}from"./use-force-update-11fe72c1.js";import{A as F}from"./ActionIcon-aabf0409.js";import{I as k}from"./IconClock-04b0092d.js";import{T as he}from"./Tooltip-051468cd.js";import{T as ye}from"./TimeInput-feead10c.js";import{G as v}from"./Grid-93307f43.js";import{C as p}from"./Card-171745c8.js";import{G as B}from"./Group-5b3c182b.js";import{T as H}from"./Text-70cb1fd9.js";import{S as Ee}from"./ScrollArea-96f13bef.js";import{A as be}from"./ArchbaseObjectInspector-191de42c.js";import"./i18next-a4b2730f.js";import"./lodash-4d0be66a.js";import"./_commonjsHelpers-de833af9.js";import"./index-1905cc86.js";import"./index-d0400ba7.js";import"./Mantine.context-41afb47e.js";import"./noop-1bad6ac0.js";import"./use-media-query-91643880.js";import"./Loader-a46c68a6.js";import"./Transition-e462ee3e.js";import"./index-a38d0dca.js";import"./use-reduced-motion-73d958ef.js";import"./use-did-update-bccd292e.js";import"./UnstyledButton-5ea781f1.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./OptionalPortal-8c3f6fc2.js";import"./use-isomorphic-effect-aa890e3d.js";import"./use-merged-ref-a374cf59.js";import"./use-floating-auto-update-002b1cce.js";import"./DirectionProvider-1e219af7.js";import"./floating-ui.react-e0c547c4.js";import"./get-style-object-71cabcb5.js";import"./use-id-f896cdc5.js";import"./InputBase-46c7ce5b.js";import"./Input-7a6e621e.js";import"./create-optional-context-86e78b6c.js";import"./use-resolved-styles-api-07b5b463.js";import"./use-input-props-5361677b.js";import"./create-safe-context-941c9e18.js";import"./get-sorted-breakpoints-e9679440.js";import"./px-90b8b31c.js";import"./Paper-e7399838.js";function l({dataSource:i,dataField:r,disabled:n=!1,readOnly:g=!1,style:P,placeholder:R="HH:MM",label:_,description:j,error:s,required:z,size:U,width:S,innerRef:N,value:G,icon:K,onKeyDown:W,onKeyUp:J,onActionSearchExecute:h,tooltipIconSearch:Q="Clique aqui para Localizar",onFocusExit:q=()=>{},onFocusEnter:V=()=>{},onChangeValue:C=()=>{},variant:w,withPicker:X=!0}){const[y,I]=t.useState(G||""),T=t.useRef(null),d=me(),{colorScheme:Y}=pe(),[A,E]=t.useState(s),Z=fe();t.useEffect(()=>{E(void 0)},[y]),t.useEffect(()=>{s!==A&&E(s)},[s]);const u=()=>{let e=y;i&&r&&(e=i.getFieldValue(r),e||(e="")),I(e)},x=t.useCallback(()=>{u()},[]),D=t.useCallback(e=>{i&&r&&((e.type===o.dataChanged||e.type===o.recordChanged||e.type===o.afterScroll||e.type===o.afterCancel||e.type===o.afterEdit)&&(u(),Z()),e.type===o.onFieldError&&e.fieldName===r&&E(e.error))},[]);oe(()=>{u(),i&&r&&(i.addListener(D),i.addFieldChangeListener(r,x))}),ne(()=>{u()},[]);const $=e=>{e.preventDefault();const m=e.target.value;e.persist(),I(qe=>m),i&&!i.isBrowsing()&&r&&i.getFieldValue(r)!==m&&i.setFieldValue(r,m),C&&C(m,e)};le(()=>{i&&r&&(i.removeListener(D),i.removeFieldChangeListener(r,x))});const ee=e=>{q&&q(e)},re=e=>{V&&V(e)},b=()=>{let e=g;return i&&!g&&(e=i.isBrowsing()),e},ae=a(F,{variant:"subtle",color:"gray",onClick:()=>{var e;return(e=T.current)==null?void 0:e.showPicker()},disabled:n||b(),children:a(k,{size:"1rem",stroke:1.5})}),ie=h?a(he,{withinPortal:!0,withArrow:!0,label:Q,children:a(F,{style:{backgroundColor:w==="filled"?Y==="dark"?d.colors[d.primaryColor][5]:d.colors[d.primaryColor][6]:void 0},tabIndex:-1,variant:w,onClick:h,disabled:n||b(),children:K||a(k,{size:"1rem",stroke:1.5})})}):null,te=h?ie:X?ae:null;return a(ye,{disabled:n,readOnly:b(),size:U,style:{width:S,...P},value:y,ref:N||T,required:z,onChange:$,onBlur:ee,onFocus:re,placeholder:R,description:j,onKeyDown:W,onKeyUp:J,label:_,error:A,rightSection:te})}try{l.displayName="ArchbaseTimeEdit",l.__docgenInfo={description:"",displayName:"ArchbaseTimeEdit",props:{dataSource:{defaultValue:null,description:"Fonte de dados onde será atribuido o valor do edit",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataField:{defaultValue:null,description:"Campo onde deverá ser atribuido o valor do edit na fonte de dados",name:"dataField",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Indicador se o edit está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Indicador se o edit é somente leitura. Obs: usado em conjunto com o status da fonte de dados",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"Indicador se o preenchimento do edit é obrigatório",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Valor inicial no formato HH:MM",name:"value",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Estilo do edit",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"Tamanho do edit",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},width:{defaultValue:null,description:"Largura do edit",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"Icone à direita (substitui o ícone padrão de relógio)",name:"icon",required:!1,type:{name:"ReactNode"}},tooltipIconSearch:{defaultValue:{value:"Clique aqui para Localizar"},description:"Dica para botão localizar",name:"tooltipIconSearch",required:!1,type:{name:"string"}},onActionSearchExecute:{defaultValue:null,description:"Evento ocorre quando clica no botão localizar",name:"onActionSearchExecute",required:!1,type:{name:"() => void"}},placeholder:{defaultValue:{value:"HH:MM"},description:"Texto sugestão do edit",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Título do edit",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Descrição do edit",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Último erro ocorrido no edit",name:"error",required:!1,type:{name:"string"}},onFocusExit:{defaultValue:{value:"() => {}"},description:"Evento quando o foco sai do edit",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<T>"}},onFocusEnter:{defaultValue:{value:"() => {}"},description:"Evento quando o edit recebe o foco",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<T>"}},onChangeValue:{defaultValue:{value:"() => {}"},description:"Evento quando o valor do edit é alterado",name:"onChangeValue",required:!1,type:{name:"(value: string, event: any) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: any) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: any) => void"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"light"'},{value:'"filled"'},{value:'"outline"'},{value:'"default"'},{value:'"transparent"'},{value:'"white"'},{value:'"subtle"'},{value:'"gradient"'}]}},withPicker:{defaultValue:{value:"true"},description:"Controla se o picker de hora será exibido",name:"withPicker",required:!1,type:{name:"boolean"}}}}}catch{}const ve=()=>{const i=se(),{dataSource:r}=de({initialData:ge,name:"dsIntervalos"});return r!=null&&r.isBrowsing()&&!(r!=null&&r.isEmpty())&&r.edit(),ue({dataSource:r,listener:n=>{switch(n.type){case o.fieldChanged:{i();break}}}}),c(v,{children:[a(v.Col,{offset:1,span:4,children:c(p,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[a(p.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:a(B,{justify:"space-between",children:a(H,{fw:500,children:"Time Edit Component"})})}),c(ce,{style:{height:120},children:[a(l,{label:"Hora Início",dataSource:r,dataField:"horaInicio"}),a(l,{label:"Hora Fim",dataSource:r,dataField:"horaFim"})]})]})}),a(v.Col,{span:4,children:c(p,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[a(p.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:a(B,{justify:"space-between",children:a(H,{fw:500,children:"DataSource dsIntervalos"})})}),a(Ee,{style:{height:500},children:a(be,{data:r})})]})})]})},ge=[{horaInicio:"08:00",horaFim:"18:00"}],vr={title:"Editores/TimeEdit",component:l},f={name:"Exemplo simples",render:()=>a(ve,{})};var L,M,O;f.parameters={...f.parameters,docs:{...(L=f.parameters)==null?void 0:L.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseTimeEditExample />
}`,...(O=(M=f.parameters)==null?void 0:M.docs)==null?void 0:O.source}}};export{f as Primary,vr as default};
