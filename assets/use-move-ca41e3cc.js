import{r as c}from"./index-8b3efc3f.js";import{c as m}from"./clamp-73f6bef2.js";function D(r){return{x:m(r.x,0,1),y:m(r.y,0,1)}}function A(r,n,v="ltr"){const t=c.useRef(null),u=c.useRef(!1),s=c.useRef(!1),d=c.useRef(0),[y,E]=c.useState(!1);return c.useEffect(()=>{u.current=!0},[]),c.useEffect(()=>{var L,g;const l=({x:e,y:w})=>{cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{if(u.current&&t.current){t.current.style.userSelect="none";const o=t.current.getBoundingClientRect();if(o.width&&o.height){const x=m((e-o.left)/o.width,0,1);r({x:v==="ltr"?x:1-x,y:m((w-o.top)/o.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",f),document.addEventListener("mouseup",i),document.addEventListener("touchmove",a),document.addEventListener("touchend",i)},M=()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",i)},p=()=>{!s.current&&u.current&&(s.current=!0,typeof(n==null?void 0:n.onScrubStart)=="function"&&n.onScrubStart(),E(!0),h())},i=()=>{s.current&&u.current&&(s.current=!1,E(!1),M(),setTimeout(()=>{typeof(n==null?void 0:n.onScrubEnd)=="function"&&n.onScrubEnd()},0))},b=e=>{p(),e.preventDefault(),f(e)},f=e=>l({x:e.clientX,y:e.clientY}),S=e=>{e.cancelable&&e.preventDefault(),p(),a(e)},a=e=>{e.cancelable&&e.preventDefault(),l({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY})};return(L=t.current)==null||L.addEventListener("mousedown",b),(g=t.current)==null||g.addEventListener("touchstart",S,{passive:!1}),()=>{t.current&&(t.current.removeEventListener("mousedown",b),t.current.removeEventListener("touchstart",S))}},[v,r]),{ref:t,active:y}}export{D as c,A as u};
