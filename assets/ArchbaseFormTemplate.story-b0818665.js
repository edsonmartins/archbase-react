import{a as v,j as e}from"./jsx-runtime-2ca98591.js";import{r as A}from"./index-402471b7.js";import"./ArchbaseAdvancedTabs-2e888216.js";import{D as N,p as o,u as H}from"./ArchbaseGlobalFilter-e508298c.js";import{c as X,e as Y,I as J,f as m,S as K}from"./ArchbaseRemoteApiService-32c8b54f.js";import{u as Q}from"./useArchbaseDataSource-86b4bc22.js";import{u as Z}from"./useArchbaseRemoteDataSource-0c2e1817.js";import{u as V}from"./useArchbaseDataSourceListener-d2a23bbf.js";import{u as ee}from"./useArchbaseRemoteServiceApi-9ac3e894.js";import{S as re,a as ae}from"./useArchbasePassiveLayoutEffect-8e758e5c.js";import{A as te,p as ie}from"./DemoContainerIOC-f3770621.js";import{A as ne}from"./ArchbaseNotifications-af02f1d8.js";import{P as oe}from"./Paper-165ce658.js";import{L as se,I as T}from"./IconX-4491cf7d.js";import{S as le}from"./Stack-2cdcdf01.js";import{G as _}from"./Group-d6868f5c.js";import{B as C}from"./Button-86c3033b.js";import"./_commonjsHelpers-de833af9.js";import"./index-29301433.js";import"./index-9d475cdf.js";import"./ArchbaseFloatingWindow-cac83535.js";import"./use-isomorphic-effect-d441b347.js";import"./Box-603b1b1a.js";import"./MantineProvider-c53063b6.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-20a9f65a.js";import"./createReactComponent-b82b540a.js";import"./Text-6036efe5.js";import"./use-window-event-f88e3fb7.js";import"./Grid-10ef5cfd.js";import"./extends-98964cd2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./___vite-browser-external_commonjs-proxy-19bb288c.js";function g({innerRef:p,isError:d=!1,isCanceling:b=!1,isSaving:a=!1,error:i="",clearError:c=()=>{},autoCloseAlertError:F=15e3,width:L="100%",height:k="100%",withBorder:O=!0,children:j,radius:G,variant:f,dataSource:r,onSave:q,onCancel:E,onBeforeSave:I,onAfterSave:S,onBeforeCancel:w,onAfterCancel:B,onError:n}){const h=X(),M=p||A.useRef(),[$,s]=A.useState(d),[z,l]=A.useState(i);V({dataSource:r,listener:t=>{t.type===N.onError&&(s(!0),l(t.error))}});const U=async t=>{try{q?q(t):(I&&I(t),r.isBrowsing()||r.save().then(()=>{S&&S(t)}).catch(u=>{n&&n(o(u)),s(!0),l(o(u))}))}catch(u){n&&n(o(u)),s(!0),l(o(u))}},x=()=>{try{E?E():(w&&w(),r.isBrowsing()||r.cancel(),B&&B())}catch(t){n&&n(o(t)),s(!0),l(o(t))}},W=()=>{c&&c(),s(!1),l("")};return v(oe,{ref:M,withBorder:O,radius:G,style:{width:L,height:k,padding:20},children:[$?e(Y,{autoClose:F,withCloseButton:!0,withBorder:!0,icon:e(J,{size:"1.4rem"}),title:m("WARNING"),titleColor:"rgb(250, 82, 82)",variant:f??h.variant,onClose:W,children:e("span",{children:z})}):null,v(K,{h:`calc(100% - ${d?"80px":"0px"})`,children:[e(se,{visible:b||a,overlayOpacity:.3}),j,v(le,{children:[e(re,{h:"lg"}),r&&!r.isBrowsing()?v(_,{spacing:"md",children:[e(C,{leftIcon:e(ae,{}),onClick:()=>U(r.getCurrentRecord()),disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"green",children:`${m("Ok")}`}),e(C,{leftIcon:e(T,{}),onClick:x,disabled:r&&r.isBrowsing(),variant:f??h.variant,color:"red",children:`${m("Cancel")}`})]}):e(_,{spacing:"md",children:e(C,{leftIcon:e(T,{}),onClick:x,variant:f??h.variant,children:`${m("Close")}`})})]})]})]})}try{g.displayName="ArchbaseFormTemplate",g.__docgenInfo={description:"",displayName:"ArchbaseFormTemplate",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"ArchbaseDataSource<T, ID>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:'Variants<"white" | "default" | "filled" | "outline" | "light" | "subtle" | "gradient">'}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isCanceling:{defaultValue:{value:"false"},description:"",name:"isCanceling",required:!1,type:{name:"boolean"}},isSaving:{defaultValue:{value:"false"},description:"",name:"isSaving",required:!1,type:{name:"boolean"}},isError:{defaultValue:{value:"false"},description:"",name:"isError",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:""},description:"",name:"error",required:!1,type:{name:"string"}},clearError:{defaultValue:{value:"() => {}"},description:"",name:"clearError",required:!1,type:{name:"() => void"}},autoCloseAlertError:{defaultValue:{value:"15000"},description:"",name:"autoCloseAlertError",required:!1,type:{name:"number"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},withBorder:{defaultValue:{value:"true"},description:"",name:"withBorder",required:!1,type:{name:"boolean"}},radius:{defaultValue:null,description:"",name:"radius",required:!1,type:{name:"MantineNumberSize"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(entityToSave: any) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onBeforeSave:{defaultValue:null,description:"",name:"onBeforeSave",required:!1,type:{name:"(entityToSave: T) => void"}},onAfterSave:{defaultValue:null,description:"",name:"onAfterSave",required:!1,type:{name:"(savedEntity: T) => void"}},onBeforeCancel:{defaultValue:null,description:"",name:"onBeforeCancel",required:!1,type:{name:"() => void"}},onAfterCancel:{defaultValue:null,description:"",name:"onAfterCancel",required:!1,type:{name:"() => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(error: string) => void"}}}}}catch{}const ue=()=>{const p=H(),d=ee(te.Pessoa),{dataSource:b}=Z({name:"dsPessoas",service:d,pageSize:10,loadOnStart:!0,currentPage:0,onLoadComplete:i=>{},onDestroy:i=>{},onError:(i,c)=>{ne.showError(m("WARNING"),i,c)}});V({dataSource:b,listener:i=>{}});const{dataSource:a}=Q({initialData:me,name:"dsPessoas"});return a!=null&&a.isBrowsing()&&!(a!=null&&a.isEmpty())&&a.edit(),V({dataSource:a,listener:i=>{switch(i.type){case N.fieldChanged:{p();break}}}}),e("div",{style:{width:"100%",height:"calc(100vh - 50px)"},children:e(g,{dataSource:a,title:"Edição",isError:!0,error:"Testando erro"})})},me=[ie[0]],$e={title:"Modelos/Form template",component:g},y={name:"Exemplo simples",render:()=>e(ue,{})};var D,R,P;y.parameters={...y.parameters,docs:{...(D=y.parameters)==null?void 0:D.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseFormTemplateExample />
}`,...(P=(R=y.parameters)==null?void 0:R.docs)==null?void 0:P.source}}};export{y as Primary,$e as default};
//# sourceMappingURL=ArchbaseFormTemplate.story-b0818665.js.map
