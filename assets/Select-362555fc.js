import{j as c,a as R,F as ve}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{u as we}from"./use-resolved-styles-api-24bd5fc4.js";import{f as ye,u as Ce}from"./polymorphic-factory-8fbd487e.js";import{g as De,a as xe,O as Ie}from"./OptionsDropdown-970961e6.js";import{C as i,u as Oe}from"./Combobox-c32fc2c7.js";import{I as L}from"./InputBase-6a6c9da1.js";import{u as Pe}from"./use-id-3df0f1f4.js";import{u as z}from"./use-uncontrolled-f56237fb.js";function Ve(p){const f=u.useRef();return u.useEffect(()=>{f.current=p},[p]),f.current}const Ee={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},U=ye((p,f)=>{const _=Ce("Select",Ee,p),{classNames:W,styles:$,unstyled:m,vars:Fe,dropdownOpened:q,defaultDropdownOpened:G,onDropdownClose:w,onDropdownOpen:y,onFocus:C,onBlur:D,onClick:x,onChange:J,data:k,value:h,defaultValue:K,selectFirstOptionOnChange:I,onOptionSubmit:O,comboboxProps:Q,readOnly:b,disabled:g,filter:X,limit:Y,withScrollArea:Z,maxDropdownHeight:ee,size:S,searchable:a,rightSection:oe,checkIconPosition:te,withCheckIcon:se,nothingFoundMessage:N,name:le,form:ae,searchValue:ne,defaultSearchValue:re,onSearchChange:ce,allowDeselect:ie,error:B,rightSectionPointerEvents:ue,id:de,clearable:pe,clearButtonProps:fe,hiddenInputProps:me,renderOption:he,onClear:P,autoComplete:be,scrollAreaProps:ge,...v}=_,V=u.useMemo(()=>De(k),[k]),d=u.useMemo(()=>xe(V),[V]),j=Pe(de),[s,A,Se]=z({value:h,defaultValue:K,finalValue:null,onChange:J}),o=typeof s=="string"?d[s]:void 0,n=Ve(o),[E,r]=z({value:ne,defaultValue:re,finalValue:o?o.label:"",onChange:ce}),t=Oe({opened:q,defaultOpened:G,onDropdownOpen:()=>{y==null||y(),t.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{w==null||w(),t.resetSelectedOption()}}),{resolvedClassNames:M,resolvedStyles:T}=we({props:_,styles:$,classNames:W});u.useEffect(()=>{I&&t.selectFirstOption()},[I,s]),u.useEffect(()=>{h===null&&r(""),typeof h=="string"&&o&&((n==null?void 0:n.value)!==o.value||(n==null?void 0:n.label)!==o.label)&&r(o.label)},[h,o]);const H=pe&&!!s&&!g&&!b&&c(i.ClearButton,{size:S,...fe,onClear:()=>{A(null,null),r(""),P==null||P()}});return R(ve,{children:[R(i,{store:t,__staticSelector:"Select",classNames:M,styles:T,unstyled:m,readOnly:b,onOptionSubmit:e=>{O==null||O(e);const l=ie&&d[e].value===s?null:d[e],F=l?l.value:null;F!==s&&A(F,l),!Se&&r(typeof F=="string"&&(l==null?void 0:l.label)||""),t.closeDropdown()},size:S,...Q,children:[c(i.Target,{targetType:a?"input":"button",autoComplete:be,children:c(L,{id:j,ref:f,rightSection:oe||H||c(i.Chevron,{size:S,error:B,unstyled:m}),rightSectionPointerEvents:ue||(H?"all":"none"),...v,size:S,__staticSelector:"Select",disabled:g,readOnly:b||!a,value:E,onChange:e=>{r(e.currentTarget.value),t.openDropdown(),I&&t.selectFirstOption()},onFocus:e=>{a&&t.openDropdown(),C==null||C(e)},onBlur:e=>{var l;a&&t.closeDropdown(),r(s!=null&&((l=d[s])==null?void 0:l.label)||""),D==null||D(e)},onClick:e=>{a?t.openDropdown():t.toggleDropdown(),x==null||x(e)},classNames:M,styles:T,unstyled:m,pointer:!a,error:B})}),c(Ie,{data:V,hidden:b||g,filter:X,search:E,limit:Y,hiddenWhenEmpty:!N,withScrollArea:Z,maxDropdownHeight:ee,filterOptions:a&&(o==null?void 0:o.label)!==E,value:s,checkIconPosition:te,withCheckIcon:se,nothingFoundMessage:N,unstyled:m,labelId:v.label?`${j}-label`:void 0,"aria-label":v.label?void 0:v["aria-label"],renderOption:he,scrollAreaProps:ge})]}),c(i.HiddenInput,{value:s,name:le,form:ae,disabled:g,...me})]})});U.classes={...L.classes,...i.classes};U.displayName="@mantine/core/Select";export{U as S};
