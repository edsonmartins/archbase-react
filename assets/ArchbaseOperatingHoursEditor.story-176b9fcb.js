import{a as l,j as e}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{M as U}from"./MultiSelect-186319c7.js";import{G as f}from"./Group-fc8e50aa.js";import{T as x}from"./TimeInput-3ccb4055.js";import{I as O}from"./IconClock-04b0092d.js";import{B as _}from"./Button-9ac647f1.js";import{B as j}from"./polymorphic-factory-0a97ecf2.js";import{T as S}from"./Text-55a07f1f.js";import{A as k}from"./ActionIcon-d7af2901.js";import{I as V}from"./IconTrash-6b16e91d.js";import{G as v}from"./Grid-978f86f2.js";import{C as g}from"./Card-e2fc5d87.js";import{S as C}from"./ScrollArea-1eb5607c.js";import{S as z}from"./Space-934b0343.js";import{T as $}from"./Textarea-ffc5c371.js";import"./_commonjsHelpers-de833af9.js";import"./use-resolved-styles-api-40413a9b.js";import"./OptionsDropdown-6c4a5a37.js";import"./CheckIcon-d1d232e8.js";import"./Combobox-3edfc0d6.js";import"./Popover-89b1395a.js";import"./OptionalPortal-1a980b57.js";import"./index-a38d0dca.js";import"./use-isomorphic-effect-aa890e3d.js";import"./use-merged-ref-a374cf59.js";import"./DirectionProvider-1e219af7.js";import"./use-floating-auto-update-dfbac4fe.js";import"./use-did-update-bccd292e.js";import"./create-safe-context-941c9e18.js";import"./noop-1bad6ac0.js";import"./FocusTrap-3973e7dc.js";import"./Transition-d10e6f22.js";import"./use-reduced-motion-73d958ef.js";import"./use-media-query-91643880.js";import"./use-uncontrolled-f56237fb.js";import"./use-id-f896cdc5.js";import"./CloseButton-4d8718b4.js";import"./UnstyledButton-b043fbb8.js";import"./Input-fd05546d.js";import"./create-optional-context-86e78b6c.js";import"./InputBase-e43416e6.js";import"./use-input-props-31cfb1c2.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./Loader-f7f9dcb9.js";import"./Mantine.context-e727d900.js";import"./get-sorted-breakpoints-e9679440.js";import"./px-90b8b31c.js";import"./Paper-97ef7d63.js";import"./extends-4c19d496.js";import"./objectWithoutPropertiesLoose-68193569.js";const q={1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY",7:"SUNDAY"};function R(r){return r?r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0"):""}const G=r=>!r||r===""?[]:r.split(";").map(o=>{const[d,n]=o.split("|");return{days:d.split(",").filter(D=>D),timeRange:n}}),P=[{value:"1",label:"Segunda-feira"},{value:"2",label:"Terça-feira"},{value:"3",label:"Quarta-feira"},{value:"4",label:"Quinta-feira"},{value:"5",label:"Sexta-feira"},{value:"6",label:"Sábado"},{value:"7",label:"Domingo"}],Q=[{value:"MONDAY",label:"Seg"},{value:"TUESDAY",label:"Ter"},{value:"WEDNESDAY",label:"Qua"},{value:"THURSDAY",label:"Qui"},{value:"FRIDAY",label:"Sex"},{value:"SATURDAY",label:"Sáb"},{value:"SUNDAY",label:"Dom"}],W=r=>Array.isArray(r)?r.map(o=>`${o.days.map(n=>n).join(",")}|${o.timeRange}`).join(";"):"";function y({label:r,initialValue:o,onChange:d,readOnly:n=!1,error:D}){const[h,H]=u.useState([]),[a,T]=u.useState({start:null,end:null}),[c,A]=u.useState([]);u.useEffect(()=>{o&&A(G(o))},[o]),u.useEffect(()=>{d(W(c))},[c,d]);const E=(t,s)=>{const[i,m]=t.split(":").map(Number),p=new Date((s?a.start:a.end)||new Date);p.setHours(i,m),T(B=>({...B,[s?"start":"end"]:new Date(p)}))},w=t=>{if(!t)return"";const s=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${s}:${i}`},N=()=>{if(h.length>0&&a&&a.start&&a.end){const t=h.map(p=>q[p]),s=R(a.start),i=R(a.end),m={days:t,timeRange:`${s}-${i}`};A([...c,m]),H([]),T({start:null,end:null})}};return l("div",{children:[r&&e("div",{children:e("strong",{children:r})}),e(U,{data:P,value:h,onChange:H,placeholder:"Selecione os dias",label:"Dias da semana",clearable:!0,disabled:n}),l(f,{grow:!0,children:[e(x,{disabled:n,value:w(a.start),placeholder:"HH:MM",label:"Hora de Início",onChange:t=>E(t.currentTarget.value,!0),rightSection:e(O,{size:"1rem",stroke:1.5})}),e(x,{disabled:n,value:w(a.end),onChange:t=>E(t.currentTarget.value,!1),rightSection:e(O,{size:"1rem",stroke:1.5}),placeholder:"HH:MM",label:"Hora de Término"})]}),e(_,{onClick:N,disabled:!h.length||!a.start||!a.end||n,children:"Adicionar"}),c.map((t,s)=>e(j,{mt:2,children:l(f,{justify:"space-between",children:[l(f,{wrap:"nowrap",children:[e(S,{fw:700,size:"12px",children:t.days.map(i=>{var m;return((m=Q.find(p=>p.value===i))==null?void 0:m.label)||"Dia desconhecido"}).join(",")}),e(S,{size:"12px",fw:700,color:"blue",children:t.timeRange})]}),e(k,{color:"red",disabled:n,onClick:()=>{const i=[...c];i.splice(s,1),A(i)},children:e(V,{size:"1.2rem",color:"red"})})]})},s))]})}try{y.displayName="ArchbaseOperatingHoursEditor",y.__docgenInfo={description:"",displayName:"ArchbaseOperatingHoursEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: any) => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},initialValue:{defaultValue:null,description:"",name:"initialValue",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"any"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const F=()=>{const[r,o]=u.useState("último dia");return l(v,{children:[e(v.Col,{offset:1,span:5,children:l(g,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(g.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(f,{justify:"space-between",children:e(S,{fw:500,children:"Operating Hours Editor Component"})})}),e(j,{style:{height:500},children:e(C,{h:500,p:20,children:e(y,{initialValue:"",onChange:d=>{o(d)}})})})]})}),e(v.Col,{offset:1,span:4,children:l(g,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(g.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(f,{justify:"space-between",children:e(S,{fw:500,children:"Resultado"})})}),l(C,{h:300,children:[e(z,{h:20}),e($,{minRows:12,value:r,autosize:!0})]})]})})]})},We={title:"Editores/OperatingHoursEditor",component:y},b={name:"Exemplo simples",render:()=>e(F,{})};var Y,M,I;b.parameters={...b.parameters,docs:{...(Y=b.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseOperatingHoursEditorExample />
}`,...(I=(M=b.parameters)==null?void 0:M.docs)==null?void 0:I.source}}};export{b as Primary,We as default};
