import{a as S,j as i}from"./jsx-runtime-2ca98591.js";import{r as t}from"./index-402471b7.js";globalThis&&globalThis.__awaiter;function J(m,d,a,r){const h=t.useRef(d);X(()=>{h.current=d},[d]),t.useEffect(()=>{var s;const l=(s=a==null?void 0:a.current)!==null&&s!==void 0?s:window;if(!(l&&l.addEventListener))return;const _=y=>h.current(y);return l.addEventListener(m,_,r),()=>{l.removeEventListener(m,_,r)}},[m,a,r])}globalThis&&globalThis.__awaiter;const X=typeof window<"u"?t.useLayoutEffect:t.useEffect;function U(){const[m,d]=t.useState({width:0,height:0}),a=()=>{d({width:window.innerWidth,height:window.innerHeight})};return J("resize",a),X(()=>{a()},[]),m}const K=m=>{const{favicon:d,title:a,activeTab:r,position:h,contentWidth:s,onClick:l,onClose:_,setDragging:y,tabsContentWidth:v,animateTabMove:c,isDragging:p,index:C,sorting:k,showButtonClose:T}=m,[W,V]=t.useState(0),[N,x]=t.useState(!1),[I,w]=t.useState(null),[A,D]=t.useState(null),[L,M]=t.useState(!1),[q,O]=t.useState(0),R=t.useRef(null),E=9,B=84,z=60,H=48;t.useEffect(()=>(document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",e),document.addEventListener("mouseup",n)})),t.useEffect(()=>{N||setTimeout(()=>x(!0),500)},[N]),t.useEffect(()=>{V(s+2*E)},[s]);const P=u=>{u.button===0&&(y(!0),D(u.pageX),M(!1),O(h))},e=u=>{if(A!=null&&p){let g=q-E+(u.pageX-A);g<0&&(g=0),g>v-W&&(g=v-W),w(g),!k&&c(g)}},n=u=>{A!=null&&p&&(D(null),w(null),y(!1),M(!0))},[b,f]=t.useState(h-E);return t.useEffect(()=>{f(h?h-E:0)},[C,h]),S("div",{className:`archbase_tab ${N?"":" archbase_tab-was-just-added"}${A==null&&!r?" archbase_tab-was-just-dragged":""}`,style:{transform:`translate3d(${I??b}px, 0, 0)`,width:`${W}px`},"tab-active":r!==!1?"":null,"is-small":s<B?"":null,"is-smaller":s<z?"":null,"is-mini":s<H?"":null,ref:R,children:[i("div",{className:"archbase_tab-dividers"}),i("div",{className:"archbase_tab-background",children:S("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[S("defs",{children:[i("symbol",{id:"archbase_tab-geometry-left",viewBox:"0 0 214 36",children:i("path",{d:"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"})}),i("symbol",{id:"archbase_tab-geometry-right",viewBox:"0 0 214 36",children:i("use",{xlinkHref:"#archbase_tab-geometry-left"})}),i("clipPath",{id:"crop",children:i("rect",{className:"mask",width:"100%",height:"100%",x:"0"})})]}),i("svg",{width:"52%",height:"100%",children:i("use",{xlinkHref:"#archbase_tab-geometry-left",width:"214",height:"36",className:"archbase_tab-geometry"})}),i("g",{transform:"scale(-1, 1)",children:i("svg",{width:"52%",height:"100%",x:"-100%",y:"0",children:i("use",{xlinkHref:"#archbase_tab-geometry-right",width:"214",height:"36",className:"archbase_tab-geometry"})})})]})}),S("div",{className:"archbase_tab-content",children:[!!d&&i("div",{className:"archbase_tab-favicon",style:{backgroundImage:`url(${d})`}}),i("div",{className:"archbase_tab-title",children:a}),i("div",{className:"archbase_tab-drag-handle",title:a,onClick:l,onPointerDown:u=>l(u),onMouseUp:n,onMouseMove:e,onMouseDown:P}),T?i("div",{className:"archbase_tab-close",onClick:_}):null]})]})},F=m=>{const{currentTabs:d,onTabChange:a,activeTab:r,onTabClose:h,className:s,style:l,dark:_,onClick:y,buttonCloseOnlyActiveTab:v=!1}=m,[c,p]=t.useState([]),[C,k]=t.useState([]),[T,W]=t.useState(d||[]),[V,N]=t.useState(!1),[x,I]=t.useState(!1),w=t.useRef(null),{width:A,height:D}=U(),L=9,M=1,q=24,O=240;t.useEffect(()=>{p(E()),k(B(E()))},[]),t.useEffect(()=>{R()},[JSON.stringify(T),A,D]),t.useEffect(()=>{d&&W(d)},[JSON.stringify(d)]);const R=()=>{const e=E();e&&(p(e),k(B(e)))},E=()=>{const e=[];if(w.current){const n=T.length,b=w.current.clientWidth,f=(n-1)*M,u=(b-2*L+f)/n,g=Math.max(q,Math.min(O,u)),o=Math.floor(g),Z=o*n+2*L-f;let $=b-Z;for(let j=0;j<n;j+=1){const G=o<O&&$>0?1:0;e.push(o+G),$>0&&($-=1)}}return e},B=e=>{const n=[],b=e||c;let f=L;return b.forEach((u,g)=>{const o=g*M;n.push(f-o),f+=u}),n},z=(e,n)=>{N(!0);let b=1/0,f=-1,u=[];C.forEach((g,o)=>{Math.abs(e-g)<b&&(b=Math.abs(e-g),f=o)}),f=Math.max(0,Math.min(C.length,f)),n!=f&&(C.forEach((g,o)=>{o==n?u[o]=T[f>n?o+1:o-1]:n>o&&o>=f?u[o]=T[o+1]:n<o&&o<=f?u[o]=T[o-1]:u[o]=T[o]}),H(u)&&a(u)),N(!1)},H=e=>new Set(e).size===e.length,P=e=>{h?h(e):a(T.filter((n,b)=>b!=e))};return S("div",{className:s,style:l,children:[S("div",{className:`archbase_tabs${_?" archbase_tabs-dark-theme":""}${x?"":" archbase_tabs-is-sorting"}`,children:[i("div",{className:"archbase_tabs_content",ref:w,children:!!T&&T.map((e,n)=>!!C[n]&&i(K,{favicon:e.favicon,title:e.title,activeTab:r===e.key,position:C[n],contentWidth:c[n],onClick:b=>y(e.key),onClose:b=>P(e.key),setDragging:I,showButtonClose:v?r===e.key:!0,tabsContentWidth:w.current&&w.current.clientWidth,animateTabMove:b=>z(b,n),isDragging:x,id:e.key,index:n,sorting:V},e.key))}),i("div",{className:"archbase_tabs-bottom-bar"})]}),i("div",{className:"archbase_tabs-optional-shadow-below-bottom-bar"})]})};try{F.displayName="ArchbaseAdvancedTabs",F.__docgenInfo={description:"",displayName:"ArchbaseAdvancedTabs",props:{currentTabs:{defaultValue:null,description:"",name:"currentTabs",required:!0,type:{name:"ArchbaseAdvancedTabItem[]"}},buttonCloseOnlyActiveTab:{defaultValue:null,description:"",name:"buttonCloseOnlyActiveTab",required:!0,type:{name:"boolean"}},activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"any"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!0,type:{name:"Function"}},onTabClose:{defaultValue:null,description:"",name:"onTabClose",required:!0,type:{name:"Function"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},dark:{defaultValue:null,description:"",name:"dark",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"Function"}}}}}catch{}export{F as A,X as a,J as u};
//# sourceMappingURL=ArchbaseAdvancedTabs-2e888216.js.map
