import{j as e,a as d}from"./jsx-runtime-c9381026.js";import{r as w}from"./index-8b3efc3f.js";import{I as Z}from"./Input-77c95749.js";import{B as H}from"./polymorphic-factory-8fbd487e.js";import{P as L}from"./Paper-c978ba1b.js";import{T as z}from"./TextInput-1c7cbb5e.js";import{S as ee}from"./Select-0752e593.js";import{T as k}from"./Tooltip-3e861958.js";import{A as I}from"./ActionIcon-3fa09022.js";import{I as T}from"./IconTrash-6b16e91d.js";import{B as re}from"./Button-b17c03b7.js";import{I as te}from"./IconPlus-ae63da25.js";import{G as S}from"./Group-085e5d86.js";import{S as ae}from"./Stack-a757551d.js";import{G as E}from"./Grid-7c641e6e.js";import{C as y}from"./Card-2d38024c.js";import{T as K}from"./Text-abd6ac62.js";import{S as _}from"./ScrollArea-b66a138f.js";import{S as ie}from"./Space-103726a6.js";import{T as oe}from"./Textarea-6dee5c95.js";import"./_commonjsHelpers-de833af9.js";import"./create-optional-context-86e78b6c.js";import"./use-id-3df0f1f4.js";import"./use-isomorphic-effect-aa890e3d.js";import"./Mantine.context-1df84d45.js";import"./InputBase-6a6c9da1.js";import"./use-input-props-0d35260a.js";import"./use-resolved-styles-api-24bd5fc4.js";import"./OptionsDropdown-c0c2ba0c.js";import"./CheckIcon-faa2ad1e.js";import"./Combobox-c32fc2c7.js";import"./Popover-63a94b28.js";import"./OptionalPortal-9514e460.js";import"./index-a38d0dca.js";import"./use-merged-ref-add91123.js";import"./DirectionProvider-1e219af7.js";import"./use-floating-auto-update-3ec0cee2.js";import"./use-did-update-bccd292e.js";import"./create-safe-context-941c9e18.js";import"./FocusTrap-446c8eb6.js";import"./Transition-1b2bc7c1.js";import"./use-reduced-motion-98306cff.js";import"./use-media-query-78751440.js";import"./use-uncontrolled-f56237fb.js";import"./CloseButton-55dafc48.js";import"./UnstyledButton-a7b3e9d9.js";import"./get-style-object-71cabcb5.js";import"./Loader-279e7115.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./get-sorted-breakpoints-91e0685a.js";import"./px-90b8b31c.js";import"./extends-4c19d496.js";import"./objectWithoutPropertiesLoose-68193569.js";function P({initialValue:m,keyLabel:l="Chave",valueLabel:i,valueOptions:c=[],onChangeKeyValue:C,pairSeparator:h=";",keyValueSeparator:f=",",useBraces:v=!1,readOnly:p=!1,label:O,error:W,tooltipAdd:D="Adicionar chave",tooltipRemove:F="Remover chave",layout:n="horizontal",spacing:M="xs"}){const A=r=>r?r.split(h).map(a=>{const[t,o]=a.split(f);return{key:v?t.replace(/[{}]/g,""):t,value:o}}):[],[s,u]=w.useState(A(m));w.useEffect(()=>{const r=A(m);JSON.stringify(r)!==JSON.stringify(s)&&u(r)},[m,h,f,v]),w.useEffect(()=>{if(C){const a=s.filter(t=>t.key&&t.value).map(t=>`${v?`{${t.key}}`:t.key}${f}${t.value}`).join(h);a!==m&&C(a)}},[s,C,v,h,f,m]);const Q=()=>{const r=[...s,{key:"",value:""}];u(r)},b=r=>{const a=s.filter((t,o)=>o!==r);u(a)},U=(r,a)=>{const t=s.map((o,q)=>q===r?{...o,key:a}:o);u(t)},x=(r,a)=>{const t=s.map((o,q)=>q===r?{...o,value:a}:o);u(t)},X=s.some(r=>!r.key||!r.value),Y=n==="horizontal"?S:ae;return e(Z.Wrapper,{label:O,error:W,children:d(H,{children:[s.map((r,a)=>e(L,{withBorder:!0,shadow:"md",p:"sm",mb:"sm",children:d(Y,{align:"center",wrap:n==="horizontal"?"nowrap":"wrap",gap:M,children:[e(z,{placeholder:l,value:r.key,label:l||(i&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>U(a,t.target.value),readOnly:p}),c.length>0?e(ee,{data:c,value:r.value,label:i||(l&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>x(a,t),placeholder:i,disabled:p}):e(z,{placeholder:i,value:r.value,label:i||(l&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>x(a,t.target.value),readOnly:p}),!p&&e(k,{label:F,withinPortal:!0,children:n==="horizontal"?e(I,{style:{marginTop:l||i?25:0},color:"red",variant:"filled",onClick:()=>b(a),children:e(T,{})}):d(re,{style:{marginTop:"0px"},color:"red",variant:"filled",onClick:()=>b(a),children:[e(T,{}),"Remover"]})})]})},a)),!p&&e(k,{label:D,withinPortal:!0,children:e(I,{onClick:Q,color:"green",variant:"filled",disabled:X,children:e(te,{})})})]})})}try{P.displayName="ArchbaseKeyValueEditor",P.__docgenInfo={description:"",displayName:"ArchbaseKeyValueEditor",props:{initialValue:{defaultValue:null,description:"",name:"initialValue",required:!0,type:{name:"string"}},keyLabel:{defaultValue:{value:"Chave"},description:"",name:"keyLabel",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"",name:"valueLabel",required:!1,type:{name:"string"}},valueOptions:{defaultValue:{value:"[]"},description:"",name:"valueOptions",required:!1,type:{name:"{ value: string; label: string; }[]"}},onChangeKeyValue:{defaultValue:null,description:"",name:"onChangeKeyValue",required:!0,type:{name:"(value: string) => void"}},pairSeparator:{defaultValue:{value:";"},description:"",name:"pairSeparator",required:!1,type:{name:"string"}},keyValueSeparator:{defaultValue:{value:","},description:"",name:"keyValueSeparator",required:!1,type:{name:"string"}},useBraces:{defaultValue:{value:"false"},description:"",name:"useBraces",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},tooltipAdd:{defaultValue:{value:"Adicionar chave"},description:"",name:"tooltipAdd",required:!1,type:{name:"string"}},tooltipRemove:{defaultValue:{value:"Remover chave"},description:"",name:"tooltipRemove",required:!1,type:{name:"string"}},layout:{defaultValue:{value:"horizontal"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},spacing:{defaultValue:{value:"xs"},description:"",name:"spacing",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}}}}}catch{}const J=m=>{const[l,i]=w.useState("");return d(E,{children:[e(E.Col,{offset:1,span:4,children:d(y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(y.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(S,{justify:"space-between",children:e(K,{fw:500,children:"Key Value Editor Component"})})}),e(H,{style:{height:500},children:e(_,{h:500,p:20,children:e(P,{initialValue:l,layout:m.layout,onChangeKeyValue:c=>{i(c)}})})})]})}),e(E.Col,{offset:1,span:4,children:d(y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(y.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(S,{justify:"space-between",children:e(K,{fw:500,children:"Resultado"})})}),d(_,{h:300,children:[e(ie,{h:20}),e(oe,{minRows:12,value:l,autosize:!0})]})]})})]})},lr={title:"Editores/KeyValueEditor",component:P},g={name:"Horizontal",render:()=>e(J,{})},V={name:"Vertical",render:()=>e(J,{layout:"vertical"})};var B,R,j;g.parameters={...g.parameters,docs:{...(B=g.parameters)==null?void 0:B.docs,source:{originalSource:`{
  name: 'Horizontal',
  render: () => <ArchbaseKeyValueEditorExample />
}`,...(j=(R=g.parameters)==null?void 0:R.docs)==null?void 0:j.source}}};var G,N,$;V.parameters={...V.parameters,docs:{...(G=V.parameters)==null?void 0:G.docs,source:{originalSource:`{
  name: 'Vertical',
  render: () => <ArchbaseKeyValueEditorExample layout={'vertical'} />
}`,...($=(N=V.parameters)==null?void 0:N.docs)==null?void 0:$.source}}};export{lr as default,g as horizontal,V as vertical};
