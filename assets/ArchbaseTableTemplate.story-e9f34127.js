import{j as c,a as q}from"./jsx-runtime-29545a09.js";import{A as we,T as Ve,C as Ee,a as R,b as Ae}from"./ArchbaseDataTable-d5cb207c.js";import{t as x}from"./i18next-a4b2730f.js";import{B as xe}from"./polymorphic-factory-e212381f.js";import{B as Pe}from"./Badge-c47ffe27.js";import{u as Re}from"./useArchbaseRemoteServiceApi-05255476.js";import{A as Ne}from"./DemoIOCTypes-d657846a.js";import{u as qe,a as De}from"./useArchbaseDataSource-0bdc03a6.js";import{u as ke}from"./useArchbaseRemoteDataSource-644521a9.js";import{I as Ie,A as Ce,u as _e}from"./useArchbaseLocalFilterDataSource-05f7a2ec.js";import{u as K,D as Oe}from"./useArchbaseDataSourceListener-cbed610e.js";import{c as Qe}from"./index-f8cd36ee.js";import{r as g}from"./index-76fb7be0.js";import{P as B}from"./types-5decf4ed.js";import"./index-1076ae77.js";import{u as $e}from"./useArchbaseTheme-69c231ab.js";/* empty css                 */import"./ArchbaseGlobalFilter-0cc0fe9e.js";import{f as z}from"./index-3a76515f.js";import{b as m,e as Be}from"./index-f91c0534.js";import{u as Me}from"./use-mantine-color-scheme-940af2ab.js";import{P as Le}from"./Paper-9304c07a.js";import{A as je}from"./ArchbaseAlert-d4f20d19.js";import{I as Ue}from"./IconBug-81bb8ee5.js";import{F as Ge}from"./Flex-472ba316.js";import{B as I}from"./Button-45c30308.js";import{I as We,a as Ke}from"./IconEye-edd4e1bc.js";import{I as ze}from"./IconTrash-7ea9d6f5.js";import{u as Je}from"./ArchbaseAppContext-a2fe1edf.js";import{G as J}from"./Grid-72b79d89.js";import{p as Ye}from"./pessoasData-6b8000da.js";import{A as He}from"./ArchbaseNotifications-c6fc9152.js";import"./_commonjsHelpers-de833af9.js";import"./iframe-dfb42508.js";import"../sb-preview/runtime.js";import"./index-83127612.js";import"./index-d3ea75b5.js";import"./DirectionProvider-3f93a9e9.js";import"./create-safe-context-978e3819.js";import"./Text-052cbebe.js";import"./Menu-7b6c8f09.js";import"./create-scoped-keydown-handler-870d0701.js";import"./use-resolved-styles-api-777d9903.js";import"./Popover-b9d763ca.js";import"./OptionalPortal-d3ff2b4f.js";import"./use-isomorphic-effect-f46ba680.js";import"./use-merged-ref-962e80ee.js";import"./use-floating-auto-update-8b56efba.js";import"./use-did-update-4c7f685e.js";import"./FocusTrap-0274480a.js";import"./use-id-9525279e.js";import"./Transition-7fd90e94.js";import"./use-reduced-motion-94535b68.js";import"./use-media-query-404d9c84.js";import"./use-uncontrolled-625105b4.js";import"./UnstyledButton-6bceb5b8.js";import"./Tooltip-6d7d1342.js";import"./get-style-object-71cabcb5.js";import"./createReactComponent-1d99d95b.js";import"./index-9d475cdf.js";import"./IconChevronDown-4d1cc0d3.js";import"./IconChevronLeft-b0da9255.js";import"./IconChevronRight-0c81e76f.js";import"./IconDeviceFloppy-9fc3d121.js";import"./IconDots-ca335064.js";import"./DatePickerInput-6717551f.js";import"./Combobox-acbe011d.js";import"./CloseButton-c44b8f52.js";import"./Input-abb5d566.js";import"./create-optional-context-e52a7171.js";import"./CheckIcon-a0984784.js";import"./ScrollArea-d1e51cef.js";import"./InputBase-b1a2e9dc.js";import"./use-input-props-0bcecfab.js";import"./dayjs.min-5b59225a.js";import"./pick-calendar-levels-props-f0764343.js";import"./DatesProvider-a090e979.js";import"./AccordionChevron-793bd026.js";import"./clamp-73f6bef2.js";import"./IconSearch-ce888152.js";import"./IconX-8ec7c03b.js";import"./TextInput-256f3fb5.js";import"./Accordion-ee2e152a.js";import"./LoadingOverlay-daa9890b.js";import"./Loader-2934e180.js";import"./Switch-92f91d78.js";import"./InputsGroupFieldset-9dec31e3.js";import"./ActionIcon-23bc393d.js";import"./Radio-784af244.js";import"./get-contrast-color-fbb785ba.js";import"./get-auto-contrast-value-58024fc4.js";import"./Checkbox-14e2beba.js";import"./Alert-1c6f8f93.js";import"./Stack-1cc1addd.js";import"./Progress-a1f20a41.js";import"./Group-ec80c87c.js";import"./use-debounced-value-a20d2599.js";import"./use-move-c51145d0.js";import"./useTranslation-fe369d1e.js";import"./context-f933efc0.js";import"./Chip-f9127cca.js";import"./IconRefresh-cf6950e7.js";import"./string-utils-e92dc4e1.js";import"./index-44ceb156.js";import"./setPrototypeOf-8d862a7d.js";import"./isNativeReflectConstruct-05c29d01.js";import"./createClass-a6cbb842.js";import"./Mantine.context-0732ca39.js";import"./ArchbaseRemoteApiService-ede5188b.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./___vite-browser-external_commonjs-proxy-698e55bb.js";import"./lodash-4d0be66a.js";import"./index-2e8af730.js";import"./ArchbaseList-04d26823.js";import"./Image-d9c2381a.js";import"./Space-3f7303e6.js";import"./ArchbaseDateTimePickerRange-407702bc.js";import"./input-e9af23f3.js";import"./IconCalendar-e52f70c7.js";import"./ArchbaseSwitch-541da842.js";import"./use-force-update-df6d2b99.js";import"./ArchbaseSelect-9918c2e5.js";import"./ArchbaseAsyncSelect-5db62bb5.js";import"./ArchbaseSelectItem-d056b8eb.js";import"./ArchbaseEdit-8e23860f.js";import"./v4-4a60fe23.js";import"./use-local-storage-21e66413.js";import"./get-sorted-breakpoints-91e0685a.js";import"./px-90b8b31c.js";import"./notifications.store-cc6c29fc.js";import"./store-8002eacc.js";function Xe(t){const n=[];if(t.filter.rules){const o=ie(t.filter.condition,t.filter.rules);return t.sort&&t.sort.sortFields&&t.sort.sortFields.forEach(r=>{r.selected&&n.push(r.name+":"+r.asc_desc)}),{expressionNode:o,sortStrings:n}}return null}function ie(t,n){let o=m.and;t==="or"&&(o=m.or);const r=[];return n.forEach(a=>{if(a.field&&!a.disabled){let e=a.value,i=a.value2;e&&e!==""&&(typeof e=="number"||e instanceof Date)&&(a.dataType==="date"||a.dataType==="date_time")&&(e=Y(a,e)),i&&i!==""&&(typeof i=="number"||i instanceof Date)&&(a.dataType==="date"||a.dataType==="date_time")&&(i=Y(a,i)),a.operator==="null"?r.push(m.eq(a.field,"null")):a.operator==="notNull"?r.push(m.neq(a.field,"null")):a.operator==="contains"&&e&&e!==""?r.push(m.eq(a.field,`^*${e}*`)):a.operator==="startsWith"&&e&&e!==""?r.push(m.eq(a.field,`^${e}*`)):a.operator==="endsWith"&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.eq(a.field,`^*${e}`)):a.operator==="="&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.eq(a.field,e)):a.operator==="!="&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.neq(a.field,e)):a.operator==="<"&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.lt(a.field,e)):a.operator===">"&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.gt(a.field,e)):a.operator==="<="&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.le(a.field,e)):a.operator===">="&&e&&e!==""&&(typeof e=="string"||typeof e=="number")?r.push(m.ge(a.field,e)):a.operator==="between"&&e&&e!==""&&i&&i!==""&&(typeof e=="string"||typeof e=="number")&&(typeof i=="string"||typeof i=="number")?r.push(m.bt(a.field,e,i)):a.operator==="notBetween"&&e&&e!==""&&i&&i!==""&&(typeof e=="string"||typeof e=="number")&&(typeof i=="string"||typeof i=="number")?r.push(m.nb(a.field,e,i)):a.operator==="inList"&&e&&e!==""&&Array.isArray(e)?r.push(m.in(a.field,e)):a.operator==="notInList"&&e&&e!==""&&Array.isArray(e)&&r.push(m.out(a.field,e))}a.rules&&!a.disabled&&r.push(ie(a.condition,a.rules))}),o(...r)}function Y(t,n){if(t.dataType==="date")return z(n,{representation:"date"});if(t.dataType==="date_time")return z(n,{representation:"complete"})}const Ze=Symbol(),le=Symbol(),N="a",_="w";let et=(t,n)=>new Proxy(t,n);const M=Object.getPrototypeOf,H=new WeakMap,tt=t=>t&&(H.has(t)?H.get(t):M(t)===Object.prototype||M(t)===Array.prototype),X=t=>typeof t=="object"&&t!==null,rt=t=>{if(Array.isArray(t))return Array.from(t);const n=Object.getOwnPropertyDescriptors(t);return Object.values(n).forEach(o=>{o.configurable=!0}),Object.create(M(t),n)},se=t=>t[le]||t,ue=(t,n,o,r)=>{if(!tt(t))return t;let a=r&&r.get(t);if(!a){const l=se(t);a=(s=>Object.values(Object.getOwnPropertyDescriptors(s)).some(d=>!d.configurable&&!d.writable))(l)?[l,rt(l)]:[l],r==null||r.set(t,a)}const[e,i]=a;let u=o&&o.get(e);return u&&u[1].f===!!i||(u=((l,s)=>{const d={f:s};let f=!1;const v=(y,b)=>{if(!f){let T=d[N].get(l);if(T||(T={},d[N].set(l,T)),y===_)T[_]=!0;else{let A=T[y];A||(A=new Set,T[y]=A),A.add(b)}}},P={get:(y,b)=>b===le?l:(v("k",b),ue(Reflect.get(y,b),d[N],d.c,d.t)),has:(y,b)=>b===Ze?(f=!0,d[N].delete(l),!0):(v("h",b),Reflect.has(y,b)),getOwnPropertyDescriptor:(y,b)=>(v("o",b),Reflect.getOwnPropertyDescriptor(y,b)),ownKeys:y=>(v(_),Reflect.ownKeys(y))};return s&&(P.set=P.deleteProperty=()=>!1),[P,d]})(e,!!i),u[1].p=et(i||e,u[0]),o&&o.set(e,u)),u[1][N]=n,u[1].c=o,u[1].t=r,u[1].p},L=(t,n,o,r,a=Object.is)=>{if(a(t,n))return!1;if(!X(t)||!X(n))return!0;const e=o.get(se(t));if(!e)return!0;if(r){const u=r.get(t);if(u&&u.n===n)return u.g;r.set(t,{n,g:!1})}let i=null;try{for(const u of e.h||[])if(i=Reflect.has(t,u)!==Reflect.has(n,u),i)return i;if(e[_]===!0){if(i=((u,l)=>{const s=Reflect.ownKeys(u),d=Reflect.ownKeys(l);return s.length!==d.length||s.some((f,v)=>f!==d[v])})(t,n),i)return i}else for(const u of e.o||[])if(i=!!Reflect.getOwnPropertyDescriptor(t,u)!=!!Reflect.getOwnPropertyDescriptor(n,u),i)return i;for(const u of e.k||[])if(i=L(t[u],n[u],o,r,a),i)return i;return i===null&&(i=!0),i}finally{r&&r.set(t,{n,g:i})}};const at=t=>()=>{const[,o]=g.useReducer(d=>d+1,0),r=new WeakMap,a=g.useRef(),e=g.useRef(),i=g.useRef();g.useEffect(()=>{a.current=r,e.current!==i.current&&L(e.current,i.current,r,new WeakMap)&&(e.current=i.current,o())});const u=g.useCallback(d=>(i.current=d,e.current&&e.current!==d&&a.current&&!L(e.current,d,a.current,new WeakMap)?e.current:(e.current=d,d)),[]),l=t(u),s=g.useMemo(()=>new WeakMap,[]);return ue(l,r,s)},nt=Qe((t,n)=>({values:new Map,setValue:(o,r)=>t(a=>{const e=new Map(a.values);return e.set(o,r),{values:e}}),getValue:o=>n().values.get(o),existsValue:o=>n().values.has(o),clearValue:o=>t(r=>{const a=new Map(r.values);return a.delete(o),{values:a}}),clearAllValues:()=>t(o=>({values:new Map})),reset:()=>t(o=>({values:new Map}))})),ot=at(nt),it=(t="default")=>{const n=ot();return{setValue:(s,d)=>{n.setValue(`${t}.${s}`,d)},getValue:s=>n.getValue(`${t}.${s}`),clearValue:s=>{n.clearValue(`${t}.${s}`)},existsValue:s=>n.existsValue(`${t}.${s}`),clearAllValues:()=>{for(const[s,d]of n.values.entries())s.startsWith(`${t}.`)&&n.clearValue(s)},reset:()=>{n.clearAllValues()},values:n.values}};function j({currentValue:t,values:n}){const o=n.findIndex(r=>r.value.toString()===t);return o!==-1?c(xe,{children:c(Pe,{color:n[o].color,children:x(n[o].label)})}):null}try{j.displayName="ArchbaseItemRender",j.__docgenInfo={description:"",displayName:"ArchbaseItemRender",props:{currentValue:{defaultValue:null,description:"",name:"currentValue",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"ArchbaseItemRenderType[]"}}}}}catch{}const lt=(t,n,o)=>{var r;if(!t||!n||!n.existsValue(`${t.viewName}_${t.componentName}`)){let a=-1,e;return o&&o.getFilters().length>0&&(a=0,e=JSON.parse((r=o.getFirstFilter())==null?void 0:r.filter)),{activeFilterIndex:a,expandedFilter:!1,currentFilter:e}}return n.getValue(`${t.viewName}_${t.componentName}`)};function O({title:t,printTitle:n,dataSource:o,filterOptions:r,pageSize:a,columns:e,filterFields:i,logoPrint:u,userActions:l,userRowActions:s,innerRef:d,isLoading:f=!1,isLoadingFilter:v=!1,isError:P=!1,enableTopToolbar:y=!0,error:b="",clearError:T=()=>{},filterType:A="normal",width:ce="100%",height:de="100%",onSearchByFilter:U,withBorder:G=!0,filterPersistenceDelegator:W,variant:V,store:F}){const E=Je(),pe=g.useRef();g.useRef(),$e(),Me();const[h,k]=g.useState({activeFilterIndex:-1,currentFilter:void 0,expandedFilter:!1});g.useEffect(()=>{const p=lt(r,F,W);k(p)},[v]);const me=({row:p})=>{if(!s&&!s.actions)return;const S=s.actions;return c(S,{onEditRow:s.onEditRow,onRemoveRow:s.onRemoveRow,onViewRow:s.onViewRow,row:p,variant:V??E.variant})},fe=(p,S)=>{const w={...h,currentFilter:p,activeFilterIndex:S};k(w),F&&r&&(F==null||F.setValue(`${r.viewName}_${r.componentName}`,w))},be=p=>{const S={...h,expandedFilter:p};k(S),F&&r&&(F==null||F.setValue(`${r.viewName}_${r.componentName}`,S))},he=(p,S)=>{const w={...h,currentFilter:p,activeFilterIndex:S};k(w),F&&r&&(F==null||F.setValue(`${r.viewName}_${r.componentName}`,w))},ye=()=>{if(h.currentFilter)if(U)U();else if(h.currentFilter.filter.filterType==="quick"){const p=o.getOptions();h.currentFilter.filter.quickFilterText&&h.currentFilter.filter.quickFilterText!==""?(p.filter=JSON.stringify({search:h.currentFilter.filter.quickFilterText,fields:h.currentFilter.filter.quickFilterFieldsText}),p.sort=h.currentFilter.sort.quickFilterSort?h.currentFilter.sort.quickFilterSort.split(","):[]):(p.filter=void 0,p.sort=void 0),o.refreshData(p)}else{const p=Xe(h.currentFilter);if(p&&p.expressionNode){const S=Be(p.expressionNode),w=o.getOptions();w.filter=S,w.sort=p==null?void 0:p.sortStrings,o.refreshData(w)}}};let Q,$;const Fe=p=>{Q=p},ge=p=>{$=p},ve=()=>{$&&$()},Se=()=>{Q&&Q()},Te=()=>c(Ce,{id:r==null?void 0:r.componentName,viewName:r==null?void 0:r.viewName,apiVersion:r==null?void 0:r.apiVersion,ref:pe,variant:V??E.variant,expandedFilter:h.expandedFilter,persistenceDelegator:W,currentFilter:h.currentFilter,activeFilterIndex:h.activeFilterIndex,onSelectedFilter:he,onFilterChanged:fe,onSearchByFilter:ye,onToggleExpandedFilter:be,onExport:ve,onPrint:Se,showExportButton:!0,showPrintButton:!0,width:"560px",height:"170px",children:i});return q(Le,{withBorder:G,ref:d,style:{overflow:"none",height:"calc(100% - 4px)"},children:[P?c(je,{autoClose:2e4,withCloseButton:!0,withBorder:!0,icon:c(Ue,{size:"1.4rem"}),title:x("archbase:WARNING"),titleColor:"rgb(250, 82, 82)",variant:V??E.variant,onClose:()=>T&&T(),children:c("span",{children:b})}):null,q(we,{printTitle:n||t,logoPrint:u,width:ce,height:de,withBorder:G,dataSource:o,withColumnBorders:!0,variant:V??E.variant,striped:!0,isLoading:f,enableTopToolbar:y,pageSize:a,isError:P,enableGlobalFilter:A==="normal",renderToolbarInternalActions:A==="advanced"?Te:void 0,renderRowActions:me,error:c("span",{children:b}),onExport:ge,onPrint:Fe,children:[e,l!=null&&l.visible?c(Ve,{children:q(g.Fragment,{children:[c("h3",{className:"only-print",children:n||t}),c("div",{className:"no-print",children:q(Ge,{gap:"8px",rowGap:"8px",children:[l.customUserActions&&l.customUserActionsPosition==="left"?l.customUserActions:null,l.onAddExecute?c(I,{color:"green",variant:V??E.variant,leftSection:c(Ie,{}),onClick:()=>l&&l.onAddExecute&&l.onAddExecute(),children:x("archbase:New")}):null,l.onEditExecute?c(I,{color:"blue",leftSection:c(We,{}),disabled:!o.isBrowsing()||o.isEmpty(),variant:V??E.variant,onClick:()=>l&&l.onEditExecute&&l.onEditExecute(),children:x("archbase:Edit")}):null,l.onRemoveExecute?c(I,{color:"red",leftSection:c(ze,{}),disabled:!(l!=null&&l.allowRemove)||!o.isBrowsing()||o.isEmpty(),variant:V??E.variant,onClick:()=>l&&l.onRemoveExecute&&l.onRemoveExecute(),children:x("archbase:Remove")}):null,l.onViewExecute?c(I,{color:"silver",leftSection:c(Ke,{}),disabled:!o.isBrowsing()||o.isEmpty(),variant:V??E.variant,onClick:()=>l&&l.onViewExecute&&l.onViewExecute(),children:x("archbase:View")}):null,l.customUserActions&&l.customUserActionsPosition==="right"?l.customUserActions:null]})})]})}):null]})]})}try{O.displayName="ArchbaseTableTemplate",O.__docgenInfo={description:"",displayName:"ArchbaseTableTemplate",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},printTitle:{defaultValue:null,description:"",name:"printTitle",required:!1,type:{name:"string"}},logoPrint:{defaultValue:null,description:"",name:"logoPrint",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"light"'},{value:'"filled"'},{value:'"outline"'},{value:'"default"'},{value:'"transparent"'},{value:'"white"'},{value:'"subtle"'},{value:'"gradient"'}]}},dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"ArchbaseDataSource<T, ID>"}},dataSourceEdition:{defaultValue:null,description:"",name:"dataSourceEdition",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},store:{defaultValue:null,description:"",name:"store",required:!1,type:{name:"ArchbaseStateValues"}},filterType:{defaultValue:{value:"normal"},description:"",name:"filterType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"normal"'},{value:'"advanced"'}]}},filterOptions:{defaultValue:null,description:"",name:"filterOptions",required:!1,type:{name:"FilterOptions"}},filterPersistenceDelegator:{defaultValue:null,description:"",name:"filterPersistenceDelegator",required:!1,type:{name:"ArchbaseQueryFilterDelegator"}},pageSize:{defaultValue:null,description:"",name:"pageSize",required:!1,type:{name:"number"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ReactNode"}},filterFields:{defaultValue:null,description:"",name:"filterFields",required:!1,type:{name:"ReactNode"}},userActions:{defaultValue:null,description:"",name:"userActions",required:!1,type:{name:"UserActionsOptions"}},userRowActions:{defaultValue:null,description:"",name:"userRowActions",required:!1,type:{name:"UserRowActionsOptions<T>"}},innerRef:{defaultValue:null,description:"",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isLoadingFilter:{defaultValue:{value:"false"},description:"",name:"isLoadingFilter",required:!1,type:{name:"boolean"}},isError:{defaultValue:{value:"false"},description:"",name:"isError",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:""},description:"",name:"error",required:!1,type:{name:"string"}},clearError:{defaultValue:{value:"() => {}"},description:"",name:"clearError",required:!1,type:{name:"() => void"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | number"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | number"}},onSearchByFilter:{defaultValue:null,description:"",name:"onSearchByFilter",required:!1,type:{name:"() => void"}},withBorder:{defaultValue:{value:"true"},description:"",name:"withBorder",required:!1,type:{name:"boolean"}},enableTopToolbar:{defaultValue:{value:"true"},description:"",name:"enableTopToolbar",required:!1,type:{name:"boolean"}}}}}catch{}const st=[],Z=[{value:B.APROVADO.toString(),label:"Aprovado",color:"green"},{value:B.REJEITADO.toString(),label:"Rejeitado",color:"red"},{value:B.PENDENTE.toString(),label:"Pendente",color:"orange"}],D=()=>{const t=qe(),n=it("pessoaStore"),o=Re(Ne.Pessoa),{dataSource:r,isLoading:a,error:e,isError:i,clearError:u}=ke({name:"dsPessoas",service:o,pageSize:10,loadOnStart:!0,store:n,onLoadComplete:f=>{console.log(f)},onDestroy:f=>{},onError:(f,v)=>{He.showError(x("WARNING"),f,v)}});K({dataSource:r,listener:f=>{}});const{dataSource:l}=_e({initialData:st,name:"dsFilters"}),{dataSource:s}=De({initialData:ut,name:"dsPessoas"});s!=null&&s.isBrowsing()&&!(s!=null&&s.isEmpty())&&s.edit(),K({dataSource:s,listener:f=>{switch(f.type){case Oe.fieldChanged:{t();break}}}});const d=g.useMemo(()=>q(Ee,{children:[c(R,{dataField:"id",dataType:"uuid",header:"Id",enableClickToCopy:!0}),c(R,{dataField:"nome",dataType:"text",header:"Nome da pessoa"}),c(R,{dataField:"data_nasc",dataType:"date",header:"Data nascimento",inputFilterType:"date"}),c(R,{dataField:"creditoOK",dataType:"boolean",header:"Crédito OK?"}),c(R,{dataField:"status",dataType:"enum",inputFilterType:"select",enumValues:Z,header:"Status",render:f=>c(j,{currentValue:`${f.getValue()}`,values:Z})})]}),[]);return c(J,{children:c(J.Col,{span:12,h:"100vh",children:c(O,{title:"Pessoas",dataSource:r,pageSize:10,isLoading:a,error:e,isError:i,clearError:u,filterOptions:{activeFilterIndex:0,enabledAdvancedFilter:!1,apiVersion:"1.01",componentName:"templateTableExemplo",viewName:"templateTableView"},columns:d,userRowActions:{actions:Ae,onAddRow:()=>{},onEditRow:()=>{},onRemoveRow:()=>{},onViewRow:()=>{}},filterType:"advanced",filterPersistenceDelegator:l})})})},ut=[Ye[0]],ka={title:"Modelos/Table template",component:O},C={name:"Exemplo simples",render:()=>c(D,{})};var ee,te,re;D.parameters={...D.parameters,docs:{...(ee=D.parameters)==null?void 0:ee.docs,source:{originalSource:`() => {
  const forceUpdate = useArchbaseForceUpdate();
  const pessoaStore = useArchbaseStore('pessoaStore');
  const pessoaApi = useArchbaseRemoteServiceApi<FakePessoaService>(API_TYPE.Pessoa);
  /**
   * Criando dataSource remoto
   * @param dataSource Fonte de dados
   */
  const {
    dataSource: dsPessoas,
    isLoading,
    error,
    isError,
    clearError
  } = useArchbaseRemoteDataSource<Pessoa, number>({
    name: 'dsPessoas',
    service: pessoaApi,
    pageSize: 10,
    loadOnStart: true,
    store: pessoaStore,
    onLoadComplete: dataSource => {
      console.log(dataSource);
    },
    onDestroy: _dataSource => {
      //
    },
    onError: (error, origin) => {
      ArchbaseNotifications.showError(t('WARNING'), error, origin);
    }
  });
  useArchbaseDataSourceListener<Pessoa, string>({
    dataSource: dsPessoas,
    listener: (_event: DataSourceEvent<Pessoa>): void => {
      //
    }
  });

  // const [filterState, setFilterState] = useState<ArchbaseQueryFilterState>({
  //   currentFilter: getDefaultEmptyFilter(),
  //   activeFilterIndex: -1,
  //   expandedFilter: false,
  // });
  const {
    dataSource: dsFilters
  } = useArchbaseLocalFilterDataSource({
    initialData: filters,
    name: 'dsFilters'
  });
  const {
    dataSource
  } = useArchbaseDataSource<Pessoa, string>({
    initialData: data,
    name: 'dsPessoas'
  });
  if (dataSource?.isBrowsing() && !dataSource?.isEmpty()) {
    dataSource.edit();
  }
  useArchbaseDataSourceListener<Pessoa, string>({
    dataSource,
    listener: (event: DataSourceEvent<Pessoa>): void => {
      switch (event.type) {
        case DataSourceEventNames.fieldChanged:
          {
            forceUpdate();
            break;
          }
        default:
      }
    }
  });

  // const handleFilterChanged = (filter: ArchbaseQueryFilter, activeFilterIndex: number) => {
  //   setFilterState({ ...filterState, currentFilter: filter, activeFilterIndex });
  // };

  // const handleToggleExpandedFilter = (expanded: boolean) => {
  //   setFilterState({ ...filterState, expandedFilter: expanded });
  // };

  // const handleSelectedFilter = (filter: ArchbaseQueryFilter, activeFilterIndex: number) => {
  //   setFilterState({ ...filterState, currentFilter: filter, activeFilterIndex });
  // };

  // const handleSearchByFilter = () => {};

  // const _queryFields: ReactNode = useMemo(() => {
  //   return (
  //     <QueryFields>
  //       <QueryField name="id" label="ID" dataType="number" sortable={true} quickFilter={true} quickFilterSort={true} />
  //       <QueryField
  //         name="nome"
  //         label="Nome da pessoa"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="sexo"
  //         label="Sexo"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         quickFilterSort={true}
  //       >
  //         <QueryFieldValue label="Masculino" value="Masculino" />
  //         <QueryFieldValue label="Feminino" value="Feminino" />
  //       </QueryField>
  //       <QueryField
  //         name="cpf"
  //         label="CPF"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         mask={MaskPattern.CPF}
  //       />
  //       <QueryField
  //         name="pai"
  //         label="Nome do pai"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="mae"
  //         label="Nome do mãe"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="cidade"
  //         label="Cidade"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />

  //       <QueryField
  //         name="Estado"
  //         label="Estado"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="email"
  //         label="E-mail"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_CONTAINS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="data_nasc"
  //         label="Data nascimento"
  //         dataType="date"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_EQUALS}
  //       />
  //       <QueryField
  //         name="peso"
  //         label="Peso KG"
  //         dataType="number"
  //         sortable={true}
  //         quickFilter={true}
  //         operator={OP_EQUALS}
  //         quickFilterSort={true}
  //       />
  //       <QueryField
  //         name="status"
  //         label="Status da pessoa"
  //         dataType="string"
  //         sortable={true}
  //         quickFilter={true}
  //         quickFilterSort={true}
  //       >
  //         <QueryFieldValue label="APROVADO" value="0" />
  //         <QueryFieldValue label="REJEITADO" value="1" />
  //         <QueryFieldValue label="PENDENTE" value="2" />
  //       </QueryField>
  //     </QueryFields>
  //   );
  // }, []);

  const columns: ReactNode = useMemo(() => {
    return <Columns>
                <ArchbaseDataTableColumn<Pessoa> dataField="id" dataType="uuid" header="Id" enableClickToCopy={true} />
                <ArchbaseDataTableColumn<Pessoa> dataField="nome" dataType="text" header="Nome da pessoa" />
                <ArchbaseDataTableColumn<Pessoa> dataField="data_nasc" dataType="date" header="Data nascimento" inputFilterType="date" />
                <ArchbaseDataTableColumn<Pessoa> dataField="creditoOK" dataType="boolean" header="Crédito OK?" />
                <ArchbaseDataTableColumn<Pessoa> dataField="status" dataType="enum" inputFilterType="select" enumValues={StatusValues} header="Status" render={(data): ReactNode => {
        return <ArchbaseItemRender currentValue={\`\${data.getValue()}\`} values={StatusValues} />;
      }} />
            </Columns>;
  }, []);
  return <Grid>
            <Grid.Col span={12} h={'100vh'}>
                <ArchbaseTableTemplate title="Pessoas" dataSource={dsPessoas} pageSize={10} isLoading={isLoading} error={error} isError={isError} clearError={clearError} filterOptions={{
        activeFilterIndex: 0,
        enabledAdvancedFilter: false,
        apiVersion: '1.01',
        componentName: 'templateTableExemplo',
        viewName: 'templateTableView'
      }} columns={columns} userRowActions={{
        actions: ArchbaseTableRowActions<Pessoa>,
        onAddRow: () => {},
        onEditRow: () => {},
        onRemoveRow: () => {},
        onViewRow: () => {}
      }} filterType="advanced" filterPersistenceDelegator={(dsFilters as ArchbaseQueryFilterDelegator)} />
            </Grid.Col>
        </Grid>;
}`,...(re=(te=D.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};var ae,ne,oe;C.parameters={...C.parameters,docs:{...(ae=C.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseTableTemplateExample />
}`,...(oe=(ne=C.parameters)==null?void 0:ne.docs)==null?void 0:oe.source}}};export{D as ArchbaseTableTemplateExample,C as Primary,ka as default};
