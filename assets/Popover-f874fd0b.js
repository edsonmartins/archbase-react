import{j as w,a as B}from"./jsx-runtime-c9381026.js";import{r as g}from"./index-8b3efc3f.js";import{O as q,i as Ne,g as ze}from"./OptionalPortal-77226e4d.js";import{f as H,u as T,B as ke,r as Ie,t as _e,h as Ae,i as je,n as Me,o as $e}from"./polymorphic-factory-531d6b2a.js";import{u as Ke}from"./use-resolved-styles-api-64b284e6.js";import{u as Le}from"./DirectionProvider-1e219af7.js";import{n as Ue,a as Ve,u as Xe,i as Ye,o as Be,s as qe,p as L,j as U,l as V,k as He,q as Ze,m as Ge}from"./use-floating-auto-update-1c50c118.js";import{u as Je,F as Qe,O as We}from"./FocusTrap-95e46d3e.js";import{T as Z}from"./Transition-d7abc8af.js";import{c as eo}from"./create-safe-context-941c9e18.js";import{n as oo}from"./noop-1bad6ac0.js";import{u as G}from"./use-merged-ref-a374cf59.js";import{u as to}from"./use-uncontrolled-f56237fb.js";import{u as X}from"./use-did-update-bccd292e.js";import{u as ro}from"./use-id-f896cdc5.js";function ao(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||oo:t=>{var n;t.key==="Escape"&&(e(t),(n=r.onTrigger)==null||n.call(r))}}const Y=["mousedown","touchstart"];function no(e,r,t){const n=g.useRef(null);return g.useEffect(()=>{const d=l=>{const{target:i}=l??{};if(Array.isArray(t)){const s=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";t.every(c=>!!c&&!l.composedPath().includes(c))&&!s&&e()}else n.current&&!n.current.contains(i)&&e()};return(r||Y).forEach(l=>document.addEventListener(l,d)),()=>{(r||Y).forEach(l=>document.removeEventListener(l,d))}},[n,e,t]),n}const[so,J]=eo("Popover component was not found in the tree");var Q={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const io={},S=H((e,r)=>{var R,C,y,h;const t=T("PopoverDropdown",io,e),{className:n,style:d,vars:l,children:i,onKeyDownCapture:s,variant:a,classNames:c,styles:f,...x}=t,o=J(),P=Je({opened:o.opened,shouldReturnFocus:o.returnFocus}),O=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},D=G(r,o.floating);return o.disabled?null:w(q,{...o.portalProps,withinPortal:o.withinPortal,children:w(Z,{mounted:o.opened,...o.transitionProps,transition:((R=o.transitionProps)==null?void 0:R.transition)||"fade",duration:((C=o.transitionProps)==null?void 0:C.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((y=o.transitionProps)==null?void 0:y.exitDuration)=="number"?o.transitionProps.exitDuration:(h=o.transitionProps)==null?void 0:h.duration,children:v=>w(Qe,{active:o.trapFocus&&o.opened,innerRef:D,children:B(ke,{...O,...x,variant:a,onKeyDownCapture:ao(o.onClose,{active:o.closeOnEscape,onTrigger:P,onKeyDown:s}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:n,props:t,classNames:c,styles:f,style:[{...v,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Ie(o.width)},o.resolvedStyles.dropdown,f==null?void 0:f.dropdown,d]}),children:[i,w(Ue,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:c,styles:f})})]})})})})});S.classes=Q;S.displayName="@mantine/core/PopoverDropdown";const lo={refProp:"ref",popupType:"dialog"},W=H((e,r)=>{const{children:t,refProp:n,popupType:d,...l}=T("PopoverTarget",lo,e);if(!Ne(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=l,s=J(),a=G(s.reference,Ve(t),r),c=s.withRoles?{"aria-haspopup":d,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return g.cloneElement(t,{...i,...c,...s.targetProps,className:_e(s.targetProps.className,i.className,t.props.className),[n]:a,...s.controlled?null:{onClick:s.onToggle}})});W.displayName="@mantine/core/PopoverTarget";function co(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function uo(e,r){const t=co(e.middlewares),n=[Be(e.offset)];return t.shift&&n.push(qe(typeof t.shift=="boolean"?{limiter:L(),padding:5}:{limiter:L(),padding:5,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?U():U(t.flip)),t.inline&&n.push(typeof t.inline=="boolean"?V():V(t.inline)),n.push(He({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&n.push(Ze({...typeof t.size=="boolean"?{}:t.size,apply({rects:d,availableWidth:l,availableHeight:i,...s}){var f;const c=((f=r().refs.floating.current)==null?void 0:f.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:d,availableWidth:l,availableHeight:i,...s}):Object.assign(c,{maxWidth:`${l}px`,maxHeight:`${i}px`})),e.width==="target"&&Object.assign(c,{width:`${d.reference.width}px`})}})),n}function fo(e){const[r,t]=to({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=g.useRef(r),d=()=>{r&&t(!1)},l=()=>t(!r),i=Xe({strategy:e.strategy,placement:e.position,middleware:uo(e,()=>i)});return Ye({opened:r,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),X(()=>{var s;(s=e.onPositionChange)==null||s.call(e,i.placement)},[i.placement]),X(()=>{var s,a;r!==n.current&&(r?(a=e.onOpen)==null||a.call(e):(s=e.onClose)==null||s.call(e)),n.current=r},[r,e.onClose,e.onOpen]),{floating:i,controlled:typeof e.opened=="boolean",opened:r,onClose:d,onToggle:l}}const po={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ze("popover"),__staticSelector:"Popover",width:"max-content"},go=je((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:Me(r),"--popover-shadow":$e(t)}}));function b(e){var _,A,j,M,$,K;const r=T("Popover",po,e),{children:t,position:n,offset:d,onPositionChange:l,positionDependencies:i,opened:s,transitionProps:a,onExitTransitionEnd:c,onEnterTransitionEnd:f,width:x,middlewares:o,withArrow:P,arrowSize:O,arrowOffset:D,arrowRadius:R,arrowPosition:C,unstyled:y,classNames:h,styles:v,closeOnClickOutside:ee,withinPortal:E,portalProps:oe,closeOnEscape:te,clickOutsideEvents:re,trapFocus:ae,onClose:ne,onOpen:se,onChange:ie,zIndex:le,radius:de,shadow:ce,id:ue,defaultOpened:fe,__staticSelector:F,withRoles:pe,disabled:ge,returnFocus:me,variant:we,keepMounted:he,vars:ye,floatingStrategy:N,withOverlay:ve,overlayProps:m,...xe}=r,z=Ae({name:F,props:r,classes:Q,classNames:h,styles:v,unstyled:y,rootSelector:"dropdown",vars:ye,varsResolver:go}),{resolvedStyles:Pe}=Ke({classNames:h,styles:v,props:r}),k=g.useRef(null),[Oe,De]=g.useState(null),[Re,Ce]=g.useState(null),{dir:be}=Le(),I=ro(ue),u=fo({middlewares:o,width:x,position:Ge(be,n),offset:typeof d=="number"?d+(P?O/2:0):d,arrowRef:k,arrowOffset:D,onPositionChange:l,positionDependencies:i,opened:s,defaultOpened:fe,onChange:ie,onOpen:se,onClose:ne,strategy:N});no(()=>ee&&u.onClose(),re,[Oe,Re]);const Te=g.useCallback(p=>{De(p),u.floating.refs.setReference(p)},[u.floating.refs.setReference]),Se=g.useCallback(p=>{Ce(p),u.floating.refs.setFloating(p)},[u.floating.refs.setFloating]),Ee=g.useCallback(()=>{var p;(p=a==null?void 0:a.onExited)==null||p.call(a),c==null||c()},[a==null?void 0:a.onExited,c]),Fe=g.useCallback(()=>{var p;(p=a==null?void 0:a.onEntered)==null||p.call(a),f==null||f()},[a==null?void 0:a.onEntered,f]);return B(so,{value:{returnFocus:me,disabled:ge,controlled:u.controlled,reference:Te,floating:Se,x:u.floating.x,y:u.floating.y,arrowX:(j=(A=(_=u.floating)==null?void 0:_.middlewareData)==null?void 0:A.arrow)==null?void 0:j.x,arrowY:(K=($=(M=u.floating)==null?void 0:M.middlewareData)==null?void 0:$.arrow)==null?void 0:K.y,opened:u.opened,arrowRef:k,transitionProps:{...a,onExited:Ee,onEntered:Fe},width:x,withArrow:P,arrowSize:O,arrowOffset:D,arrowRadius:R,arrowPosition:C,placement:u.floating.placement,trapFocus:ae,withinPortal:E,portalProps:oe,zIndex:le,radius:de,shadow:ce,closeOnEscape:te,onClose:u.onClose,onToggle:u.onToggle,getTargetId:()=>`${I}-target`,getDropdownId:()=>`${I}-dropdown`,withRoles:pe,targetProps:xe,__staticSelector:F,classNames:h,styles:v,unstyled:y,variant:we,keepMounted:he,getStyles:z,resolvedStyles:Pe,floatingStrategy:N},children:[t,ve&&w(Z,{transition:"fade",mounted:u.opened,duration:(a==null?void 0:a.duration)||250,exitDuration:(a==null?void 0:a.exitDuration)||250,children:p=>w(q,{withinPortal:E,children:w(We,{...m,...z("overlay",{className:m==null?void 0:m.className,style:[p,m==null?void 0:m.style]})})})})]})}b.Target=W;b.Dropdown=S;b.displayName="@mantine/core/Popover";b.extend=e=>e;export{b as P,no as u};
