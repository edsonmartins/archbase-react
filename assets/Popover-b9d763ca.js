import{r as u,R as p}from"./index-76fb7be0.js";import{O as xe,i as Oe,g as De}from"./OptionalPortal-d3ff2b4f.js";import{f as V,u as R,B as Ce,r as Ee,x as Re,h as Te,i as be,n as Fe,o as Se}from"./polymorphic-factory-e212381f.js";import{u as Ne}from"./DirectionProvider-3f93a9e9.js";import{n as Ie,u as ze,l as ke,o as _e,s as Ae,p as M,f as $,i as K,b as Me,q as $e,m as Ke}from"./use-floating-auto-update-8b56efba.js";import{c as Le}from"./create-safe-context-978e3819.js";import{u as Ue,F as Ve}from"./FocusTrap-0274480a.js";import{T as Xe}from"./Transition-7fd90e94.js";import{u as X}from"./use-merged-ref-962e80ee.js";import{u as Ye}from"./use-uncontrolled-625105b4.js";import{u as L}from"./use-did-update-4c7f685e.js";import{u as je}from"./use-id-9525279e.js";const Be=()=>{};function He(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||Be:t=>{var n;t.key==="Escape"&&(e(t),(n=r.onTrigger)==null||n.call(r))}}const U=["mousedown","touchstart"];function qe(e,r,t){const n=u.useRef();return u.useEffect(()=>{const l=i=>{const{target:a}=i??{};if(Array.isArray(t)){const s=(a==null?void 0:a.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(a)&&a.tagName!=="HTML";t.every(c=>!!c&&!i.composedPath().includes(c))&&!s&&e()}else n.current&&!n.current.contains(a)&&e()};return(r||U).forEach(i=>document.addEventListener(i,l)),()=>{(r||U).forEach(i=>document.removeEventListener(i,l))}},[n,e,t]),n}const[We,Y]=Le("Popover component was not found in the tree");var j={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Ze={},T=V((e,r)=>{var g,m,w,x;const t=R("PopoverDropdown",Ze,e),{className:n,style:l,vars:i,children:a,onKeyDownCapture:s,variant:f,classNames:c,styles:P,...v}=t,o=Y(),y=Ue({opened:o.opened,shouldReturnFocus:o.returnFocus}),D=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},C=X(r,o.floating);return o.disabled?null:p.createElement(xe,{...o.portalProps,withinPortal:o.withinPortal},p.createElement(Xe,{mounted:o.opened,...o.transitionProps,transition:((g=o.transitionProps)==null?void 0:g.transition)||"fade",duration:((m=o.transitionProps)==null?void 0:m.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((w=o.transitionProps)==null?void 0:w.exitDuration)=="number"?o.transitionProps.exitDuration:(x=o.transitionProps)==null?void 0:x.duration},E=>p.createElement(Ve,{active:o.trapFocus},p.createElement(Ce,{...D,...v,variant:f,ref:C,onKeyDownCapture:He(o.onClose,{active:o.closeOnEscape,onTrigger:y,onKeyDown:s}),"data-position":o.placement,...o.getStyles("dropdown",{className:n,props:t,classNames:c,styles:P,style:[{...E,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Ee(o.width)},l]})},a,p.createElement(Ie,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:c,styles:P})})))))});T.classes=j;T.displayName="@mantine/core/PopoverDropdown";const Ge={refProp:"ref",popupType:"dialog"},B=V((e,r)=>{const{children:t,refProp:n,popupType:l,...i}=R("PopoverTarget",Ge,e);if(!Oe(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,s=Y(),f=X(s.reference,t.ref,r),c=s.withRoles?{"aria-haspopup":l,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return u.cloneElement(t,{...a,...c,...s.targetProps,className:Re(s.targetProps.className,a.className,t.props.className),[n]:f,...s.controlled?null:{onClick:s.onToggle}})});B.displayName="@mantine/core/PopoverTarget";function Je(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function Qe(e,r){const t=Je(e.middlewares),n=[_e(e.offset)];return t.shift&&n.push(Ae(typeof t.shift=="boolean"?{limiter:M(),padding:5}:{limiter:M(),padding:5,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?$():$(t.flip)),t.inline&&n.push(typeof t.inline=="boolean"?K():K(t.inline)),n.push(Me({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&n.push($e({...typeof t.size=="boolean"?{}:t.size,apply({rects:l,availableWidth:i,availableHeight:a}){var c;const f=((c=r().refs.floating.current)==null?void 0:c.style)??{};t.size&&Object.assign(f,{maxWidth:`${i}px`,maxHeight:`${a}px`}),e.width==="target"&&Object.assign(f,{width:`${l.reference.width}px`})}})),n}function eo(e){const[r,t]=Ye({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=()=>{var a;r&&((a=e.onClose)==null||a.call(e),t(!1))},l=()=>{var a,s;r?((a=e.onClose)==null||a.call(e),t(!1)):((s=e.onOpen)==null||s.call(e),t(!0))},i=ze({strategy:e.strategy,placement:e.position,middleware:Qe(e,()=>i)});return ke({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),L(()=>{var a;(a=e.onPositionChange)==null||a.call(e,i.placement)},[i.placement]),L(()=>{var a,s;e.opened?(s=e.onOpen)==null||s.call(e):(a=e.onClose)==null||a.call(e)},[e.opened]),{floating:i,controlled:typeof e.opened=="boolean",opened:r,onClose:n,onToggle:l}}const oo={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:De("popover"),__staticSelector:"Popover",width:"max-content"},to=be((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:Fe(r),"--popover-shadow":Se(t)}}));function O(e){var N,I,z,k,_,A;const r=R("Popover",oo,e),{children:t,position:n,offset:l,onPositionChange:i,positionDependencies:a,opened:s,transitionProps:f,width:c,middlewares:P,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:D,arrowPosition:C,unstyled:g,classNames:m,styles:w,closeOnClickOutside:x,withinPortal:E,portalProps:H,closeOnEscape:q,clickOutsideEvents:W,trapFocus:Z,onClose:G,onOpen:J,onChange:Q,zIndex:ee,radius:oe,shadow:te,id:re,defaultOpened:ae,__staticSelector:b,withRoles:ne,disabled:se,returnFocus:ie,variant:le,keepMounted:de,vars:ce,floatingStrategy:fe,...ue}=r,pe=Te({name:b,props:r,classes:j,classNames:m,styles:w,unstyled:g,rootSelector:"dropdown",vars:ce,varsResolver:to}),F=u.useRef(null),[ge,me]=u.useState(null),[we,he]=u.useState(null),{dir:Pe}=Ne(),S=je(re),d=eo({middlewares:P,width:c,position:Ke(Pe,n),offset:typeof l=="number"?l+(v?o/2:0):l,arrowRef:F,arrowOffset:y,onPositionChange:i,positionDependencies:a,opened:s,defaultOpened:ae,onChange:Q,onOpen:J,onClose:G,strategy:fe});qe(()=>x&&d.onClose(),W,[ge,we]);const ve=u.useCallback(h=>{me(h),d.floating.refs.setReference(h)},[d.floating.refs.setReference]),ye=u.useCallback(h=>{he(h),d.floating.refs.setFloating(h)},[d.floating.refs.setFloating]);return p.createElement(We,{value:{returnFocus:ie,disabled:se,controlled:d.controlled,reference:ve,floating:ye,x:d.floating.x,y:d.floating.y,arrowX:(z=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:z.x,arrowY:(A=(_=(k=d.floating)==null?void 0:k.middlewareData)==null?void 0:_.arrow)==null?void 0:A.y,opened:d.opened,arrowRef:F,transitionProps:f,width:c,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:D,arrowPosition:C,placement:d.floating.placement,trapFocus:Z,withinPortal:E,portalProps:H,zIndex:ee,radius:oe,shadow:te,closeOnEscape:q,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${S}-target`,getDropdownId:()=>`${S}-dropdown`,withRoles:ne,targetProps:ue,__staticSelector:b,classNames:m,styles:w,unstyled:g,variant:le,keepMounted:de,getStyles:pe}},t)}O.Target=B;O.Dropdown=T;O.displayName="@mantine/core/Popover";O.extend=e=>e;export{O as P};
