import{j as c}from"./jsx-runtime-c9381026.js";import{r as l}from"./index-8b3efc3f.js";import{b as P,c as W,d as G}from"./useArchbaseDataSource-c5d317be.js";import{b as J}from"./polymorphic-factory-bf652503.js";import{u as Q}from"./use-mantine-color-scheme-12883fe8.js";import{u as X}from"./use-force-update-11fe72c1.js";import{D as r}from"./useArchbaseDataSourceListener-92dd263c.js";import{T as Y}from"./TextInput-7248445a.js";import{T as Z}from"./Tooltip-3000dbce.js";import{A as $}from"./ActionIcon-bbc9f6f7.js";function b({dataSource:a,dataField:n,disabled:C=!1,readOnly:p=!1,style:x,placeholder:A,label:D,description:I,error:t,required:L,size:T,width:w,innerRef:R,value:F,icon:O,onKeyDown:_,onKeyUp:z,onActionSearchExecute:m,tooltipIconSearch:U="Clique aqui para Localizar",onFocusExit:f=()=>{},onFocusEnter:y=()=>{},onChangeValue:h=()=>{},variant:v,minLength:k,maxLength:N}){const[d,E]=l.useState(F||""),j=l.useRef(),o=J(),{colorScheme:K}=Q(),[g,s]=l.useState(t),M=X();l.useEffect(()=>{s(void 0)},[d]),l.useEffect(()=>{t!==g&&s(t)},[t]);const i=()=>{let e=d;a&&n&&(e=a.getFieldValue(n),e||(e="")),E(e)},q=l.useCallback(()=>{i()},[]),V=l.useCallback(e=>{a&&n&&((e.type===r.dataChanged||e.type===r.recordChanged||e.type===r.afterScroll||e.type===r.afterCancel||e.type===r.afterEdit)&&(i(),M()),e.type===r.onFieldError&&e.fieldName===n&&s(e.error))},[]);P(()=>{i(),a&&n&&(a.addListener(V),a.addFieldChangeListener(n,q))}),W(()=>{i()},[]);const B=e=>{e.preventDefault();const u=e.target.value;e.persist(),E(ae=>u),a&&!a.isBrowsing()&&n&&a.getFieldValue(n)!==u&&a.setFieldValue(n,u),h&&h(u,e)};G(()=>{a&&n&&(a.removeListener(V),a.removeFieldChangeListener(n,q))});const H=e=>{f&&f(e)},S=e=>{y&&y(e)};return c(Y,{disabled:C,readOnly:(()=>{let e=p;return a&&!p&&(e=a.isBrowsing()),e})(),type:"text",size:T,style:{width:w,...x},value:d,ref:R||j,required:L,onChange:B,onBlur:H,onFocus:S,placeholder:A,description:I,onKeyDown:_,onKeyUp:z,label:D,error:g,minLength:k,maxLength:N,rightSection:m?c(Z,{withinPortal:!0,withArrow:!0,label:U,children:c($,{style:{backgroundColor:v==="filled"?K==="dark"?o.colors[o.primaryColor][5]:o.colors[o.primaryColor][6]:void 0},tabIndex:-1,variant:v,onClick:m,children:O})}):null})}try{b.displayName="ArchbaseEdit",b.__docgenInfo={description:"",displayName:"ArchbaseEdit",props:{dataSource:{defaultValue:null,description:"Fonte de dados onde será atribuido o valor do edit",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataField:{defaultValue:null,description:"Campo onde deverá ser atribuido o valor do edit na fonte de dados",name:"dataField",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Indicador se o edit está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Indicador se o edit é somente leitura. Obs: usado em conjunto com o status da fonte de dados",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"Indicador se o preenchimento do edit é obrigatório",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Valor inicial",name:"value",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Estilo do edit",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"Tamanho do edit",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},width:{defaultValue:null,description:"Largura do edit",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"Icone à direita",name:"icon",required:!1,type:{name:"ReactNode"}},tooltipIconSearch:{defaultValue:{value:"Clique aqui para Localizar"},description:"Dica para botão localizar",name:"tooltipIconSearch",required:!1,type:{name:"string"}},onActionSearchExecute:{defaultValue:null,description:"Evento ocorre quando clica no botão localizar",name:"onActionSearchExecute",required:!1,type:{name:"() => void"}},placeholder:{defaultValue:null,description:"Texto sugestão do edit",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Título do edit",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Descrição do edit",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Último erro ocorrido no edit",name:"error",required:!1,type:{name:"string"}},onFocusExit:{defaultValue:{value:"() => {}"},description:"Evento quando o foco sai do edit",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<T>"}},onFocusEnter:{defaultValue:{value:"() => {}"},description:"Evento quando o edit recebe o foco",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<T>"}},onChangeValue:{defaultValue:{value:"() => {}"},description:"Evento quando o valor do edit é alterado",name:"onChangeValue",required:!1,type:{name:"(value: any, event: any) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: any) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: any) => void"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"light"'},{value:'"filled"'},{value:'"outline"'},{value:'"default"'},{value:'"transparent"'},{value:'"white"'},{value:'"subtle"'},{value:'"gradient"'}]}},minLength:{defaultValue:null,description:"",name:"minLength",required:!1,type:{name:"number"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}}}}}catch{}export{b as A};
