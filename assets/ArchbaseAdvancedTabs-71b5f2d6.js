import{j as o,a as A}from"./jsx-runtime-c9381026.js";import{r as e}from"./index-8b3efc3f.js";import{d as X}from"./index-2e8af730.js";var q=typeof window<"u"?e.useLayoutEffect:e.useEffect;function J(a,t,c,l){const u=e.useRef(t);q(()=>{u.current=t},[t]),e.useEffect(()=>{const r=(c==null?void 0:c.current)??window;if(!(r&&r.addEventListener))return;const h=g=>{u.current(g)};return r.addEventListener(a,h,l),()=>{r.removeEventListener(a,h,l)}},[a,c,l])}var Q=typeof window>"u";function oe(a,t){const c=typeof t=="boolean"?t:(t==null?void 0:t.defaultValue)??!1,l=typeof t=="boolean"?void 0:(t==null?void 0:t.initializeWithValue)??void 0,u=v=>Q?c:window.matchMedia(v).matches,[r,h]=e.useState(()=>l?u(a):c);function g(){h(u(a))}return q(()=>{const v=window.matchMedia(a);return g(),v.addListener?v.addListener(g):v.addEventListener("change",g),()=>{v.removeListener?v.removeListener(g):v.removeEventListener("change",g)}},[a]),r}function K(a){const t=e.useRef(a);t.current=a,e.useEffect(()=>()=>{t.current()},[])}function Y(a,t=500,c){const l=e.useRef();K(()=>{l.current&&l.current.cancel()});const u=e.useMemo(()=>{const r=X(a,t,c),h=(...g)=>r(...g);return h.cancel=()=>{r.cancel()},h.isPending=()=>!!l.current,h.flush=()=>r.flush(),h},[a,t,c]);return e.useEffect(()=>{l.current=X(a,t,c)},[a,t,c]),u}var ee=typeof window>"u";function te(a={}){let{initializeWithValue:t=!0}=a;ee&&(t=!1);const[c,l]=e.useState(()=>t?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),u=Y(l,a==null?void 0:a.debounceDelay);function r(){(a!=null&&a.debounceDelay?u:l)({width:window.innerWidth,height:window.innerHeight})}return J("resize",r),q(()=>{r()},[]),c}const ne=a=>{const{favicon:t,title:c,activeTab:l,position:u,contentWidth:r,onClick:h,onClose:g,setDragging:v,tabsContentWidth:M,animateTabMove:W,isDragging:C,index:p,sorting:k,showButtonClose:T}=a,[S,z]=e.useState(0),[E,I]=e.useState(!1),[L,_]=e.useState(null),[y,D]=e.useState(null),[V,N]=e.useState(!1),[O,R]=e.useState(0),B=e.useRef(null),w=9,x=84,P=60,H=48;e.useEffect(()=>(document.addEventListener("mousemove",n),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",n),document.addEventListener("mouseup",s)})),e.useEffect(()=>{E||setTimeout(()=>I(!0),500)},[E]),e.useEffect(()=>{z(r+2*w)},[r]);const F=d=>{d.button===0&&(v(!0),D(d.pageX),N(!1),R(u))},n=d=>{if(y!=null&&C){let m=O-w+(d.pageX-y);m<0&&(m=0),m>M-S&&(m=M-S),_(m),!k&&W(m)}},s=d=>{y!=null&&C&&(D(null),_(null),v(!1),N(!0))},[f,b]=e.useState(u-w);return e.useEffect(()=>{b(u?u-w:0)},[p,u]),A("div",{className:`archbase_tab ${E?"":" archbase_tab-was-just-added"}${y==null&&!l?" archbase_tab-was-just-dragged":""}`,style:{transform:`translate3d(${L??f}px, 0, 0)`,width:`${S}px`},"tab-active":l!==!1?"":null,"is-small":r<x?"":null,"is-smaller":r<P?"":null,"is-mini":r<H?"":null,ref:B,children:[o("div",{className:"archbase_tab-dividers"}),o("div",{className:"archbase_tab-background",children:A("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[A("defs",{children:[o("symbol",{id:"archbase_tab-geometry-left",viewBox:"0 0 214 36",children:o("path",{d:"M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"})}),o("symbol",{id:"archbase_tab-geometry-right",viewBox:"0 0 214 36",children:o("use",{xlinkHref:"#archbase_tab-geometry-left"})}),o("clipPath",{id:"crop",children:o("rect",{className:"mask",width:"100%",height:"100%",x:"0"})})]}),o("svg",{width:"52%",height:"100%",children:o("use",{xlinkHref:"#archbase_tab-geometry-left",width:"214",height:"36",className:"archbase_tab-geometry"})}),o("g",{transform:"scale(-1, 1)",children:o("svg",{width:"52%",height:"100%",x:"-100%",y:"0",children:o("use",{xlinkHref:"#archbase_tab-geometry-right",width:"214",height:"36",className:"archbase_tab-geometry"})})})]})}),A("div",{className:"archbase_tab-content",children:[!!t&&o("div",{className:"archbase_tab-favicon",style:{backgroundImage:`url(${t})`}}),o("div",{className:"archbase_tab-title",children:c}),o("div",{className:"archbase_tab-drag-handle",title:c,onClick:h,onPointerDown:d=>h(d),onMouseUp:s,onMouseMove:n,onMouseDown:F}),T?o("div",{className:"archbase_tab-close",onClick:g}):null]})]})},U=a=>{const{currentTabs:t,onTabChange:c,activeTab:l,onTabClose:u,className:r,style:h,dark:g,onClick:v,buttonCloseOnlyActiveTab:M=!1}=a,[W,C]=e.useState([]),[p,k]=e.useState([]),[T,S]=e.useState(t||[]),[z,E]=e.useState(!1),[I,L]=e.useState(!1),_=e.useRef(null),{width:y,height:D}=te(),V=9,N=1,O=24,R=240;e.useEffect(()=>{C(w()),k(x(w()))},[]),e.useEffect(()=>{B()},[JSON.stringify(T),y,D]),e.useEffect(()=>{t&&S(t)},[JSON.stringify(t)]);const B=()=>{const n=w();n&&(C(n),k(x(n)))},w=()=>{const n=[];if(_.current){const s=T.length,f=_.current.clientWidth,b=(s-1)*N,d=(f-2*V+b)/s,m=Math.max(O,Math.min(R,d)),i=Math.floor(m),Z=i*s+2*V-b;let $=f-Z;for(let j=0;j<s;j+=1){const G=i<R&&$>0?1:0;n.push(i+G),$>0&&($-=1)}}return n},x=n=>{const s=[],f=n||W;let b=V;return f.forEach((d,m)=>{const i=m*N;s.push(b-i),b+=d}),s},P=(n,s)=>{E(!0);let f=1/0,b=-1,d=[];p.forEach((m,i)=>{Math.abs(n-m)<f&&(f=Math.abs(n-m),b=i)}),b=Math.max(0,Math.min(p.length,b)),s!=b&&(p.forEach((m,i)=>{i==s?d[i]=T[b>s?i+1:i-1]:s>i&&i>=b?d[i]=T[i+1]:s<i&&i<=b?d[i]=T[i-1]:d[i]=T[i]}),H(d)&&c(d)),E(!1)},H=n=>new Set(n).size===n.length,F=n=>{u?u(n):c(T.filter((s,f)=>f!=n))};return o("div",{className:r,style:h,children:A("div",{className:`archbase_tabs${g?" archbase_tabs-dark-theme":""}${I?"":" archbase_tabs-is-sorting"}`,children:[o("div",{className:"archbase_tabs_content",ref:_,children:!!T&&T.map((n,s)=>!!p[s]&&o(ne,{favicon:n.favicon,title:n.title,activeTab:l===n.key,position:p[s],contentWidth:W[s],onClick:f=>v(n.key),onClose:f=>F(n.key),setDragging:L,showButtonClose:M?l===n.key:!0,tabsContentWidth:_.current&&_.current.clientWidth,animateTabMove:f=>P(f,s),isDragging:I,id:n.key,index:s,sorting:z},n.key))}),o("div",{className:"archbase_tabs-bottom-bar"})]})})};try{U.displayName="ArchbaseAdvancedTabs",U.__docgenInfo={description:"",displayName:"ArchbaseAdvancedTabs",props:{currentTabs:{defaultValue:null,description:"",name:"currentTabs",required:!0,type:{name:"ArchbaseAdvancedTabItem[]"}},buttonCloseOnlyActiveTab:{defaultValue:null,description:"",name:"buttonCloseOnlyActiveTab",required:!0,type:{name:"boolean"}},activeTab:{defaultValue:null,description:"",name:"activeTab",required:!0,type:{name:"any"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!0,type:{name:"Function"}},onTabClose:{defaultValue:null,description:"",name:"onTabClose",required:!0,type:{name:"Function"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},dark:{defaultValue:null,description:"",name:"dark",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"Function"}}}}}catch{}export{U as A,oe as u};
