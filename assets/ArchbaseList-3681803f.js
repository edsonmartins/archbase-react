import{j as m,a as Fe}from"./jsx-runtime-c9381026.js";import{R as se,r as o}from"./index-8b3efc3f.js";import{I as Re}from"./Image-eb0dd638.js";import{S as le}from"./Space-71262a02.js";import{b as Se,B as ke}from"./polymorphic-factory-72d50303.js";import{u as Be}from"./use-mantine-color-scheme-2346dd43.js";import{A as _e,D as k,i as B,a as de}from"./useArchbaseDataSourceListener-a0bbc6ee.js";import{P as Pe}from"./Paper-1531bd6d.js";const ue=se.createContext({}),je=ue.Provider;function C({active:s,activeBackgroundColor:c,activeColor:q,backgroundColor:y,caption:I,color:V,disabled:_,icon:E,id:P,index:j,image:l,imageRadius:W,imageHeight:w,imageWidth:O,justify:v="flex-start",children:N,recordData:d,spacing:T="md"}){const r=o.useContext(ue),x=o.useRef(null);o.useEffect(()=>{x.current&&s&&x.current.focus()},[s]);const M=f=>{f.preventDefault(),_||r.handleSelectItem&&r.handleSelectItem(j,d)},t=f=>{r.onItemEnter&&r.onItemEnter(f,d)},A=f=>{r.onItemLeave&&r.onItemLeave(f,d)};let p={display:"flex",backgroundColor:"",color:"",justifyContent:v,alignItems:"center"};c&&q&&s?p={...p,backgroundColor:c,color:q}:y&&V&&!s&&(p={...p,backgroundColor:y,color:V});const L=l&&(typeof l=="string"?m(Re,{src:d[l],radius:W,width:O,height:w}):l),D=r.type==="ordered"?"ol":r.type==="unordered"?"ul":"div";return Fe(D,{tabIndex:-1,ref:x,style:p,onClick:M,onMouseOver:t,onMouseOut:A,id:`stItem_${r.ownerId}_${P}`,children:[E,E?m(le,{w:T}):null,L,L?m(le,{w:T}):null,I,N]},`lstItem_${r.ownerId}_${P}`)}C.defaultProps={align:"left",justify:!1,showBorder:!1,disabled:!1};C.displayName="ArchbaseListItem";try{C.displayName="ArchbaseListItem",C.__docgenInfo={description:"",displayName:"ArchbaseListItem",props:{active:{defaultValue:null,description:"Indicador se o item está ativo(selecionado)",name:"active",required:!0,type:{name:"boolean"}},activeBackgroundColor:{defaultValue:null,description:"Cor de fundo do item",name:"activeBackgroundColor",required:!1,type:{name:"string"}},activeColor:{defaultValue:null,description:"Cor do item se ele estiver ativo",name:"activeColor",required:!1,type:{name:"string"}},align:{defaultValue:{value:"left"},description:"Alinhamento do texto do item",name:"align",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},backgroundColor:{defaultValue:null,description:"Cor de fundo do item não selecionado",name:"backgroundColor",required:!1,type:{name:"string"}},caption:{defaultValue:null,description:"Texto do item",name:"caption",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"Cor da fonte do item",name:"color",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"Filhos do item",name:"children",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:{value:"false"},description:"Indicador se o item está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Icone a ser apresentado ao lado esquerdo do item",name:"icon",required:!1,type:{name:"ReactNode"}},id:{defaultValue:null,description:"Id do item",name:"id",required:!0,type:{name:"any"}},index:{defaultValue:null,description:"Posição do item dentro da lista",name:"index",required:!0,type:{name:"number"}},image:{defaultValue:null,description:"Imagem a ser apresentada ao lado esquerdo do item",name:"image",required:!1,type:{name:"ReactNode"}},imageRadius:{defaultValue:null,description:"Arredondamento da Imagem",name:"imageRadius",required:!1,type:{name:"string | number"}},imageHeight:{defaultValue:null,description:"Altura da imagem",name:"imageHeight",required:!1,type:{name:"string | number"}},imageWidth:{defaultValue:null,description:"Largura da Imagem",name:"imageWidth",required:!1,type:{name:"string | number"}},justify:{defaultValue:{value:"false"},description:"Indicador se o conteúdo do item deve ser justificado",name:"justify",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"space-between"'},{value:'"space-around"'},{value:'"space-evenly"'}]}},withBorder:{defaultValue:null,description:"Indicador se o item deve ter uma borda",name:"withBorder",required:!1,type:{name:"boolean"}},borderColor:{defaultValue:null,description:"Cor da borda",name:"borderColor",required:!1,type:{name:"string"}},borderRadius:{defaultValue:null,description:"Arredondamento dos cantos da borda",name:"borderRadius",required:!1,type:{name:"string | number"}},recordData:{defaultValue:null,description:"Dados do item a ser apresentado",name:"recordData",required:!1,type:{name:"T"}},visible:{defaultValue:null,description:"Indicador se o item está visivel na lista",name:"visible",required:!1,type:{name:"boolean"}},spacing:{defaultValue:{value:"md"},description:"Espaçamento entre os valores do item",name:"spacing",required:!1,type:{name:"string | number"}}}}}catch{}function Q(s){const c=Se(),{colorScheme:q}=Be(),{activeBackgroundColor:y=c.colors[c.primaryColor][5],activeColor:I="white",backgroundColor:V,align:_,color:E,height:P="20rem",justify:j="flex-start",onSelectListItem:l,width:W,withBorder:w=!0,borderRadius:O,dataFieldText:v="text",dataFieldId:N="id",activeIndex:d,onItemEnter:T,onItemLeave:r,style:x,id:M,dataSource:t,filter:A,horizontal:p=!1,onFilter:L,children:D,withPadding:f=!1,listStyleType:me="",center:Ne=!1,spacing:X="md",type:K="none",icon:Z,image:ee,imageRadius:ae,imageWidth:te,imageHeight:ne,disabled:H,update:Te=0,onFocusEnter:ce=()=>{},onFocusExit:pe=()=>{}}=s,[n,U]=o.useState(d||-1),[fe,ge]=o.useState(0),[b,Y]=o.useState([]),ye={root:{listStyleType:me,color:q==="dark"?c.colors.dark[0]:c.black,margin:0,paddingLeft:f?c.spacing.xl:0,listStylePosition:"inside",flexDirection:p?"row":"column",display:p?"flex":"inherit",width:"100%",height:P,overflowY:"auto",...x}},[ie,ve]=o.useState(A),[F]=o.useState(M);o.useEffect(()=>{d!==void 0&&U(d)},[d]),o.useEffect(()=>{const e=i=>{if(i.type===k.afterScroll||i.type===k.fieldChanged||i.type===k.dataChanged||i.type===k.afterRemove||i.type===k.recordChanged){const a=t.getCurrentIndex();n!==a?(U(a),l&&l(a,t==null?void 0:t.getCurrentRecord())):ge(u=>u+1)}};return t&&t.addListener(e),()=>{t&&t.removeListener(e)}},[t,n,l]),o.useEffect(()=>{ve(A)},[A]);const g=(e,i)=>{d===void 0&&U(e),l&&l(e,i)};o.useEffect(()=>{t&&t instanceof _e&&n>=0&&t.getCurrentIndex()!==n&&!t.isEmpty()&&t.gotoRecord(n)},[n]);const be=e=>{const i={38:()=>oe(),37:()=>he(),40:()=>re(),39:()=>Ce(),33:()=>qe(),34:()=>Ie(),36:()=>Ve(),35:()=>Ee()};if(n>=0&&b.length>0){const a=i[e.keyCode];a&&(e.preventDefault(),a())}},oe=()=>{const e=n;e-1>=0&&g(e-1,h(e-1))},he=()=>{oe()},re=()=>{const e=n;e+1<b.length&&g(e+1,h(e+1))},Ce=()=>{re()},qe=()=>{const e=Math.max(n-5,0);g(e,h(e))},Ie=()=>{const e=Math.min(n+5,b.length-1);g(e,h(e))},Ve=()=>{g(0,h(0))},Ee=()=>{const e=b.length-1;g(e,h(e))},we=e=>e.browseRecords().map((a,u)=>{if(!a)return null;let G=!0;if(ie&&v&&B.getNestedProperty(a,v)&&(B.getNestedProperty(a,v).includes(ie)||(G=!1)),L&&(G=L(a)),G){let $=a.active===void 0?!1:a.active;n>=0&&($=!1,n===u&&($=!0));const{component:R,id:Me,dataSource:Ae,...Le}=s;if(R){const S=R.type;let z={};R.props&&(z=R.props);let J=B.getNestedProperty(a,N);J||(J=`${F}_${u}`);const De=`${F}_${u}`;return m(S,{id:J,active:$,index:u,dataSource:Ae,recordData:a,disabled:a.disabled||H,...z,...Le,...R.props},De)}else{let S=B.getNestedProperty(a,N);S||(S=`${F}_${u}`);const z=`${F}_${u}`;return m(C,{disabled:a.disabled||H,id:S,index:u,active:$,align:a.align,justify:a.justify===void 0?j:a.justify,activeBackgroundColor:a.activeBackColor===void 0?y:a.activeBackColor,activeColor:a.activeColor===void 0?I:a.activeColor,backgroundColor:a.backgroundColor===void 0?V:a.backgroundColor,color:a.color===void 0?E:a.color,imageRadius:ae,imageHeight:ne,imageWidth:te,icon:a.icon?a.icon:Z,image:ee,spacing:X,caption:B.getNestedProperty(a,v),withBorder:a.withBorder===void 0?w:a.withBorder,visible:!0,recordData:a},z)}}return null}),h=e=>{let i;return b.forEach(a=>{a.props.index===e&&(i=a.props.recordData)}),i},xe=()=>se.Children.toArray(D).map((e,i)=>{if(e.props.visible&&e.type&&e.type.componentName!=="ArchbaseListItem")throw new de("Apenas componentes do tipo ArchbaseListItem podem ser usados como filhos de ArchbaseList.");if(!e.id)throw new de("Todos os itens da lista devem conter um ID.");let a=e.active;return n>=0&&(a=!1,n===i&&(a=!0)),m(C,{disabled:e.disabled||H,id:e.id,index:i,active:a,align:_,justify:e.justify===void 0?j:e.justify,activeBackgroundColor:e.activeBackColor===void 0?y:e.activeBackColor,activeColor:e.activeColor===void 0?I:e.activeColor,backgroundColor:e.backgroundColor===void 0?V:e.backgroundColor,color:e.color===void 0?E:e.color,imageRadius:e.imageRadius?e.imageRadius:ae,imageHeight:e.imageHeight?e.imageHeight:ne,imageWidth:e.imageWidth?e.imageWidth:te,icon:e.icon?e.icon:Z,image:e.image?e.image:ee,spacing:e.spacing?e.spacing:X,caption:e.caption,withBorder:e.withBorder===void 0?w:e.withBorder,visible:e.visible,children:e.children},e.id)});return o.useEffect(()=>{if(t){const e=we(t);Y(e)}else if(D){const e=xe();Y(e)}else Y([])},[fe,n,t==null?void 0:t.lastDataChangedAt,t==null?void 0:t.lastDataBrowsingOn,D]),m(Pe,{id:F,tabIndex:-1,withBorder:w,radius:O,onKeyDown:be,onFocus:ce,onBlur:pe,w:W,children:m(ke,{component:K==="unordered"?"ul":K==="ordered"?"ol":"div",style:ye.root,tabIndex:-1,children:m(je,{value:{dataSource:t,ownerId:M,handleSelectItem:g,activeBackgroundColor:y,activeColor:I,type:K,onItemEnter:T,onItemLeave:r,align:_,disabled:H},children:b})})})}Q.displayName="ArchbaseList";try{Q.displayName="ArchbaseList",Q.__docgenInfo={description:"",displayName:"ArchbaseList",props:{activeBackgroundColor:{defaultValue:null,description:"Cor de fundo do item ativo",name:"activeBackgroundColor",required:!1,type:{name:"string"}},activeColor:{defaultValue:null,description:"Cor do item ativo",name:"activeColor",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"Alinhamento dos itens na lista",name:"align",required:!1,type:{name:"enum",value:[{value:'"right"'},{value:'"left"'},{value:'"center"'}]}},backgroundColor:{defaultValue:null,description:"Cor de fundo da lista",name:"backgroundColor",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"Cor do texto da lista",name:"color",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"Altura da lista",name:"height",required:!1,type:{name:"string | number"}},width:{defaultValue:null,description:"Largura da lista",name:"width",required:!1,type:{name:"string | number"}},disabled:{defaultValue:null,description:"desabilita todos os itens da lista",name:"disabled",required:!1,type:{name:"boolean"}},justify:{defaultValue:null,description:"Indicador se os itens da lista devem ser justificados",name:"justify",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"flex-start"'},{value:'"space-between"'},{value:'"space-around"'},{value:'"space-evenly"'}]}},onSelectListItem:{defaultValue:null,description:"Evento que ocorre quando um item da lista é selecionado",name:"onSelectListItem",required:!1,type:{name:"(index: number, data: any) => void"}},withBorder:{defaultValue:null,description:"Mostra uma borda ao redor da lista",name:"withBorder",required:!1,type:{name:"boolean"}},borderColor:{defaultValue:null,description:"Cor da borda",name:"borderColor",required:!1,type:{name:"string"}},borderRadius:{defaultValue:null,description:"Arredondamento dos cantos da borda",name:"borderRadius",required:!1,type:{name:"string | number"}},dataFieldText:{defaultValue:null,description:"Propriedade do objeto de dados que representa o texto a ser apresentado na lista",name:"dataFieldText",required:!1,type:{name:"string"}},dataFieldId:{defaultValue:null,description:"Propriedade do objeto de dados que representa o ID do item na lista para controle",name:"dataFieldId",required:!1,type:{name:"string"}},activeIndex:{defaultValue:null,description:"Indice do item ativo na lista",name:"activeIndex",required:!1,type:{name:"number"}},onItemEnter:{defaultValue:null,description:"Evento gerado quando o mouse está sobre um item",name:"onItemEnter",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, data: any) => void"}},onItemLeave:{defaultValue:null,description:"Evento gerado quando o mouse sai de um item",name:"onItemLeave",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, data: any) => void"}},style:{defaultValue:null,description:"Permite costumizar o style da lista",name:"style",required:!1,type:{name:"CSSProperties"}},id:{defaultValue:null,description:"Id da lista",name:"id",required:!1,type:{name:"string"}},dataSource:{defaultValue:null,description:"Fonte de dados a ser usado pela lista",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},filter:{defaultValue:null,description:"Filtro a ser aplicado na lista",name:"filter",required:!1,type:{name:"string"}},onFilter:{defaultValue:null,description:"Function a ser aplicada na lista para filtrar os itens",name:"onFilter",required:!1,type:{name:"(record: any) => boolean"}},component:{defaultValue:null,description:"Definições do componente customizado a ser renderizado para um Item da lista",name:"component",required:!1,type:{name:"ComponentDefinition"}},children:{defaultValue:null,description:"Somente componentes <ArchbaseListItem />",name:"children",required:!1,type:{name:"ReactNode[]"}},type:{defaultValue:null,description:"Tipo de lista: ol,ul,div",name:"type",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"ordered"'},{value:'"unordered"'}]}},withPadding:{defaultValue:null,description:"Incluir preenchimento à esquerda para compensar a lista do conteúdo principal",name:"withPadding",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"Tamanho da fonte do tema ou número para definir o valor",name:"size",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"Ícone que deve substituir o ponto do item da lista",name:"icon",required:!1,type:{name:"ReactNode"}},image:{defaultValue:null,description:"Imagem ou source de uma imagem para mostrar no item da lista",name:"image",required:!1,type:{name:"ReactNode"}},imageRadius:{defaultValue:null,description:"Arredondamento da Imagem",name:"imageRadius",required:!1,type:{name:"string | number"}},imageHeight:{defaultValue:null,description:"Altura da imagem",name:"imageHeight",required:!1,type:{name:"string | number"}},imageWidth:{defaultValue:null,description:"Largura da Imagem",name:"imageWidth",required:!1,type:{name:"string | number"}},spacing:{defaultValue:null,description:"Espaçamento entre os valores do item",name:"spacing",required:!1,type:{name:"string | number"}},center:{defaultValue:null,description:"Centralizar itens com ícone",name:"center",required:!1,type:{name:"boolean"}},horizontal:{defaultValue:null,description:"Lista horizontal",name:"horizontal",required:!1,type:{name:"boolean"}},update:{defaultValue:null,description:"force update list",name:"update",required:!1,type:{name:"number"}},listStyleType:{defaultValue:null,description:"Estilo de lista",name:"listStyleType",required:!1,type:{name:"ListStyleType"}},onFocusEnter:{defaultValue:null,description:"",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<HTMLDivElement>"}},onFocusExit:{defaultValue:null,description:"",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<HTMLDivElement>"}}}}}catch{}export{ue as A,Q as a};
