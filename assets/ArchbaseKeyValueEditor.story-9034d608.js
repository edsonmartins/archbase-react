import{j as e,a as d}from"./jsx-runtime-c9381026.js";import{r as w}from"./index-8b3efc3f.js";import{I as Z}from"./Input-f1b4ecdd.js";import{B as H}from"./polymorphic-factory-531d6b2a.js";import{P as L}from"./Paper-de951778.js";import{T as z}from"./TextInput-6fd697e4.js";import{S as ee}from"./Select-d1de4e6e.js";import{T as k}from"./Tooltip-9d469f93.js";import{A as I}from"./ActionIcon-b075d764.js";import{I as T}from"./IconTrash-6b16e91d.js";import{B as re}from"./Button-670fe9e6.js";import{I as te}from"./IconPlus-ae63da25.js";import{G as S}from"./Group-82f8f1fb.js";import{S as ae}from"./Stack-2e13f963.js";import{G as E}from"./Grid-90075680.js";import{C as y}from"./Card-dc93a722.js";import{T as K}from"./Text-0c0756fd.js";import{S as _}from"./ScrollArea-39cbfdfb.js";import{S as ie}from"./Space-12d83b67.js";import{T as oe}from"./Textarea-74d72de0.js";import"./_commonjsHelpers-de833af9.js";import"./create-optional-context-86e78b6c.js";import"./use-resolved-styles-api-64b284e6.js";import"./UnstyledButton-6b18191a.js";import"./use-id-f896cdc5.js";import"./use-isomorphic-effect-aa890e3d.js";import"./Mantine.context-e727d900.js";import"./InputBase-3fac6140.js";import"./use-input-props-60c3aacd.js";import"./OptionsDropdown-114f2dbc.js";import"./CheckIcon-0f280bd3.js";import"./Combobox-375c921c.js";import"./Popover-f874fd0b.js";import"./OptionalPortal-77226e4d.js";import"./index-a38d0dca.js";import"./use-merged-ref-a374cf59.js";import"./DirectionProvider-1e219af7.js";import"./use-floating-auto-update-1c50c118.js";import"./use-did-update-bccd292e.js";import"./FocusTrap-95e46d3e.js";import"./Transition-d7abc8af.js";import"./use-reduced-motion-73d958ef.js";import"./use-media-query-91643880.js";import"./create-safe-context-941c9e18.js";import"./noop-1bad6ac0.js";import"./use-uncontrolled-f56237fb.js";import"./get-style-object-71cabcb5.js";import"./Loader-8d2e2042.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./get-sorted-breakpoints-e9679440.js";import"./px-90b8b31c.js";import"./extends-4c19d496.js";import"./objectWithoutPropertiesLoose-68193569.js";function P({initialValue:m,keyLabel:l="Chave",valueLabel:i,valueOptions:c=[],onChangeKeyValue:C,pairSeparator:h=";",keyValueSeparator:f=",",useBraces:v=!1,readOnly:p=!1,label:O,error:W,tooltipAdd:D="Adicionar chave",tooltipRemove:F="Remover chave",layout:n="horizontal",spacing:M="xs"}){const A=r=>r?r.split(h).map(a=>{const[t,o]=a.split(f);return{key:v?t.replace(/[{}]/g,""):t,value:o}}):[],[s,u]=w.useState(A(m));w.useEffect(()=>{const r=A(m);JSON.stringify(r)!==JSON.stringify(s)&&u(r)},[m,h,f,v]),w.useEffect(()=>{if(C){const a=s.filter(t=>t.key&&t.value).map(t=>`${v?`{${t.key}}`:t.key}${f}${t.value}`).join(h);a!==m&&C(a)}},[s,C,v,h,f,m]);const Q=()=>{const r=[...s,{key:"",value:""}];u(r)},b=r=>{const a=s.filter((t,o)=>o!==r);u(a)},U=(r,a)=>{const t=s.map((o,q)=>q===r?{...o,key:a}:o);u(t)},x=(r,a)=>{const t=s.map((o,q)=>q===r?{...o,value:a}:o);u(t)},X=s.some(r=>!r.key||!r.value),Y=n==="horizontal"?S:ae;return e(Z.Wrapper,{label:O,error:W,children:d(H,{children:[s.map((r,a)=>e(L,{withBorder:!0,shadow:"md",p:"sm",mb:"sm",children:d(Y,{align:"center",wrap:n==="horizontal"?"nowrap":"wrap",gap:M,children:[e(z,{placeholder:l,value:r.key,label:l||(i&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>U(a,t.target.value),readOnly:p}),c.length>0?e(ee,{data:c,value:r.value,label:i||(l&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>x(a,t),placeholder:i,disabled:p}):e(z,{placeholder:i,value:r.value,label:i||(l&&n==="horizontal"?" ":""),style:{width:n==="vertical"?"100%":void 0},onChange:t=>x(a,t.target.value),readOnly:p}),!p&&e(k,{label:F,withinPortal:!0,children:n==="horizontal"?e(I,{style:{marginTop:l||i?25:0},color:"red",variant:"filled",onClick:()=>b(a),children:e(T,{})}):d(re,{style:{marginTop:"0px"},color:"red",variant:"filled",onClick:()=>b(a),children:[e(T,{}),"Remover"]})})]})},a)),!p&&e(k,{label:D,withinPortal:!0,children:e(I,{onClick:Q,color:"green",variant:"filled",disabled:X,children:e(te,{})})})]})})}try{P.displayName="ArchbaseKeyValueEditor",P.__docgenInfo={description:"",displayName:"ArchbaseKeyValueEditor",props:{initialValue:{defaultValue:null,description:"",name:"initialValue",required:!0,type:{name:"string"}},keyLabel:{defaultValue:{value:"Chave"},description:"",name:"keyLabel",required:!1,type:{name:"string"}},valueLabel:{defaultValue:null,description:"",name:"valueLabel",required:!1,type:{name:"string"}},valueOptions:{defaultValue:{value:"[]"},description:"",name:"valueOptions",required:!1,type:{name:"{ value: string; label: string; }[]"}},onChangeKeyValue:{defaultValue:null,description:"",name:"onChangeKeyValue",required:!0,type:{name:"(value: string) => void"}},pairSeparator:{defaultValue:{value:";"},description:"",name:"pairSeparator",required:!1,type:{name:"string"}},keyValueSeparator:{defaultValue:{value:","},description:"",name:"keyValueSeparator",required:!1,type:{name:"string"}},useBraces:{defaultValue:{value:"false"},description:"",name:"useBraces",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},tooltipAdd:{defaultValue:{value:"Adicionar chave"},description:"",name:"tooltipAdd",required:!1,type:{name:"string"}},tooltipRemove:{defaultValue:{value:"Remover chave"},description:"",name:"tooltipRemove",required:!1,type:{name:"string"}},layout:{defaultValue:{value:"horizontal"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},spacing:{defaultValue:{value:"xs"},description:"",name:"spacing",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}}}}}catch{}const J=m=>{const[l,i]=w.useState("");return d(E,{children:[e(E.Col,{offset:1,span:4,children:d(y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(y.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(S,{justify:"space-between",children:e(K,{fw:500,children:"Key Value Editor Component"})})}),e(H,{style:{height:500},children:e(_,{h:500,p:20,children:e(P,{initialValue:l,layout:m.layout,onChangeKeyValue:c=>{i(c)}})})})]})}),e(E.Col,{offset:1,span:4,children:d(y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(y.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(S,{justify:"space-between",children:e(K,{fw:500,children:"Resultado"})})}),d(_,{h:300,children:[e(ie,{h:20}),e(oe,{minRows:12,value:l,autosize:!0})]})]})})]})},lr={title:"Editores/KeyValueEditor",component:P},g={name:"Horizontal",render:()=>e(J,{})},V={name:"Vertical",render:()=>e(J,{layout:"vertical"})};var B,R,j;g.parameters={...g.parameters,docs:{...(B=g.parameters)==null?void 0:B.docs,source:{originalSource:`{
  name: 'Horizontal',
  render: () => <ArchbaseKeyValueEditorExample />
}`,...(j=(R=g.parameters)==null?void 0:R.docs)==null?void 0:j.source}}};var G,N,$;V.parameters={...V.parameters,docs:{...(G=V.parameters)==null?void 0:G.docs,source:{originalSource:`{
  name: 'Vertical',
  render: () => <ArchbaseKeyValueEditorExample layout={'vertical'} />
}`,...($=(N=V.parameters)==null?void 0:N.docs)==null?void 0:$.source}}};export{lr as default,g as horizontal,V as vertical};
