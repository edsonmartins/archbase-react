import{j as c,a as H,F as we}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{u as ye}from"./use-resolved-styles-api-07b5b463.js";import{f as De,u as Oe}from"./polymorphic-factory-bf652503.js";import{g as xe,a as Ie,O as Pe}from"./OptionsDropdown-39724fef.js";import{C as i,u as Ve}from"./Combobox-614068dc.js";import{I as L}from"./InputBase-46c7ce5b.js";import{u as Ee}from"./use-id-f896cdc5.js";import{u as z}from"./use-uncontrolled-f56237fb.js";function Fe(p){const f=u.useRef(void 0);return u.useEffect(()=>{f.current=p},[p]),f.current}const ke={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},U=De((p,f)=>{const F=Oe("Select",ke,p),{classNames:W,styles:$,unstyled:h,vars:Ne,dropdownOpened:q,defaultDropdownOpened:G,onDropdownClose:_,onDropdownOpen:v,onFocus:C,onBlur:w,onClick:y,onChange:J,data:k,value:m,defaultValue:K,selectFirstOptionOnChange:D,onOptionSubmit:O,comboboxProps:Q,readOnly:b,disabled:g,filter:X,limit:Y,withScrollArea:Z,maxDropdownHeight:ee,size:x,searchable:s,rightSection:oe,checkIconPosition:te,withCheckIcon:le,nothingFoundMessage:N,name:ae,form:se,searchValue:ne,defaultSearchValue:re,onSearchChange:ce,allowDeselect:ie,error:B,rightSectionPointerEvents:ue,id:de,clearable:pe,clearButtonProps:fe,hiddenInputProps:he,renderOption:me,onClear:I,autoComplete:be,scrollAreaProps:ge,__defaultRightSection:Be,__clearSection:Re,__clearable:je,chevronColor:Se,...S}=F,P=u.useMemo(()=>xe(k),[k]),d=u.useMemo(()=>Ie(P),[P]),R=Ee(de),[l,j,_e]=z({value:m,defaultValue:K,finalValue:null,onChange:J}),t=typeof l=="string"?d[l]:void 0,n=Fe(t),[V,ve]=z({value:ne,defaultValue:re,finalValue:t?t.label:"",onChange:ce}),o=Ve({opened:q,defaultOpened:G,onDropdownOpen:()=>{v==null||v(),o.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{_==null||_(),o.resetSelectedOption()}}),r=e=>{ve(e),o.resetSelectedOption()},{resolvedClassNames:A,resolvedStyles:M}=ye({props:F,styles:$,classNames:W});u.useEffect(()=>{D&&o.selectFirstOption()},[D,l]),u.useEffect(()=>{m===null&&r(""),typeof m=="string"&&t&&((n==null?void 0:n.value)!==t.value||(n==null?void 0:n.label)!==t.label)&&r(t.label)},[m,t]);const Ce=c(i.ClearButton,{...fe,onClear:()=>{j(null,null),r(""),I==null||I()}}),T=pe&&!!l&&!g&&!b;return H(we,{children:[H(i,{store:o,__staticSelector:"Select",classNames:A,styles:M,unstyled:h,readOnly:b,onOptionSubmit:e=>{O==null||O(e);const a=ie&&d[e].value===l?null:d[e],E=a?a.value:null;E!==l&&j(E,a),!_e&&r(typeof E=="string"&&(a==null?void 0:a.label)||""),o.closeDropdown()},size:x,...Q,children:[c(i.Target,{targetType:s?"input":"button",autoComplete:be,children:c(L,{id:R,ref:f,__defaultRightSection:c(i.Chevron,{size:x,error:B,unstyled:h,color:Se}),__clearSection:Ce,__clearable:T,rightSection:oe,rightSectionPointerEvents:ue||(T?"all":"none"),...S,size:x,__staticSelector:"Select",disabled:g,readOnly:b||!s,value:V,onChange:e=>{r(e.currentTarget.value),o.openDropdown(),D&&o.selectFirstOption()},onFocus:e=>{s&&o.openDropdown(),C==null||C(e)},onBlur:e=>{var a;s&&o.closeDropdown(),r(l!=null&&((a=d[l])==null?void 0:a.label)||""),w==null||w(e)},onClick:e=>{s?o.openDropdown():o.toggleDropdown(),y==null||y(e)},classNames:A,styles:M,unstyled:h,pointer:!s,error:B})}),c(Pe,{data:P,hidden:b||g,filter:X,search:V,limit:Y,hiddenWhenEmpty:!N,withScrollArea:Z,maxDropdownHeight:ee,filterOptions:s&&(t==null?void 0:t.label)!==V,value:l,checkIconPosition:te,withCheckIcon:le,nothingFoundMessage:N,unstyled:h,labelId:S.label?`${R}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:me,scrollAreaProps:ge})]}),c(i.HiddenInput,{value:l,name:ae,form:se,disabled:g,...he})]})});U.classes={...L.classes,...i.classes};U.displayName="@mantine/core/Select";export{U as S};
