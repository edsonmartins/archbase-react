import{a as A,j as a}from"./jsx-runtime-29545a09.js";import{u as te}from"./index-ecced42e.js";import{R as i,r as h}from"./index-76fb7be0.js";import{A as ne}from"./ArchbaseObjectInspector-39e1a2c0.js";import{u as ie}from"./use-hotkeys-89517bd5.js";import{u as ae}from"./use-resize-observer-ba39df3b.js";import{F as se}from"./Flex-472ba316.js";import{A as V}from"./Accordion-ee2e152a.js";const w=()=>{let n=0;return document.querySelectorAll(".archbase-window-container").forEach(u=>{const p=parseInt(u.style.zIndex);n=Math.max(isNaN(p)?0:p,n)}),n+1},R=n=>{const t=Object.assign({id:n.id&&n.id.length?n.id:Date.now().toString(),children:null,height:0,width:0,top:0,left:0,resizable:!1,titleBar:Object.assign({icon:" ",title:"Untitled window",buttons:Object.assign({minimize:!0,maximize:!0,close:!0},n.titleBar&&n.titleBar.buttons||{})},n.titleBar),style:{}},n);t.id||(t.id=Date.now().toString()),Object.freeze(t);const[u,p]=i.useState(t.height),[g,N]=i.useState(t.width),[l,s]=i.useState(t.top||0),[c,r]=i.useState(t.left||0),[y,H]=i.useState(0),[d,_]=i.useState(0),[I,z]=i.useState(!1),[S,x]=i.useState(!1),[Y,B]=i.useState("▁"),[k,C]=i.useState("□"),[P,j]=i.useState(""),[$,v]=i.useState(w()),[E,W]=i.useState(1),{ref:K,width:L,height:M}=ae(),Z=i.useRef(null),m=h.useRef(u),b=h.useRef(g),q=h.useRef(l),O=h.useRef(c),T=500,U=e=>{_(e.clientY-l),H(e.clientX-c),v(w()),W(.5)},G=e=>{r((e.clientX||e.screenX||c+y)-y),s((e.clientY||e.screenY||l+d)-d)},J=e=>{r((e.clientX||e.screenX)-y),s((e.clientY||e.screenY)-d),W(1)},Q=()=>{var e;if(j(`${T}ms ease-in-out`),I)m.current=u,s(q.current||0),r(O.current||0),z(!1),B("▁"),x(!1);else{m.current=32,S||(O.current=c,q.current=l);const o=(e=document.getElementById(t.id))==null?void 0:e.parentElement;b.current=g;let D=((o==null?void 0:o.clientHeight)||window.innerHeight)-m.current-4;const F=((o==null?void 0:o.clientWidth)||window.innerWidth)-b.current-4,f=document.elementFromPoint(F+b.current/2,D+m.current/2);f&&["archbase-window-container","windowTitle"].includes((f==null?void 0:f.className)||"")&&(D-=(f==null?void 0:f.clientHeight)+4),s(D),r(F),z(!0),B("◰"),x(!1)}v(w()),setTimeout(j,T+1,"")},ee=()=>{var o;j(`${T}ms ease-in-out`);const e=(o=document.getElementById(t.id))==null?void 0:o.parentElement;S?(m.current=u,b.current=g,s(q.current||0),r(O.current||0),x(!1),C("□"),z(!1),B("▁")):(m.current=(e==null?void 0:e.clientHeight)||window.innerHeight,b.current=(e==null?void 0:e.clientWidth)||window.innerWidth,I||(O.current=c,q.current=l),s((e==null?void 0:e.offsetTop)||0),r((e==null?void 0:e.offsetLeft)||0),x(!0),C("❐"),z(!1),B("▁")),v(w()),setTimeout(j,T+1,"")};return h.useEffect(()=>{!S&&!I&&(N(L),p(M))},[L,M,S,I]),A("div",{id:t.id,className:"archbase-window-container",style:{height:m.current,width:b.current,top:l,left:c,resize:t.resizable?"both":"none",transition:P,zIndex:$,opacity:E},ref:K,onClick:()=>{v(w())},children:[t.titleBar&&A("div",{className:"title-bar","data-parent":t.id,style:{opacity:E},children:[t.titleBar.icon&&a("span",{className:"icon",children:t.titleBar.icon}),a("span",{className:"windowTitle",draggable:!0,onDragStart:U,onDrag:G,onDragEnd:J,style:{opacity:Math.floor(E)},ref:Z,children:t.titleBar.title}),t.titleBar.buttons&&A("span",{className:"buttonContainer",children:[t.titleBar.buttons.minimize&&a("span",{className:"windowButton",onClick:Q,children:Y}),t.titleBar.buttons.maximize&&a("span",{className:"windowButton",onClick:ee,children:k}),!!t.titleBar.buttons.close&&a("span",{className:"windowButton",onClick:t.titleBar.buttons.close,children:"⨯"})]})]}),a("div",{className:"content",draggable:"false",ref:n.innerRef,style:{height:"100%",opacity:E,...t.style},children:t.children})]})};try{R.displayName="ArchbaseFloatingWindow",R.__docgenInfo={description:"",displayName:"ArchbaseFloatingWindow",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},top:{defaultValue:null,description:"",name:"top",required:!1,type:{name:"number"}},left:{defaultValue:null,description:"",name:"left",required:!1,type:{name:"number"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},titleBar:{defaultValue:null,description:"",name:"titleBar",required:!1,type:{name:"{ icon?: string | HTMLImageElement; title?: string; buttons?: { minimize?: boolean; maximize?: boolean; close?: () => void; }; }"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},innerRef:{defaultValue:null,description:"Referência para o container que envolve o componente filho",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}}}}}catch{}function X({title:n,icon:t,debugObjectInspectorHotKey:u,objectsToInspect:p,visible:g=!1,height:N=400,width:l=500}){const[s,c]=h.useState(g);ie([[u,()=>c(!s)]]);const r=h.useRef(),y=te(r);return a("div",{style:s?{}:{display:"none"},children:a(R,{id:"debug-rules",height:N,width:l,resizable:!0,style:{opacity:1},titleBar:{icon:t,title:n,buttons:{minimize:!0,maximize:!0}},innerRef:r,children:a(se,{h:y.height,children:a(V,{w:"100%",children:p.map((d,_)=>A(V.Item,{value:d.name,children:[a(V.Control,{children:d.name}),a(V.Panel,{children:a(ne,{data:d.object})})]},_))})})})})}try{X.displayName="ArchbaseDebugInspector",X.__docgenInfo={description:"",displayName:"ArchbaseDebugInspector",props:{title:{defaultValue:null,description:"Título a ser exibido",name:"title",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"Título a ser exibido",name:"icon",required:!1,type:{name:"string | HTMLImageElement"}},debugObjectInspectorHotKey:{defaultValue:null,description:"Comando para abrir e fechar o Object Inspector",name:"debugObjectInspectorHotKey",required:!1,type:{name:"string"}},objectsToInspect:{defaultValue:null,description:"Lista de objetos a serem inspecionados",name:"objectsToInspect",required:!1,type:{name:"ArchbaseObjectToInspect[]"}},visible:{defaultValue:{value:"false"},description:"Indica se o Object Inspector será visível inicialmente ou não",name:"visible",required:!1,type:{name:"boolean"}},height:{defaultValue:{value:"400"},description:"Altura inicial do Object Inspector",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:{value:"500"},description:"Largura inicial do Object Inspector",name:"width",required:!1,type:{name:"number"}}}}}catch{}export{X as A};
