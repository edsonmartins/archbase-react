import{j as P,a as xe}from"./jsx-runtime-c9381026.js";import{r as p}from"./index-8b3efc3f.js";import{O as Oe,i as Ce,g as De}from"./OptionalPortal-2778d3e2.js";import{f as V,u as R,B as Te,r as Re,t as be,h as Ee,i as Fe,n as Se,o as ze}from"./polymorphic-factory-a4611e92.js";import{u as Ne}from"./DirectionProvider-1e219af7.js";import{n as Ie,u as ke,l as _e,o as Ae,s as Me,p as $,f as j,i as K,b as $e,q as je,m as Ke}from"./use-floating-auto-update-0ad8ad15.js";import{c as Le}from"./create-safe-context-941c9e18.js";import{u as Ue,F as Ve}from"./FocusTrap-03f7f7d2.js";import{T as Xe}from"./Transition-fa62c8ad.js";import{u as X}from"./use-merged-ref-add91123.js";import{u as Ye}from"./use-uncontrolled-f56237fb.js";import{u as L}from"./use-did-update-bccd292e.js";import{u as Be}from"./use-id-3df0f1f4.js";const qe=()=>{};function He(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||qe:t=>{var a;t.key==="Escape"&&(e(t),(a=r.onTrigger)==null||a.call(r))}}const U=["mousedown","touchstart"];function Ze(e,r,t){const a=p.useRef();return p.useEffect(()=>{const l=i=>{const{target:n}=i??{};if(Array.isArray(t)){const s=(n==null?void 0:n.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(n)&&n.tagName!=="HTML";t.every(f=>!!f&&!i.composedPath().includes(f))&&!s&&e()}else a.current&&!a.current.contains(n)&&e()};return(r||U).forEach(i=>document.addEventListener(i,l)),()=>{(r||U).forEach(i=>document.removeEventListener(i,l))}},[a,e,t]),a}const[Ge,Y]=Le("Popover component was not found in the tree");var B={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Je={},b=V((e,r)=>{var g,w,m,x;const t=R("PopoverDropdown",Je,e),{className:a,style:l,vars:i,children:n,onKeyDownCapture:s,variant:c,classNames:f,styles:u,...y}=t,o=Y(),v=Ue({opened:o.opened,shouldReturnFocus:o.returnFocus}),C=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},D=X(r,o.floating);return o.disabled?null:P(Oe,{...o.portalProps,withinPortal:o.withinPortal,children:P(Xe,{mounted:o.opened,...o.transitionProps,transition:((g=o.transitionProps)==null?void 0:g.transition)||"fade",duration:((w=o.transitionProps)==null?void 0:w.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((m=o.transitionProps)==null?void 0:m.exitDuration)=="number"?o.transitionProps.exitDuration:(x=o.transitionProps)==null?void 0:x.duration,children:T=>P(Ve,{active:o.trapFocus&&o.opened,innerRef:D,children:xe(Te,{...C,...y,variant:c,onKeyDownCapture:He(o.onClose,{active:o.closeOnEscape,onTrigger:v,onKeyDown:s}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:a,props:t,classNames:f,styles:u,style:[{...T,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:Re(o.width)},l]}),children:[n,P(Ie,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:f,styles:u})})]})})})})});b.classes=B;b.displayName="@mantine/core/PopoverDropdown";const Qe={refProp:"ref",popupType:"dialog"},q=V((e,r)=>{const{children:t,refProp:a,popupType:l,...i}=R("PopoverTarget",Qe,e);if(!Ce(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const n=i,s=Y(),c=X(s.reference,t.ref,r),f=s.withRoles?{"aria-haspopup":l,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return p.cloneElement(t,{...n,...f,...s.targetProps,className:be(s.targetProps.className,n.className,t.props.className),[a]:c,...s.controlled?null:{onClick:s.onToggle}})});q.displayName="@mantine/core/PopoverTarget";function We(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function eo(e,r){const t=We(e.middlewares),a=[Ae(e.offset)];return t.shift&&a.push(Me(typeof t.shift=="boolean"?{limiter:$(),padding:5}:{limiter:$(),padding:5,...t.shift})),t.flip&&a.push(typeof t.flip=="boolean"?j():j(t.flip)),t.inline&&a.push(typeof t.inline=="boolean"?K():K(t.inline)),a.push($e({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&a.push(je({...typeof t.size=="boolean"?{}:t.size,apply({rects:l,availableWidth:i,availableHeight:n,...s}){var u;const f=((u=r().refs.floating.current)==null?void 0:u.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:l,availableWidth:i,availableHeight:n,...s}):Object.assign(f,{maxWidth:`${i}px`,maxHeight:`${n}px`})),e.width==="target"&&Object.assign(f,{width:`${l.reference.width}px`})}})),a}function oo(e){const[r,t,a]=Ye({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),l=()=>{var s;r&&(!a&&((s=e.onClose)==null||s.call(e)),t(!1))},i=()=>{var s,c;r?((s=e.onClose)==null||s.call(e),t(!1)):((c=e.onOpen)==null||c.call(e),t(!0))},n=ke({strategy:e.strategy,placement:e.position,middleware:eo(e,()=>n)});return _e({opened:r,position:e.position,positionDependencies:e.positionDependencies||[],floating:n}),L(()=>{var s;(s=e.onPositionChange)==null||s.call(e,n.placement)},[n.placement]),L(()=>{var s,c;e.opened?(c=e.onOpen)==null||c.call(e):(s=e.onClose)==null||s.call(e)},[e.opened,a]),{floating:n,controlled:typeof e.opened=="boolean",opened:r,onClose:l,onToggle:i}}const to={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:De("popover"),__staticSelector:"Popover",width:"max-content"},ro=Fe((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:Se(r),"--popover-shadow":ze(t)}}));function O(e){var N,I,k,_,A,M;const r=R("Popover",to,e),{children:t,position:a,offset:l,onPositionChange:i,positionDependencies:n,opened:s,transitionProps:c,width:f,middlewares:u,withArrow:y,arrowSize:o,arrowOffset:v,arrowRadius:C,arrowPosition:D,unstyled:g,classNames:w,styles:m,closeOnClickOutside:x,withinPortal:T,portalProps:H,closeOnEscape:Z,clickOutsideEvents:G,trapFocus:J,onClose:Q,onOpen:W,onChange:ee,zIndex:oe,radius:te,shadow:re,id:se,defaultOpened:ae,__staticSelector:E,withRoles:ne,disabled:ie,returnFocus:le,variant:de,keepMounted:ce,vars:fe,floatingStrategy:F,...pe}=r,ue=Ee({name:E,props:r,classes:B,classNames:w,styles:m,unstyled:g,rootSelector:"dropdown",vars:fe,varsResolver:ro}),S=p.useRef(null),[ge,we]=p.useState(null),[me,he]=p.useState(null),{dir:Pe}=Ne(),z=Be(se),d=oo({middlewares:u,width:f,position:Ke(Pe,a),offset:typeof l=="number"?l+(y?o/2:0):l,arrowRef:S,arrowOffset:v,onPositionChange:i,positionDependencies:n,opened:s,defaultOpened:ae,onChange:ee,onOpen:W,onClose:Q,strategy:F});Ze(()=>x&&d.onClose(),G,[ge,me]);const ye=p.useCallback(h=>{we(h),d.floating.refs.setReference(h)},[d.floating.refs.setReference]),ve=p.useCallback(h=>{he(h),d.floating.refs.setFloating(h)},[d.floating.refs.setFloating]);return P(Ge,{value:{returnFocus:le,disabled:ie,controlled:d.controlled,reference:ye,floating:ve,x:d.floating.x,y:d.floating.y,arrowX:(k=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:k.x,arrowY:(M=(A=(_=d.floating)==null?void 0:_.middlewareData)==null?void 0:A.arrow)==null?void 0:M.y,opened:d.opened,arrowRef:S,transitionProps:c,width:f,withArrow:y,arrowSize:o,arrowOffset:v,arrowRadius:C,arrowPosition:D,placement:d.floating.placement,trapFocus:J,withinPortal:T,portalProps:H,zIndex:oe,radius:te,shadow:re,closeOnEscape:Z,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${z}-target`,getDropdownId:()=>`${z}-dropdown`,withRoles:ne,targetProps:pe,__staticSelector:E,classNames:w,styles:m,unstyled:g,variant:de,keepMounted:ce,getStyles:ue,floatingStrategy:F},children:t})}O.Target=q;O.Dropdown=b;O.displayName="@mantine/core/Popover";O.extend=e=>e;export{O as P};
