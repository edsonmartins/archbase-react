import{j as c}from"./jsx-runtime-c9381026.js";import{r}from"./index-8b3efc3f.js";import{b as H,c as S,d as P}from"./useArchbaseDataSource-c5d317be.js";import{b as W}from"./polymorphic-factory-8fbd487e.js";import{u as G}from"./use-mantine-color-scheme-bbd48c20.js";import{u as J}from"./use-force-update-11fe72c1.js";import{D as l}from"./useArchbaseDataSourceListener-92dd263c.js";import{T as Q}from"./TextInput-1c7cbb5e.js";import{T as X}from"./Tooltip-ae0da36b.js";import{A as Y}from"./ActionIcon-3fa09022.js";function g({dataSource:a,dataField:n,disabled:C=!1,readOnly:p=!1,style:A,placeholder:D,label:I,description:x,error:o,required:T,size:w,width:R,innerRef:F,value:L,icon:O,onKeyDown:_,onKeyUp:z,onActionSearchExecute:f,tooltipIconSearch:U="Clique aqui para Localizar",onFocusExit:m=()=>{},onFocusEnter:y=()=>{},onChangeValue:v=()=>{},variant:h}){const[d,E]=r.useState(L||""),k=r.useRef(),t=W(),{colorScheme:N}=G(),[q,s]=r.useState(o),j=J();r.useEffect(()=>{s(void 0)},[d]),r.useEffect(()=>{o!==q&&s(o)},[o]);const i=()=>{let e=d;a&&n&&(e=a.getFieldValue(n),e||(e="")),E(e)},V=r.useCallback(()=>{i()},[]),b=r.useCallback(e=>{a&&n&&((e.type===l.dataChanged||e.type===l.recordChanged||e.type===l.afterScroll||e.type===l.afterCancel||e.type===l.afterEdit)&&(i(),j()),e.type===l.onFieldError&&e.fieldName===n&&s(e.error))},[]);H(()=>{i(),a&&n&&(a.addListener(b),a.addFieldChangeListener(n,V))}),S(()=>{i()},[]);const K=e=>{e.preventDefault();const u=e.target.value;e.persist(),E($=>u),a&&!a.isBrowsing()&&n&&a.getFieldValue(n)!==u&&a.setFieldValue(n,u),v&&v(u,e)};P(()=>{a&&n&&(a.removeListener(b),a.removeFieldChangeListener(n,V))});const M=e=>{m&&m(e)},B=e=>{y&&y(e)};return c(Q,{disabled:C,readOnly:(()=>{let e=p;return a&&!p&&(e=a.isBrowsing()),e})(),type:"text",size:w,style:{width:R,...A},value:d,ref:F||k,required:T,onChange:K,onBlur:M,onFocus:B,placeholder:D,description:x,onKeyDown:_,onKeyUp:z,label:I,error:q,rightSection:f?c(X,{withinPortal:!0,withArrow:!0,label:U,children:c(Y,{style:{backgroundColor:h==="filled"?N==="dark"?t.colors[t.primaryColor][5]:t.colors[t.primaryColor][6]:void 0},tabIndex:-1,variant:h,onClick:f,children:O})}):null})}try{g.displayName="ArchbaseEdit",g.__docgenInfo={description:"",displayName:"ArchbaseEdit",props:{dataSource:{defaultValue:null,description:"Fonte de dados onde será atribuido o valor do edit",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataField:{defaultValue:null,description:"Campo onde deverá ser atribuido o valor do edit na fonte de dados",name:"dataField",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Indicador se o edit está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Indicador se o edit é somente leitura. Obs: usado em conjunto com o status da fonte de dados",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"Indicador se o preenchimento do edit é obrigatório",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Valor inicial",name:"value",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Estilo do edit",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"Tamanho do edit",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},width:{defaultValue:null,description:"Largura do edit",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"Icone à direita",name:"icon",required:!1,type:{name:"ReactNode"}},tooltipIconSearch:{defaultValue:{value:"Clique aqui para Localizar"},description:"Dica para botão localizar",name:"tooltipIconSearch",required:!1,type:{name:"string"}},onActionSearchExecute:{defaultValue:null,description:"Evento ocorre quando clica no botão localizar",name:"onActionSearchExecute",required:!1,type:{name:"() => void"}},placeholder:{defaultValue:null,description:"Texto sugestão do edit",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Título do edit",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Descrição do edit",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Último erro ocorrido no edit",name:"error",required:!1,type:{name:"string"}},onFocusExit:{defaultValue:{value:"() => {}"},description:"Evento quando o foco sai do edit",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<T>"}},onFocusEnter:{defaultValue:{value:"() => {}"},description:"Evento quando o edit recebe o foco",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<T>"}},onChangeValue:{defaultValue:{value:"() => {}"},description:"Evento quando o valor do edit é alterado",name:"onChangeValue",required:!1,type:{name:"(value: any, event: any) => void"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"(event: any) => void"}},onKeyUp:{defaultValue:null,description:"",name:"onKeyUp",required:!1,type:{name:"(event: any) => void"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"light"'},{value:'"filled"'},{value:'"outline"'},{value:'"default"'},{value:'"transparent"'},{value:'"white"'},{value:'"subtle"'},{value:'"gradient"'}]}}}}}catch{}export{g as A};
