import{j as h,a as z}from"./jsx-runtime-c9381026.js";import{r as g}from"./index-8b3efc3f.js";import{f as se,c as re}from"./create-scoped-keydown-handler-870d0701.js";import{u as ae}from"./use-resolved-styles-api-64b284e6.js";import{f as A,u as C,B as G,p as ce,b as ie,a as le,h as de}from"./polymorphic-factory-531d6b2a.js";import{P as K}from"./Popover-f874fd0b.js";import{c as ue}from"./create-safe-context-941c9e18.js";import{u as J}from"./use-merged-ref-a374cf59.js";import{u as me}from"./DirectionProvider-1e219af7.js";import{U as pe}from"./UnstyledButton-6b18191a.js";import{i as fe}from"./OptionalPortal-77226e4d.js";import{u as ve}from"./use-uncontrolled-f56237fb.js";import{u as he}from"./use-did-update-bccd292e.js";function u(n,t){return o=>{n==null||n(o),t==null||t(o)}}function ge(n,t,o){var r;return o?Array.from(((r=se(o,t))==null?void 0:r.querySelectorAll(n))||[]).findIndex(a=>a===o):null}function we(){const[n,t]=g.useState(-1);return[n,{setHovered:t,resetHovered:()=>t(-1)}]}function ye({open:n,close:t,openDelay:o,closeDelay:r}){const a=g.useRef(-1),e=g.useRef(-1),i=()=>{window.clearTimeout(a.current),window.clearTimeout(e.current)},c=()=>{i(),o===0||o===void 0?n():a.current=window.setTimeout(n,o)},l=()=>{i(),r===0||r===void 0?t():e.current=window.setTimeout(t,r)};return g.useEffect(()=>i,[]),{openDropdown:c,closeDropdown:l}}const[Me,P]=ue("Menu component was not found in the tree");var N={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const De={},V=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,...c}=C("MenuDivider",De,n),l=P();return h(G,{ref:t,...l.getStyles("divider",{className:r,style:a,styles:e,classNames:o}),...c})});V.classes=N;V.displayName="@mantine/core/MenuDivider";const Ie={},$=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,onMouseEnter:c,onMouseLeave:l,onKeyDown:w,children:b,...x}=C("MenuDropdown",Ie,n),m=g.useRef(null),d=P(),k=u(w,p=>{var f,T;(p.key==="ArrowUp"||p.key==="ArrowDown")&&(p.preventDefault(),(T=(f=m.current)==null?void 0:f.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||T.focus())}),s=u(c,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),y=u(l,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return z(K.Dropdown,{...x,onMouseEnter:s,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:J(t,m),...d.getStyles("dropdown",{className:r,style:a,styles:e,classNames:o,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:k,children:[d.withInitialFocusPlaceholder&&h("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),b]})});$.classes=N;$.displayName="@mantine/core/MenuDropdown";const be={},U=ce((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,color:c,closeMenuOnClick:l,leftSection:w,rightSection:b,children:x,disabled:m,"data-disabled":d,...k}=C("MenuItem",be,n),s=P(),y=ie(),{dir:p}=me(),f=g.useRef(null),T=s.getItemIndex(f.current),I=k,L=u(I.onMouseLeave,()=>s.setHovered(-1)),_=u(I.onMouseEnter,()=>s.setHovered(s.getItemIndex(f.current))),F=u(I.onClick,()=>{d||(typeof l=="boolean"?l&&s.closeDropdownImmediately():s.closeOnItemClick&&s.closeDropdownImmediately())}),O=u(I.onFocus,()=>s.setHovered(s.getItemIndex(f.current))),M=c?y.variantColorResolver({color:c,theme:y,variant:"light"}):void 0,v=c?le({color:c,theme:y}):null;return z(pe,{...k,unstyled:s.unstyled,tabIndex:s.menuItemTabIndex,onFocus:O,...s.getStyles("item",{className:r,style:a,styles:e,classNames:o}),ref:J(f,t),role:"menuitem",disabled:m,"data-menu-item":!0,"data-disabled":m||d||void 0,"data-hovered":s.hovered===T?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:_,onMouseLeave:L,onClick:F,onKeyDown:re({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:s.loop,dir:p,orientation:"vertical",onKeyDown:I.onKeyDown}),__vars:{"--menu-item-color":v!=null&&v.isThemeColor&&(v==null?void 0:v.shade)===void 0?`var(--mantine-color-${v.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[w&&h("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"left",children:w}),x&&h("div",{...s.getStyles("itemLabel",{styles:e,classNames:o}),children:x}),b&&h("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"right",children:b})]})});U.classes=N;U.displayName="@mantine/core/MenuItem";const xe={},H=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,...c}=C("MenuLabel",xe,n),l=P();return h(G,{ref:t,...l.getStyles("label",{className:r,style:a,styles:e,classNames:o}),...c})});H.classes=N;H.displayName="@mantine/core/MenuLabel";const ke={refProp:"ref"},Q=g.forwardRef((n,t)=>{const{children:o,refProp:r,...a}=C("MenuTarget",ke,n);if(!fe(o))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const e=P(),i=o.props,c=u(i.onClick,()=>{e.trigger==="click"?e.toggleDropdown():e.trigger==="click-hover"&&(e.setOpenedViaClick(!0),e.opened||e.openDropdown())}),l=u(i.onMouseEnter,()=>(e.trigger==="hover"||e.trigger==="click-hover")&&e.openDropdown()),w=u(i.onMouseLeave,()=>{(e.trigger==="hover"||e.trigger==="click-hover"&&!e.openedViaClick)&&e.closeDropdown()});return h(K.Target,{refProp:r,popupType:"menu",ref:t,...a,children:g.cloneElement(o,{onClick:c,onMouseEnter:l,onMouseLeave:w,"data-expanded":e.opened?!0:void 0})})});Q.displayName="@mantine/core/MenuTarget";const Se={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function D(n){const t=C("Menu",Se,n),{children:o,onOpen:r,onClose:a,opened:e,defaultOpened:i,trapFocus:c,onChange:l,closeOnItemClick:w,loop:b,closeOnEscape:x,trigger:m,openDelay:d,closeDelay:k,classNames:s,styles:y,unstyled:p,variant:f,vars:T,menuItemTabIndex:I,keepMounted:L,withInitialFocusPlaceholder:_,...F}=t,O=de({name:"Menu",classes:N,props:t,classNames:s,styles:y,unstyled:p}),[M,{setHovered:v,resetHovered:W}]=we(),[S,j]=ve({value:e,defaultValue:i,finalValue:!1,onChange:l}),[X,B]=g.useState(!1),E=()=>{j(!1),B(!1),S&&(a==null||a())},R=()=>{j(!0),!S&&(r==null||r())},q=()=>{S?E():R()},{openDropdown:Y,closeDropdown:Z}=ye({open:R,close:E,closeDelay:k,openDelay:d}),ee=ne=>ge("[data-menu-item]","[data-menu-dropdown]",ne),{resolvedClassNames:oe,resolvedStyles:te}=ae({classNames:s,styles:y,props:t});return he(()=>{W()},[S]),h(Me,{value:{getStyles:O,opened:S,toggleDropdown:q,getItemIndex:ee,hovered:M,setHovered:v,openedViaClick:X,setOpenedViaClick:B,closeOnItemClick:w,closeDropdown:m==="click"?E:Z,openDropdown:m==="click"?R:Y,closeDropdownImmediately:E,loop:b,trigger:m,unstyled:p,menuItemTabIndex:I,withInitialFocusPlaceholder:_},children:h(K,{...F,opened:S,onChange:q,defaultOpened:i,trapFocus:L?!1:c,closeOnEscape:x,__staticSelector:"Menu",classNames:oe,styles:te,unstyled:p,variant:f,keepMounted:L,children:o})})}D.extend=n=>n;D.classes=N;D.displayName="@mantine/core/Menu";D.Item=U;D.Label=H;D.Dropdown=$;D.Target=Q;D.Divider=V;export{D as M,u as c};
