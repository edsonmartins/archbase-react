import{j as h,a as xe}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{O as Oe,i as De,g as Ce}from"./OptionalPortal-9514e460.js";import{f as U,u as b,B as Te,r as be,t as Re,h as Ee,i as Fe,n as Se,o as Ne}from"./polymorphic-factory-8fbd487e.js";import{u as Ie}from"./DirectionProvider-1e219af7.js";import{n as ze,u as ke,l as _e,o as Ae,s as Me,p as M,f as $,i as j,b as $e,q as je,m as Ke}from"./use-floating-auto-update-3fafcba2.js";import{c as Le}from"./create-safe-context-941c9e18.js";import{u as Ue,F as Ve}from"./FocusTrap-c39ce1bd.js";import{T as Xe}from"./Transition-1b2bc7c1.js";import{u as V}from"./use-merged-ref-add91123.js";import{u as Ye}from"./use-uncontrolled-f56237fb.js";import{u as K}from"./use-did-update-bccd292e.js";import{u as Be}from"./use-id-3df0f1f4.js";const He=()=>{};function qe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||He:r=>{var s;r.key==="Escape"&&(e(r),(s=t.onTrigger)==null||s.call(t))}}const L=["mousedown","touchstart"];function We(e,t,r){const s=u.useRef();return u.useEffect(()=>{const l=i=>{const{target:a}=i??{};if(Array.isArray(r)){const n=(a==null?void 0:a.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(a)&&a.tagName!=="HTML";r.every(c=>!!c&&!i.composedPath().includes(c))&&!n&&e()}else s.current&&!s.current.contains(a)&&e()};return(t||L).forEach(i=>document.addEventListener(i,l)),()=>{(t||L).forEach(i=>document.removeEventListener(i,l))}},[s,e,r]),s}const[Ze,X]=Le("Popover component was not found in the tree");var Y={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Ge={},R=U((e,t)=>{var p,g,w,x;const r=b("PopoverDropdown",Ge,e),{className:s,style:l,vars:i,children:a,onKeyDownCapture:n,variant:f,classNames:c,styles:P,...v}=r,o=X(),y=Ue({opened:o.opened,shouldReturnFocus:o.returnFocus}),D=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},C=V(t,o.floating);return o.disabled?null:h(Oe,{...o.portalProps,withinPortal:o.withinPortal,children:h(Xe,{mounted:o.opened,...o.transitionProps,transition:((p=o.transitionProps)==null?void 0:p.transition)||"fade",duration:((g=o.transitionProps)==null?void 0:g.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((w=o.transitionProps)==null?void 0:w.exitDuration)=="number"?o.transitionProps.exitDuration:(x=o.transitionProps)==null?void 0:x.duration,children:T=>h(Ve,{active:o.trapFocus,children:xe(Te,{...D,...v,variant:f,ref:C,onKeyDownCapture:qe(o.onClose,{active:o.closeOnEscape,onTrigger:y,onKeyDown:n}),"data-position":o.placement,...o.getStyles("dropdown",{className:s,props:r,classNames:c,styles:P,style:[{...T,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:be(o.width)},l]}),children:[a,h(ze,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:r,classNames:c,styles:P})})]})})})})});R.classes=Y;R.displayName="@mantine/core/PopoverDropdown";const Je={refProp:"ref",popupType:"dialog"},B=U((e,t)=>{const{children:r,refProp:s,popupType:l,...i}=b("PopoverTarget",Je,e);if(!De(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,n=X(),f=V(n.reference,r.ref,t),c=n.withRoles?{"aria-haspopup":l,"aria-expanded":n.opened,"aria-controls":n.getDropdownId(),id:n.getTargetId()}:{};return u.cloneElement(r,{...a,...c,...n.targetProps,className:Re(n.targetProps.className,a.className,r.props.className),[s]:f,...n.controlled?null:{onClick:n.onToggle}})});B.displayName="@mantine/core/PopoverTarget";function Qe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function eo(e,t){const r=Qe(e.middlewares),s=[Ae(e.offset)];return r.shift&&s.push(Me(typeof r.shift=="boolean"?{limiter:M(),padding:5}:{limiter:M(),padding:5,...r.shift})),r.flip&&s.push(typeof r.flip=="boolean"?$():$(r.flip)),r.inline&&s.push(typeof r.inline=="boolean"?j():j(r.inline)),s.push($e({element:e.arrowRef,padding:e.arrowOffset})),(r.size||e.width==="target")&&s.push(je({...typeof r.size=="boolean"?{}:r.size,apply({rects:l,availableWidth:i,availableHeight:a}){var c;const f=((c=t().refs.floating.current)==null?void 0:c.style)??{};r.size&&Object.assign(f,{maxWidth:`${i}px`,maxHeight:`${a}px`}),e.width==="target"&&Object.assign(f,{width:`${l.reference.width}px`})}})),s}function oo(e){const[t,r]=Ye({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),s=()=>{var a;t&&((a=e.onClose)==null||a.call(e),r(!1))},l=()=>{var a,n;t?((a=e.onClose)==null||a.call(e),r(!1)):((n=e.onOpen)==null||n.call(e),r(!0))},i=ke({strategy:e.strategy,placement:e.position,middleware:eo(e,()=>i)});return _e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),K(()=>{var a;(a=e.onPositionChange)==null||a.call(e,i.placement)},[i.placement]),K(()=>{var a,n;e.opened?(n=e.onOpen)==null||n.call(e):(a=e.onClose)==null||a.call(e)},[e.opened]),{floating:i,controlled:typeof e.opened=="boolean",opened:t,onClose:s,onToggle:l}}const ro={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ce("popover"),__staticSelector:"Popover",width:"max-content"},to=Fe((e,{radius:t,shadow:r})=>({dropdown:{"--popover-radius":t===void 0?void 0:Se(t),"--popover-shadow":Ne(r)}}));function O(e){var N,I,z,k,_,A;const t=b("Popover",ro,e),{children:r,position:s,offset:l,onPositionChange:i,positionDependencies:a,opened:n,transitionProps:f,width:c,middlewares:P,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:D,arrowPosition:C,unstyled:p,classNames:g,styles:w,closeOnClickOutside:x,withinPortal:T,portalProps:H,closeOnEscape:q,clickOutsideEvents:W,trapFocus:Z,onClose:G,onOpen:J,onChange:Q,zIndex:ee,radius:oe,shadow:re,id:te,defaultOpened:ae,__staticSelector:E,withRoles:se,disabled:ne,returnFocus:ie,variant:le,keepMounted:de,vars:ce,floatingStrategy:fe,...ue}=t,pe=Ee({name:E,props:t,classes:Y,classNames:g,styles:w,unstyled:p,rootSelector:"dropdown",vars:ce,varsResolver:to}),F=u.useRef(null),[ge,we]=u.useState(null),[me,he]=u.useState(null),{dir:Pe}=Ie(),S=Be(te),d=oo({middlewares:P,width:c,position:Ke(Pe,s),offset:typeof l=="number"?l+(v?o/2:0):l,arrowRef:F,arrowOffset:y,onPositionChange:i,positionDependencies:a,opened:n,defaultOpened:ae,onChange:Q,onOpen:J,onClose:G,strategy:fe});We(()=>x&&d.onClose(),W,[ge,me]);const ve=u.useCallback(m=>{we(m),d.floating.refs.setReference(m)},[d.floating.refs.setReference]),ye=u.useCallback(m=>{he(m),d.floating.refs.setFloating(m)},[d.floating.refs.setFloating]);return h(Ze,{value:{returnFocus:ie,disabled:ne,controlled:d.controlled,reference:ve,floating:ye,x:d.floating.x,y:d.floating.y,arrowX:(z=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:z.x,arrowY:(A=(_=(k=d.floating)==null?void 0:k.middlewareData)==null?void 0:_.arrow)==null?void 0:A.y,opened:d.opened,arrowRef:F,transitionProps:f,width:c,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:D,arrowPosition:C,placement:d.floating.placement,trapFocus:Z,withinPortal:T,portalProps:H,zIndex:ee,radius:oe,shadow:re,closeOnEscape:q,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${S}-target`,getDropdownId:()=>`${S}-dropdown`,withRoles:se,targetProps:ue,__staticSelector:E,classNames:g,styles:w,unstyled:p,variant:le,keepMounted:de,getStyles:pe},children:r})}O.Target=B;O.Dropdown=R;O.displayName="@mantine/core/Popover";O.extend=e=>e;export{O as P};
