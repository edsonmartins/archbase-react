import{r as c}from"./index-8b3efc3f.js";import{u as E}from"./use-did-update-bccd292e.js";import{j as m}from"./jsx-runtime-c9381026.js";import{i as g}from"./OptionalPortal-9514e460.js";import{f as h,u as I,h as x,B as w}from"./polymorphic-factory-8fbd487e.js";import{r as F}from"./use-id-3df0f1f4.js";import{u as R}from"./use-merged-ref-add91123.js";function G({opened:t,shouldReturnFocus:n=!0}){const e=c.useRef(),o=()=>{var r;e.current&&"focus"in e.current&&typeof e.current.focus=="function"&&((r=e.current)==null||r.focus({preventScroll:!0}))};return E(()=>{let r=-1;const i=a=>{a.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",i),t?e.current=document.activeElement:n&&(r=window.setTimeout(o,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",i)}},[t,n]),o}function H(t,n="body > :not(script)"){const e=F(),o=Array.from(document.querySelectorAll(n)).map(r=>{var s;if((s=r==null?void 0:r.shadowRoot)!=null&&s.contains(t)||r.contains(t))return;const i=r.getAttribute("aria-hidden"),a=r.getAttribute("data-hidden"),u=r.getAttribute("data-focus-id");return r.setAttribute("data-focus-id",e),i===null||i==="false"?r.setAttribute("aria-hidden","true"):!a&&!u&&r.setAttribute("data-hidden",i),{node:r,ariaHidden:a||null}});return()=>{o.forEach(r=>{!r||e!==r.node.getAttribute("data-focus-id")||(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden),r.node.removeAttribute("data-focus-id"),r.node.removeAttribute("data-hidden"))})}}const S=/input|select|textarea|button|object/,p="a, input, select, textarea, button, object, [tabindex]";function k(t){return t.style.display==="none"}function L(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let e=t;for(;e&&!(e===document.body||e.nodeType===11);){if(k(e))return!1;e=e.parentNode}return!0}function y(t){let n=t.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function l(t){const n=t.nodeName.toLowerCase(),e=!Number.isNaN(y(t));return(S.test(n)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||e)&&L(t)}function A(t){const n=y(t);return(Number.isNaN(n)||n>=0)&&l(t)}function D(t){return Array.from(t.querySelectorAll(p)).filter(A)}function B(t,n){const e=D(t);if(!e.length){n.preventDefault();return}const o=e[n.shiftKey?0:e.length-1],r=t.getRootNode();let i=o===r.activeElement||t===r.activeElement;const a=r.activeElement;if(a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(i=e.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===a.getAttribute("name")).includes(o)),!i)return;n.preventDefault();const s=e[n.shiftKey?e.length-1:0];s&&s.focus()}function j(t=!0){const n=c.useRef(),e=c.useRef(null),o=i=>{let a=i.querySelector("[data-autofocus]");if(!a){const u=Array.from(i.querySelectorAll(p));a=u.find(A)||u.find(l)||null,!a&&l(i)&&(a=i)}a&&a.focus({preventScroll:!0})},r=c.useCallback(i=>{if(t){if(i===null){e.current&&(e.current(),e.current=null);return}e.current=H(i),n.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&o(i)}),n.current=i):n.current=null)}},[t]);return c.useEffect(()=>{if(!t)return;n.current&&setTimeout(()=>o(n.current));const i=a=>{a.key==="Tab"&&n.current&&B(n.current,a)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),e.current&&e.current()}},[t]),r}var N={root:"m_515a97f8"};const q={},f=h((t,n)=>{const e=I("VisuallyHidden",q,t),{classNames:o,className:r,style:i,styles:a,unstyled:u,vars:s,...b}=e,d=x({name:"VisuallyHidden",classes:N,props:e,className:r,style:i,classNames:o,styles:a,unstyled:u});return m(w,{component:"span",ref:n,...d("root"),...b})});f.classes=N;f.displayName="@mantine/core/VisuallyHidden";function T({children:t,active:n=!0,refProp:e="ref",innerRef:o}){const r=j(n),i=R(r,o);return g(t)?c.cloneElement(t,{[e]:i}):t}function v(t){return m(f,{tabIndex:-1,"data-autofocus":!0,...t})}T.displayName="@mantine/core/FocusTrap";v.displayName="@mantine/core/FocusTrapInitialFocus";T.InitialFocus=v;export{T as F,G as u};
