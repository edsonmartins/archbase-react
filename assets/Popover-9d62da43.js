import{j as P,a as Oe}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{O as Re,i as De,g as Te}from"./OptionalPortal-f36e0e00.js";import{f as V,u as C,B as Ce,r as be,t as Se,h as Ee,i as Fe,n as ze,o as Ne}from"./polymorphic-factory-0a97ecf2.js";import{u as Ie}from"./use-resolved-styles-api-40413a9b.js";import{u as ke}from"./DirectionProvider-1e219af7.js";import{p as Ae,a as _e,u as Me,m as $e,o as je,s as Ke,q as $,f as j,i as K,c as Le,r as Ue,n as Ve}from"./use-floating-auto-update-0465e879.js";import{c as Xe}from"./create-safe-context-941c9e18.js";import{u as Ye,F as Be}from"./FocusTrap-ede29d16.js";import{T as qe}from"./Transition-3881f4fd.js";import{u as X}from"./use-merged-ref-add91123.js";import{u as He}from"./use-uncontrolled-f56237fb.js";import{u as L}from"./use-did-update-bccd292e.js";import{u as Ze}from"./use-id-3df0f1f4.js";const Ge=()=>{};function Je(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||Ge:t=>{var s;t.key==="Escape"&&(e(t),(s=r.onTrigger)==null||s.call(r))}}const U=["mousedown","touchstart"];function Qe(e,r,t){const s=u.useRef();return u.useEffect(()=>{const l=i=>{const{target:a}=i??{};if(Array.isArray(t)){const n=(a==null?void 0:a.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(a)&&a.tagName!=="HTML";t.every(c=>!!c&&!i.composedPath().includes(c))&&!n&&e()}else s.current&&!s.current.contains(a)&&e()};return(r||U).forEach(i=>document.addEventListener(i,l)),()=>{(r||U).forEach(i=>document.removeEventListener(i,l))}},[s,e,t]),s}const[We,Y]=Xe("Popover component was not found in the tree");var B={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const eo={},b=V((e,r)=>{var m,g,w,x;const t=C("PopoverDropdown",eo,e),{className:s,style:l,vars:i,children:a,onKeyDownCapture:n,variant:p,classNames:c,styles:f,...v}=t,o=Y(),y=Ye({opened:o.opened,shouldReturnFocus:o.returnFocus}),R=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},D=X(r,o.floating);return o.disabled?null:P(Re,{...o.portalProps,withinPortal:o.withinPortal,children:P(qe,{mounted:o.opened,...o.transitionProps,transition:((m=o.transitionProps)==null?void 0:m.transition)||"fade",duration:((g=o.transitionProps)==null?void 0:g.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((w=o.transitionProps)==null?void 0:w.exitDuration)=="number"?o.transitionProps.exitDuration:(x=o.transitionProps)==null?void 0:x.duration,children:T=>P(Be,{active:o.trapFocus&&o.opened,innerRef:D,children:Oe(Ce,{...R,...v,variant:p,onKeyDownCapture:Je(o.onClose,{active:o.closeOnEscape,onTrigger:y,onKeyDown:n}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:s,props:t,classNames:c,styles:f,style:[{...T,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:be(o.width)},o.resolvedStyles.dropdown,f==null?void 0:f.dropdown,l]}),children:[a,P(Ae,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:c,styles:f})})]})})})})});b.classes=B;b.displayName="@mantine/core/PopoverDropdown";const oo={refProp:"ref",popupType:"dialog"},q=V((e,r)=>{const{children:t,refProp:s,popupType:l,...i}=C("PopoverTarget",oo,e);if(!De(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=i,n=Y(),p=X(n.reference,_e(t),r),c=n.withRoles?{"aria-haspopup":l,"aria-expanded":n.opened,"aria-controls":n.getDropdownId(),id:n.getTargetId()}:{};return u.cloneElement(t,{...a,...c,...n.targetProps,className:Se(n.targetProps.className,a.className,t.props.className),[s]:p,...n.controlled?null:{onClick:n.onToggle}})});q.displayName="@mantine/core/PopoverTarget";function to(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function ro(e,r){const t=to(e.middlewares),s=[je(e.offset)];return t.shift&&s.push(Ke(typeof t.shift=="boolean"?{limiter:$(),padding:5}:{limiter:$(),padding:5,...t.shift})),t.flip&&s.push(typeof t.flip=="boolean"?j():j(t.flip)),t.inline&&s.push(typeof t.inline=="boolean"?K():K(t.inline)),s.push(Le({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&s.push(Ue({...typeof t.size=="boolean"?{}:t.size,apply({rects:l,availableWidth:i,availableHeight:a,...n}){var f;const c=((f=r().refs.floating.current)==null?void 0:f.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:l,availableWidth:i,availableHeight:a,...n}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${a}px`})),e.width==="target"&&Object.assign(c,{width:`${l.reference.width}px`})}})),s}function so(e){const[r,t]=He({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),s=u.useRef(r),l=()=>{r&&t(!1)},i=()=>t(!r),a=Me({strategy:e.strategy,placement:e.position,middleware:ro(e,()=>a)});return $e({opened:r,position:e.position,positionDependencies:e.positionDependencies||[],floating:a}),L(()=>{var n;(n=e.onPositionChange)==null||n.call(e,a.placement)},[a.placement]),L(()=>{var n,p;r!==s.current&&(r?(p=e.onOpen)==null||p.call(e):(n=e.onClose)==null||n.call(e)),s.current=r},[r,e.onClose,e.onOpen]),{floating:a,controlled:typeof e.opened=="boolean",opened:r,onClose:l,onToggle:i}}const no={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Te("popover"),__staticSelector:"Popover",width:"max-content"},ao=Fe((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:ze(r),"--popover-shadow":Ne(t)}}));function O(e){var N,I,k,A,_,M;const r=C("Popover",no,e),{children:t,position:s,offset:l,onPositionChange:i,positionDependencies:a,opened:n,transitionProps:p,width:c,middlewares:f,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:R,arrowPosition:D,unstyled:m,classNames:g,styles:w,closeOnClickOutside:x,withinPortal:T,portalProps:H,closeOnEscape:Z,clickOutsideEvents:G,trapFocus:J,onClose:Q,onOpen:W,onChange:ee,zIndex:oe,radius:te,shadow:re,id:se,defaultOpened:ne,__staticSelector:S,withRoles:ae,disabled:ie,returnFocus:le,variant:de,keepMounted:ce,vars:pe,floatingStrategy:E,...fe}=r,ue=Ee({name:S,props:r,classes:B,classNames:g,styles:w,unstyled:m,rootSelector:"dropdown",vars:pe,varsResolver:ao}),{resolvedStyles:ge}=Ie({classNames:g,styles:w,props:r}),F=u.useRef(null),[we,me]=u.useState(null),[he,Pe]=u.useState(null),{dir:ve}=ke(),z=Ze(se),d=so({middlewares:f,width:c,position:Ve(ve,s),offset:typeof l=="number"?l+(v?o/2:0):l,arrowRef:F,arrowOffset:y,onPositionChange:i,positionDependencies:a,opened:n,defaultOpened:ne,onChange:ee,onOpen:W,onClose:Q,strategy:E});Qe(()=>x&&d.onClose(),G,[we,he]);const ye=u.useCallback(h=>{me(h),d.floating.refs.setReference(h)},[d.floating.refs.setReference]),xe=u.useCallback(h=>{Pe(h),d.floating.refs.setFloating(h)},[d.floating.refs.setFloating]);return P(We,{value:{returnFocus:le,disabled:ie,controlled:d.controlled,reference:ye,floating:xe,x:d.floating.x,y:d.floating.y,arrowX:(k=(I=(N=d.floating)==null?void 0:N.middlewareData)==null?void 0:I.arrow)==null?void 0:k.x,arrowY:(M=(_=(A=d.floating)==null?void 0:A.middlewareData)==null?void 0:_.arrow)==null?void 0:M.y,opened:d.opened,arrowRef:F,transitionProps:p,width:c,withArrow:v,arrowSize:o,arrowOffset:y,arrowRadius:R,arrowPosition:D,placement:d.floating.placement,trapFocus:J,withinPortal:T,portalProps:H,zIndex:oe,radius:te,shadow:re,closeOnEscape:Z,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${z}-target`,getDropdownId:()=>`${z}-dropdown`,withRoles:ae,targetProps:fe,__staticSelector:S,classNames:g,styles:w,unstyled:m,variant:de,keepMounted:ce,getStyles:ue,resolvedStyles:ge,floatingStrategy:E},children:t})}O.Target=q;O.Dropdown=b;O.displayName="@mantine/core/Popover";O.extend=e=>e;export{O as P};
