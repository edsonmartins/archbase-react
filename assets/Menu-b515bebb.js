import{j as f,a as q}from"./jsx-runtime-c9381026.js";import{r as v}from"./index-8b3efc3f.js";import{f as ne,c as se}from"./create-scoped-keydown-handler-870d0701.js";import{u as re}from"./use-resolved-styles-api-77b93510.js";import{f as F,u as C,B as z,p as ae,b as ce,a as ie,h as le}from"./polymorphic-factory-f5c952a9.js";import{P as A}from"./Popover-772b0d3b.js";import{c as de}from"./create-safe-context-941c9e18.js";import{u as G}from"./use-merged-ref-add91123.js";import{u as ue}from"./DirectionProvider-1e219af7.js";import{U as me}from"./UnstyledButton-5ed8db2e.js";import{i as pe}from"./OptionalPortal-a9cf30f8.js";import{u as fe}from"./use-uncontrolled-f56237fb.js";import{u as ve}from"./use-did-update-bccd292e.js";function p(n,t){return o=>{n==null||n(o),t==null||t(o)}}function he(n,t,o){var r;return o?Array.from(((r=ne(o,t))==null?void 0:r.querySelectorAll(n))||[]).findIndex(a=>a===o):null}function ge(){const[n,t]=v.useState(-1);return[n,{setHovered:t,resetHovered:()=>t(-1)}]}function ye({open:n,close:t,openDelay:o,closeDelay:r}){const a=v.useRef(-1),e=v.useRef(-1),d=()=>{window.clearTimeout(a.current),window.clearTimeout(e.current)},c=()=>{d(),o===0||o===void 0?n():a.current=window.setTimeout(n,o)},i=()=>{d(),r===0||r===void 0?t():e.current=window.setTimeout(t,r)};return v.useEffect(()=>d,[]),{openDropdown:c,closeDropdown:i}}const[we,T]=de("Menu component was not found in the tree");var N={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Me={},K=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,...c}=C("MenuDivider",Me,n),i=T();return f(z,{ref:t,...i.getStyles("divider",{className:r,style:a,styles:e,classNames:o}),...c})});K.classes=N;K.displayName="@mantine/core/MenuDivider";const De={},V=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,onMouseEnter:c,onMouseLeave:i,children:D,...I}=C("MenuDropdown",De,n),M=v.useRef(null),l=T(),x=g=>{var u,k;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(k=(u=M.current)==null?void 0:u.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||k.focus())},s=p(c,()=>(l.trigger==="hover"||l.trigger==="click-hover")&&l.openDropdown()),h=p(i,()=>(l.trigger==="hover"||l.trigger==="click-hover")&&l.closeDropdown());return q(A.Dropdown,{...I,onMouseEnter:s,onMouseLeave:h,role:"menu","aria-orientation":"vertical",ref:G(t,M),...l.getStyles("dropdown",{className:r,style:a,styles:e,classNames:o,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:x,children:[f("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),D]})});V.classes=N;V.displayName="@mantine/core/MenuDropdown";const Ie={},$=ae((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,color:c,closeMenuOnClick:i,leftSection:D,rightSection:I,children:M,disabled:l,...x}=C("MenuItem",Ie,n),s=T(),h=ce(),{dir:g}=ue(),u=v.useRef(),k=s.getItemIndex(u.current),b=x,P=p(b.onMouseLeave,()=>s.setHovered(-1)),L=p(b.onMouseEnter,()=>s.setHovered(s.getItemIndex(u.current))),_=p(b.onClick,()=>{typeof i=="boolean"?i&&s.closeDropdownImmediately():s.closeOnItemClick&&s.closeDropdownImmediately()}),O=p(b.onFocus,()=>s.setHovered(s.getItemIndex(u.current))),y=c?h.variantColorResolver({color:c,theme:h,variant:"light"}):void 0,m=c?ie({color:c,theme:h}):null;return q(me,{...x,unstyled:s.unstyled,tabIndex:s.menuItemTabIndex,onFocus:O,...s.getStyles("item",{className:r,style:a,styles:e,classNames:o}),ref:G(u,t),role:"menuitem",disabled:l,"data-menu-item":!0,"data-disabled":l||void 0,"data-hovered":s.hovered===k?!0:void 0,onMouseEnter:L,onMouseLeave:P,onClick:_,onKeyDown:se({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:s.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":m!=null&&m.isThemeColor&&(m==null?void 0:m.shade)===void 0?`var(--mantine-color-${m.color}-6)`:y==null?void 0:y.color,"--menu-item-hover":y==null?void 0:y.hover},children:[D&&f("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"left",children:D}),M&&f("div",{...s.getStyles("itemLabel",{styles:e,classNames:o}),children:M}),I&&f("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"right",children:I})]})});$.classes=N;$.displayName="@mantine/core/MenuItem";const xe={},U=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,...c}=C("MenuLabel",xe,n),i=T();return f(z,{ref:t,...i.getStyles("label",{className:r,style:a,styles:e,classNames:o}),...c})});U.classes=N;U.displayName="@mantine/core/MenuLabel";const ke={refProp:"ref"},J=v.forwardRef((n,t)=>{const{children:o,refProp:r,...a}=C("MenuTarget",ke,n);if(!pe(o))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const e=T(),d=p(o.props.onClick,()=>{e.trigger==="click"?e.toggleDropdown():e.trigger==="click-hover"&&(e.setOpenedViaClick(!0),e.opened||e.openDropdown())}),c=p(o.props.onMouseEnter,()=>(e.trigger==="hover"||e.trigger==="click-hover")&&e.openDropdown()),i=p(o.props.onMouseLeave,()=>{(e.trigger==="hover"||e.trigger==="click-hover"&&!e.openedViaClick)&&e.closeDropdown()});return f(A.Target,{refProp:r,popupType:"menu",ref:t,...a,children:v.cloneElement(o,{onClick:d,onMouseEnter:c,onMouseLeave:i,"data-expanded":e.opened?!0:void 0})})});J.displayName="@mantine/core/MenuTarget";const be={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function w(n){const t=C("Menu",be,n),{children:o,onOpen:r,onClose:a,opened:e,defaultOpened:d,trapFocus:c,onChange:i,closeOnItemClick:D,loop:I,closeOnEscape:M,trigger:l,openDelay:x,closeDelay:s,classNames:h,styles:g,unstyled:u,variant:k,vars:b,menuItemTabIndex:P,keepMounted:L,..._}=t,O=le({name:"Menu",classes:N,props:t,classNames:h,styles:g,unstyled:u}),[y,{setHovered:m,resetHovered:Q}]=ge(),[S,H]=fe({value:e,defaultValue:d,finalValue:!1,onChange:i}),[W,j]=v.useState(!1),E=()=>{H(!1),j(!1),S&&(a==null||a())},R=()=>{H(!0),!S&&(r==null||r())},B=()=>{S?E():R()},{openDropdown:X,closeDropdown:Y}=ye({open:R,close:E,closeDelay:s,openDelay:x}),Z=te=>he("[data-menu-item]","[data-menu-dropdown]",te),{resolvedClassNames:ee,resolvedStyles:oe}=re({classNames:h,styles:g,props:t});return ve(()=>{Q()},[S]),f(we,{value:{getStyles:O,opened:S,toggleDropdown:B,getItemIndex:Z,hovered:y,setHovered:m,openedViaClick:W,setOpenedViaClick:j,closeOnItemClick:D,closeDropdown:l==="click"?E:Y,openDropdown:l==="click"?R:X,closeDropdownImmediately:E,loop:I,trigger:l,unstyled:u,menuItemTabIndex:P},children:f(A,{..._,opened:S,onChange:B,defaultOpened:d,trapFocus:L?!1:c,closeOnEscape:M,__staticSelector:"Menu",classNames:ee,styles:oe,unstyled:u,variant:k,keepMounted:L,children:o})})}w.extend=n=>n;w.classes=N;w.displayName="@mantine/core/Menu";w.Item=$;w.Label=U;w.Dropdown=V;w.Target=J;w.Divider=K;export{w as M,p as c};
