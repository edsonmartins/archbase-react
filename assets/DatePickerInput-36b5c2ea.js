import{j as b,a as L,F as te}from"./jsx-runtime-c9381026.js";import{d as u}from"./dayjs.min-5b59225a.js";import{r as B}from"./index-8b3efc3f.js";import{s as x,H as se,a as E,u as $,C as U,p as ne}from"./pick-calendar-levels-props-9d70454a.js";import{f as j,t as ae,u as W}from"./polymorphic-factory-9e44d24d.js";import{u as q}from"./use-resolved-styles-api-5d126602.js";import{u as re}from"./use-input-props-039f064b.js";import{C as oe}from"./CloseButton-f7e57d7a.js";import{M as le}from"./Modal-26dd1fab.js";import{I as O}from"./Input-5f376bf0.js";import{P as H}from"./Popover-981d393f.js";function ue(s=!1,t){const{onOpen:a,onClose:r}=t||{},[m,o]=B.useState(s),g=B.useCallback(()=>{o(e=>e||(a==null||a(),!0))},[a]),i=B.useCallback(()=>{o(e=>e&&(r==null||r(),!1))},[r]),c=B.useCallback(()=>{m?i():g()},[i,g,m]);return[m,{open:g,close:i,toggle:c}]}function ie({type:s,date:t,locale:a,format:r,labelSeparator:m}){const o=g=>u(g).locale(a).format(r);return s==="default"?t===null?"":o(t):s==="multiple"?t.map(o).join(", "):s==="range"&&Array.isArray(t)?t[0]&&t[1]?`${o(t[0])} ${m} ${o(t[1])}`:t[0]?`${o(t[0])} ${m} `:"":""}function ce({formatter:s,...t}){return(s||ie)(t)}function de({minDate:s,maxDate:t,timezone:a}){const r=x("add",new Date,a);return!s&&!t?r:s&&u(r).isBefore(s)?s:t&&u(r).isAfter(t)?t:r}var G={input:"m_6fa5e2aa"};const fe={},F=j((s,t)=>{const{inputProps:a,wrapperProps:r,placeholder:m,classNames:o,styles:g,unstyled:i,popoverProps:c,modalProps:e,dropdownType:d,children:D,formattedValue:h,dropdownHandlers:f,dropdownOpened:p,onClick:_,clearable:v,onClear:k,clearButtonProps:y,rightSection:C,shouldClear:T,readOnly:I,disabled:n,value:l,name:S,form:z,type:A,...V}=re("PickerInputBase",fe,s),P=C||(v&&T&&!I&&!n?b(oe,{variant:"transparent",onClick:k,unstyled:i,size:a.size||"sm",...y}):null),w=()=>{A==="range"&&Array.isArray(l)&&l[0]&&!l[1]&&k(),f.close()};return L(te,{children:[d==="modal"&&!I&&b(le,{opened:p,onClose:w,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:i,...e,children:D}),b(O.Wrapper,{...r,children:L(H,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:i,...c,disabled:(c==null?void 0:c.disabled)||d==="modal"||I,onClose:()=>{var R;(R=c==null?void 0:c.onClose)==null||R.call(c),w()},children:[b(H.Target,{children:b(O,{"data-dates-input":!0,"data-read-only":I||void 0,disabled:n,component:"button",type:"button",multiline:!0,onClick:R=>{_==null||_(R),f.toggle()},rightSection:P,...a,ref:t,classNames:{...o,input:ae(G.input,o==null?void 0:o.input)},...V,children:h||b(O.Placeholder,{error:a.error,unstyled:i,className:o==null?void 0:o.placeholder,style:g==null?void 0:g.placeholder,children:m})})}),b(H.Dropdown,{"data-dates-dropdown":!0,children:D})]})}),b(se,{value:l,name:S,form:z,type:A})]})});F.classes=G;F.displayName="@mantine/dates/PickerInputBase";function Y(s,t){const a=[...t].sort((r,m)=>r.getTime()-m.getTime());return u(a[0]).startOf("day").subtract(1,"ms").isBefore(s)&&u(a[1]).endOf("day").add(1,"ms").isAfter(s)}function me({type:s,level:t,value:a,defaultValue:r,onChange:m,allowSingleDateInRange:o,allowDeselect:g,onMouseLeave:i,applyTimezone:c=!0}){const[e,d]=E({type:s,value:a,defaultValue:r,onChange:m,applyTimezone:c}),[D,h]=B.useState(s==="range"&&e[0]&&!e[1]?e[0]:null),[f,p]=B.useState(null),_=n=>{if(s==="range"){if(D instanceof Date&&!e[1]){if(u(n).isSame(D,t)&&!o){h(null),p(null),d([null,null]);return}const l=[n,D];l.sort((S,z)=>S.getTime()-z.getTime()),d(l),p(null),h(null);return}if(e[0]&&!e[1]&&u(n).isSame(e[0],t)&&!o){h(null),p(null),d([null,null]);return}d([n,null]),p(null),h(n);return}if(s==="multiple"){e.some(l=>u(l).isSame(n,t))?d(e.filter(l=>!u(l).isSame(n,t))):d([...e,n]);return}e&&g&&u(n).isSame(e,t)?d(null):d(n)},v=n=>D instanceof Date&&f instanceof Date?Y(n,[f,D]):e[0]instanceof Date&&e[1]instanceof Date?Y(n,e):!1,k=s==="range"?n=>{i==null||i(n),p(null)}:i,y=n=>e[0]instanceof Date&&u(n).isSame(e[0],t)?!(f&&u(f).isBefore(e[0])):!1,C=n=>e[1]instanceof Date?u(n).isSame(e[1],t):!(e[0]instanceof Date)||!f?!1:u(f).isBefore(e[0])&&u(n).isSame(e[0],t),T=n=>{if(s==="range")return{selected:e.some(S=>S&&u(S).isSame(n,t)),inRange:v(n),firstInRange:y(n),lastInRange:C(n),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};if(s==="multiple")return{selected:e.some(S=>S&&u(S).isSame(n,t)),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};const l=u(e).isSame(n,t);return{selected:l,"data-autofocus":l||void 0}},I=s==="range"&&D?p:()=>{};return B.useEffect(()=>{if(s!=="range")return;const n=e[0]==null&&e[1]==null,l=e[0]!=null&&e[1]!=null;(n||l)&&(h(null),p(null))},[e]),{onDateChange:_,onRootMouseLeave:k,onHoveredDateChange:I,getControlProps:T,_value:e,setValue:d}}const pe={type:"default",defaultLevel:"month",numberOfColumns:1},N=j((s,t)=>{const a=W("DatePicker",pe,s),{classNames:r,styles:m,vars:o,type:g,defaultValue:i,value:c,onChange:e,__staticSelector:d,getDayProps:D,allowSingleDateInRange:h,allowDeselect:f,onMouseLeave:p,numberOfColumns:_,hideOutsideDates:v,__onDayMouseEnter:k,__onDayClick:y,__timezoneApplied:C,...T}=a,{onDateChange:I,onRootMouseLeave:n,onHoveredDateChange:l,getControlProps:S}=me({type:g,level:"day",allowDeselect:f,allowSingleDateInRange:h,value:c,defaultValue:i,onChange:e,onMouseLeave:p,applyTimezone:!C}),{resolvedClassNames:z,resolvedStyles:A}=q({classNames:r,styles:m,props:a}),V=$();return b(U,{ref:t,minLevel:"month",classNames:z,styles:A,__staticSelector:d||"DatePicker",onMouseLeave:n,numberOfColumns:_,hideOutsideDates:v??_!==1,__onDayMouseEnter:(P,w)=>{l(w),k==null||k(P,w)},__onDayClick:(P,w)=>{I(w),y==null||y(P,w)},getDayProps:P=>({...S(P),...D==null?void 0:D(P)}),...T,date:x("add",T.date,V.getTimezone(),C),__timezoneApplied:!0})});N.classes=U.classes;N.displayName="@mantine/dates/DatePicker";function ge({type:s,value:t,defaultValue:a,onChange:r,locale:m,format:o,closeOnChange:g,sortDates:i,labelSeparator:c,valueFormatter:e}){const d=$(),[D,h]=ue(!1),[f,p]=E({type:s,value:t,defaultValue:a,onChange:r}),_=ce({type:s,date:f,locale:d.getLocale(m),format:o,labelSeparator:d.getLabelSeparator(c),formatter:e}),v=C=>{g&&(s==="default"&&h.close(),s==="range"&&C[0]&&C[1]&&h.close()),p(i&&s==="multiple"?[...C].sort((T,I)=>T.getTime()-I.getTime()):C)},k=()=>v(s==="range"?[null,null]:s==="multiple"?[]:null),y=s==="range"?!!f[0]:s==="multiple"?f.length>0:f!==null;return{_value:f,setValue:v,onClear:k,shouldClear:y,formattedValue:_,dropdownOpened:D,dropdownHandlers:h}}const De={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},J=j((s,t)=>{const a=W("DatePickerInput",De,s),{type:r,value:m,defaultValue:o,onChange:g,valueFormat:i,labelSeparator:c,locale:e,classNames:d,styles:D,unstyled:h,closeOnChange:f,size:p,variant:_,dropdownType:v,sortDates:k,minDate:y,maxDate:C,vars:T,defaultDate:I,valueFormatter:n,...l}=a,{resolvedClassNames:S,resolvedStyles:z}=q({classNames:d,styles:D,props:a}),{calendarProps:A,others:V}=ne(l),{_value:P,setValue:w,formattedValue:R,dropdownHandlers:K,dropdownOpened:Q,onClear:X,shouldClear:Z}=ge({type:r,value:m,defaultValue:o,onChange:g,locale:e,format:i,labelSeparator:c,closeOnChange:f,sortDates:k,valueFormatter:n}),ee=Array.isArray(P)?P[0]||I:P||I,M=$();return b(F,{formattedValue:R,dropdownOpened:Q,dropdownHandlers:K,classNames:S,styles:z,unstyled:h,ref:t,onClear:X,shouldClear:Z,value:P,size:p,variant:_,dropdownType:v,...V,type:r,__staticSelector:"DatePickerInput",children:b(N,{...A,size:p,variant:_,type:r,value:P,defaultDate:ee||de({maxDate:C,minDate:y,timezone:M.getTimezone()}),onChange:w,locale:e,classNames:S,styles:z,unstyled:h,__staticSelector:"DatePickerInput",__stopPropagation:v==="popover",minDate:y,maxDate:C,date:x("add",A.date,M.getTimezone()),__timezoneApplied:!0})})});J.classes={...F.classes,...N.classes};J.displayName="@mantine/dates/DatePickerInput";export{J as D};
