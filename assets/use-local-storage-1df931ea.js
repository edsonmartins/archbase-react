import{r as i}from"./index-402471b7.js";import{u as S}from"./use-window-event-f88e3fb7.js";function E(o,c){try{return JSON.stringify(o)}catch{throw new Error(`@mantine/hooks ${c}: Failed to serialize the value`)}}function h(o){try{return JSON.parse(o)}catch{return o}}function C(o,c){const s=o==="localStorage"?"mantine-local-storage":"mantine-session-storage";return function({key:e,defaultValue:n=void 0,getInitialValueInEffect:l=!0,deserialize:m=h,serialize:g=u=>E(u,c)}){const u=i.useCallback(t=>{if(typeof window>"u"||!(o in window)||window[o]===null||t)return n;const r=window[o].getItem(e);return r!==null?m(r):n},[e,n]),[w,a]=i.useState(u(l)),d=i.useCallback(t=>{t instanceof Function?a(r=>{const v=t(r);return window[o].setItem(e,g(v)),window.dispatchEvent(new CustomEvent(s,{detail:{key:e,value:t(r)}})),v}):(window[o].setItem(e,g(t)),window.dispatchEvent(new CustomEvent(s,{detail:{key:e,value:t}})),a(t))},[e]),f=i.useCallback(()=>{window[o].removeItem(e),window.dispatchEvent(new CustomEvent(s,{detail:{key:e,value:n}}))},[]);return S("storage",t=>{var r;t.storageArea===window[o]&&t.key===e&&a(m((r=t.newValue)!=null?r:void 0))}),S(s,t=>{t.detail.key===e&&a(t.detail.value)}),i.useEffect(()=>{n!==void 0&&w===void 0&&d(n)},[n,w,d]),i.useEffect(()=>{l&&a(u())},[e]),[w===void 0?n:w,d,f]}}function b(o){return C("localStorage","use-local-storage")(o)}export{b as u};
//# sourceMappingURL=use-local-storage-1df931ea.js.map
