import{j as n,a as d}from"./jsx-runtime-29545a09.js";import{b as D,c as I,d as j,u as z,a as q}from"./useArchbaseDataSource-0bdc03a6.js";import{a as g,i as h,D as u,u as B}from"./useArchbaseDataSourceListener-cbed610e.js";import"./index-1076ae77.js";import{A as _}from"./ArchbaseEdit-8e23860f.js";import{r as E}from"./index-76fb7be0.js";import{A as G}from"./ArchbaseSelect-9918c2e5.js";import{G as b,C as m}from"./Grid-72b79d89.js";import{G as v}from"./Group-ec80c87c.js";import{T as w}from"./Text-052cbebe.js";import{B as T}from"./polymorphic-factory-e212381f.js";import{F as U}from"./Flex-472ba316.js";import{S as H}from"./ScrollArea-d1e51cef.js";import{A as W}from"./ArchbaseObjectInspector-39e1a2c0.js";import{p as M}from"./pessoasData-6b8000da.js";import{p as Z}from"./pedidosData-e328d4f3.js";import"./i18next-a4b2730f.js";import"./lodash-4d0be66a.js";import"./_commonjsHelpers-de833af9.js";import"./index-83127612.js";import"./use-mantine-color-scheme-940af2ab.js";import"./Mantine.context-0732ca39.js";import"./use-media-query-404d9c84.js";import"./use-force-update-df6d2b99.js";import"./TextInput-256f3fb5.js";import"./InputBase-b1a2e9dc.js";import"./Input-abb5d566.js";import"./create-optional-context-e52a7171.js";import"./use-id-9525279e.js";import"./use-isomorphic-effect-f46ba680.js";import"./use-input-props-0bcecfab.js";import"./Tooltip-6d7d1342.js";import"./OptionalPortal-d3ff2b4f.js";import"./index-d3ea75b5.js";import"./use-merged-ref-962e80ee.js";import"./DirectionProvider-3f93a9e9.js";import"./use-floating-auto-update-8b56efba.js";import"./use-did-update-4c7f685e.js";import"./Transition-7fd90e94.js";import"./use-reduced-motion-94535b68.js";import"./get-style-object-71cabcb5.js";import"./ActionIcon-23bc393d.js";import"./Loader-2934e180.js";import"./UnstyledButton-6bceb5b8.js";import"./ArchbaseAsyncSelect-5db62bb5.js";import"./Combobox-acbe011d.js";import"./Popover-b9d763ca.js";import"./create-safe-context-978e3819.js";import"./FocusTrap-0274480a.js";import"./use-uncontrolled-625105b4.js";import"./CloseButton-c44b8f52.js";import"./use-debounced-value-a20d2599.js";import"./Paper-9304c07a.js";import"./get-sorted-breakpoints-91e0685a.js";import"./px-90b8b31c.js";import"./types-5decf4ed.js";const J=(a,r)=>typeof a=="function"?a(r):h.getNestedProperty(r,a);function p(a,r,e){const o=[];return a&&a.getTotalRecords()>0&&a.browseRecords().map(i=>{if(e&&!e.includes(".")){if(!i.hasOwnProperty(e)||!i[e])throw new g("Foi encontrado um registro sem ID no dataSource passado para o Select.");if(typeof r!="function"&&(!i.hasOwnProperty(r)||!i[r]))throw new g("Foi encontrado um registro sem o texto no dataSource passado para a Select.")}o.push({label:i.label?i.label:J(r,i),disabled:i.disabled,value:h.getNestedProperty(i,e),origin:i})}),o}function f({lookupDataSource:a,lookupDataFieldText:r,lookupDataFieldId:e,simpleValue:o,children:i,dataSource:l,dataField:s,options:X,error:S,...x}){const[F,y]=E.useState(()=>p(a,r,e)),[L,P]=E.useState(S),V=t=>{a&&((t.type===u.dataChanged||t.type===u.fieldChanged||t.type===u.recordChanged||t.type===u.afterScroll||t.type===u.afterCancel)&&a&&y(p(a,r,e)),t.type===u.onFieldError&&t.fieldName===s&&P(t.error))},R=()=>{let t="";return l&&s&&(t=l.getFieldValue(s),t&&!o?typeof r=="function"?t=r(l.getCurrentRecord()):t=h.getNestedProperty(t,e):t||(t="")),t},N=t=>{t!==void 0&&t!==""&&t!==null?a&&e&&a.locate({[e]:t})&&l&&s&&(o?l.setFieldValue(s,t):l.setFieldValue(s,a.getCurrentRecord())):l&&s&&l.setFieldValue(s,null)};return D(()=>{y(p(a,r,e)),a&&a.addListener(V)}),I(()=>{y(p(a,r,e))},[]),j(()=>{a&&a.removeListener(V)}),n(G,{...x,dataSource:l,dataField:s,customGetDataSourceFieldValue:R,customSetDataSourceFieldValue:N,options:F,error:L,children:i})}try{f.displayName="ArchbaseLookupSelect",f.__docgenInfo={description:"",displayName:"ArchbaseLookupSelect",props:{lookupDataSource:{defaultValue:null,description:"",name:"lookupDataSource",required:!0,type:{name:"ArchbaseDataSource<O, ID>"}},lookupDataFieldText:{defaultValue:null,description:"",name:"lookupDataFieldText",required:!0,type:{name:"string | ((record: any) => string)"}},lookupDataFieldId:{defaultValue:null,description:"",name:"lookupDataFieldId",required:!0,type:{name:"string"}},simpleValue:{defaultValue:null,description:"",name:"simpleValue",required:!1,type:{name:"boolean"}},allowDeselect:{defaultValue:null,description:"Permite ou não delecionar um item",name:"allowDeselect",required:!1,type:{name:"boolean"}},clearable:{defaultValue:null,description:"Indicador se permite limpar o select",name:"clearable",required:!1,type:{name:"boolean"}},dataSource:{defaultValue:null,description:"Fonte de dados onde será atribuido o item selecionado",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataField:{defaultValue:null,description:"Campo onde deverá ser atribuido o item selecionado na fonte de dados",name:"dataField",required:!1,type:{name:"string"}},debounceTime:{defaultValue:null,description:"Tempo de espero antes de realizar a busca",name:"debounceTime",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"Indicador se o select está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"Indicador se o select é somente leitura. Obs: usado em conjunto com o status da fonte de dados",name:"readOnly",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"Estilo do select",name:"style",required:!1,type:{name:"CSSProperties"}},placeholder:{defaultValue:null,description:"Texto explicativo do select",name:"placeholder",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Título do select",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Descrição do select",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Último erro ocorrido no select",name:"error",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"Permite pesquisar no select",name:"searchable",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"Icon a esquerda do select",name:"icon",required:!1,type:{name:"ReactNode"}},iconWidth:{defaultValue:null,description:"Largura do icone a esquerda do select",name:"iconWidth",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},value:{defaultValue:null,description:"Valor de entrada controlado",name:"value",required:!1,type:{name:"any"}},defaultValue:{defaultValue:null,description:"Valor padrão de entrada não controlado",name:"defaultValue",required:!1,type:{name:"any"}},filter:{defaultValue:null,description:"Função com base em quais itens no menu suspenso são filtrados",name:"filter",required:!1,type:{name:"OptionsFilter"}},size:{defaultValue:null,description:"Tamanho de entrada",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},initiallyOpened:{defaultValue:null,description:"Estado aberto do menu suspenso inicial",name:"initiallyOpened",required:!1,type:{name:"boolean"}},itemComponent:{defaultValue:null,description:"Alterar renderizador de item",name:"itemComponent",required:!1,type:{name:"FC<any>"}},width:{defaultValue:null,description:"Largura do select",name:"width",required:!1,type:{name:"string | number"}},onDropdownOpen:{defaultValue:null,description:"Chamado quando o menu suspenso é aberto",name:"onDropdownOpen",required:!1,type:{name:"() => void"}},onDropdownClose:{defaultValue:null,description:"Chamado quando o menu suspenso é aberto",name:"onDropdownClose",required:!1,type:{name:"() => void"}},limit:{defaultValue:null,description:"Limite a quantidade de itens exibidos por vez para seleção pesquisável",name:"limit",required:!1,type:{name:"number"}},nothingFound:{defaultValue:null,description:"Rótulo nada encontrado",name:"nothingFound",required:!1,type:{name:"ReactNode"}},zIndex:{defaultValue:null,description:"Índice z dropdown",name:"zIndex",required:!1,type:{name:"ZIndex"}},dropdownPosition:{defaultValue:null,description:"Comportamento de posicionamento dropdown",name:"dropdownPosition",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'},{value:'"top-end"'},{value:'"top-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'}]}},onSelectValue:{defaultValue:null,description:"Evento quando um valor é selecionado",name:"onSelectValue",required:!1,type:{name:"(value: O, origin: any) => void"}},onFocusExit:{defaultValue:null,description:"Evento quando o foco sai do select",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<T>"}},onFocusEnter:{defaultValue:null,description:"Evento quando o select recebe o foco",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<T>"}},initialOptions:{defaultValue:null,description:"Opções de seleção iniciais",name:"initialOptions",required:!1,type:{name:"O[]"}},getOptionLabel:{defaultValue:null,description:"Function que retorna o label de uma opção",name:"getOptionLabel",required:!0,type:{name:"(option: O) => ReactNode"}},getOptionValue:{defaultValue:null,description:"Function que retorna o valor de uma opção",name:"getOptionValue",required:!0,type:{name:"(option: O) => any"}},children:{defaultValue:null,description:"Coleção de ArchbaseSelectItem[] que representam as opções do select",name:"children",required:!1,type:{name:"ReactNode | ReactNode[]"}},required:{defaultValue:null,description:"Indica se o select tem o preenchimento obrigatório",name:"required",required:!1,type:{name:"boolean"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},options:{defaultValue:null,description:"Selecione os dados usados ​​para renderizar itens no menu suspenso",name:"options",required:!1,type:{name:"ArchbaseDataSource<any, any> | O[] | ArchbaseSelectItemProps<O>[]"}},optionsLabelField:{defaultValue:null,description:"",name:"optionsLabelField",required:!1,type:{name:"string"}},customGetDataSourceFieldValue:{defaultValue:null,description:"",name:"customGetDataSourceFieldValue",required:!1,type:{name:"() => any"}},customSetDataSourceFieldValue:{defaultValue:null,description:"",name:"customSetDataSourceFieldValue",required:!1,type:{name:"(value: any) => void"}}}}}catch{}const K=Z,Q=()=>{const a=z(),{dataSource:r}=q({initialData:M,name:"dsPessoas"}),{dataSource:e}=q({initialData:K,name:"dsPedidos"});return e!=null&&e.isBrowsing()&&!(e!=null&&e.isEmpty())&&e.edit(),B({dataSource:e,listener:o=>{switch(o.type){case u.fieldChanged:{a();break}}}}),d(b,{children:[n(b.Col,{offset:1,span:6,children:d(m,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[n(m.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:n(v,{justify:"space-between",children:n(w,{fw:500,children:"Lookup Edit Component"})})}),n(T,{style:{height:100},children:d(U,{justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",gap:"xs",children:[n(f,{label:"Código",dataSource:e,dataField:"cliente",lookupDataSource:r,lookupDataFieldText:"nome",lookupDataFieldId:"id",required:!0,width:300,getOptionLabel:o=>o.nome,getOptionValue:o=>o}),n(_,{label:"Nome",dataSource:e,dataField:"cliente.nome",disabled:!0,width:500})]})})]})}),n(b.Col,{span:4,children:d(m,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[n(m.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:n(v,{justify:"space-between",children:n(w,{fw:500,children:"DataSource dsPedidos"})})}),n(H,{style:{height:500},children:n(W,{data:e})})]})})]})},ke={title:"Editores/Lookup Select",component:f},c={name:"Exemplo simples",render:()=>n(Q,{})};var O,A,C;c.parameters={...c.parameters,docs:{...(O=c.parameters)==null?void 0:O.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseLookupSelectExample />
}`,...(C=(A=c.parameters)==null?void 0:A.docs)==null?void 0:C.source}}};export{c as Primary,ke as default};
