import{j as v,a as be}from"./jsx-runtime-c9381026.js";import{r as g}from"./index-8b3efc3f.js";import{O as Te,i as Se,g as Ee}from"./OptionalPortal-f36e0e00.js";import{f as V,u as b,B as Fe,r as ze,t as Ne,h as ke,i as Ie,n as Ae,o as _e}from"./polymorphic-factory-0a97ecf2.js";import{u as Me}from"./use-resolved-styles-api-40413a9b.js";import{u as $e}from"./DirectionProvider-1e219af7.js";import{p as je,a as Ke,u as Le,m as Ue,o as Ve,s as Xe,q as $,f as j,i as K,c as Ye,r as Be,n as qe}from"./use-floating-auto-update-be0bf837.js";import{c as He}from"./create-safe-context-941c9e18.js";import{u as Ze,F as Ge}from"./FocusTrap-ede29d16.js";import{T as Je}from"./Transition-3881f4fd.js";import{u as X}from"./use-merged-ref-add91123.js";import{u as Qe}from"./use-uncontrolled-f56237fb.js";import{u as L}from"./use-did-update-bccd292e.js";import{u as We}from"./use-id-3df0f1f4.js";const eo=()=>{};function oo(e,r={active:!0}){return typeof e!="function"||!r.active?r.onKeyDown||eo:t=>{var n;t.key==="Escape"&&(e(t),(n=r.onTrigger)==null||n.call(r))}}const U=["mousedown","touchstart"];function to(e,r,t){const n=g.useRef();return g.useEffect(()=>{const d=l=>{const{target:i}=l??{};if(Array.isArray(t)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";t.every(c=>!!c&&!l.composedPath().includes(c))&&!a&&e()}else n.current&&!n.current.contains(i)&&e()};return(r||U).forEach(l=>document.addEventListener(l,d)),()=>{(r||U).forEach(l=>document.removeEventListener(l,d))}},[n,e,t]),n}const[ro,Y]=He("Popover component was not found in the tree");var B={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const so={},T=V((e,r)=>{var R,C,m,w;const t=b("PopoverDropdown",so,e),{className:n,style:d,vars:l,children:i,onKeyDownCapture:a,variant:s,classNames:c,styles:f,...y}=t,o=Y(),P=Ze({opened:o.opened,shouldReturnFocus:o.returnFocus}),x=o.withRoles?{"aria-labelledby":o.getTargetId(),id:o.getDropdownId(),role:"dialog",tabIndex:-1}:{},O=X(r,o.floating);return o.disabled?null:v(Te,{...o.portalProps,withinPortal:o.withinPortal,children:v(Je,{mounted:o.opened,...o.transitionProps,transition:((R=o.transitionProps)==null?void 0:R.transition)||"fade",duration:((C=o.transitionProps)==null?void 0:C.duration)??150,keepMounted:o.keepMounted,exitDuration:typeof((m=o.transitionProps)==null?void 0:m.exitDuration)=="number"?o.transitionProps.exitDuration:(w=o.transitionProps)==null?void 0:w.duration,children:h=>v(Ge,{active:o.trapFocus&&o.opened,innerRef:O,children:be(Fe,{...x,...y,variant:s,onKeyDownCapture:oo(o.onClose,{active:o.closeOnEscape,onTrigger:P,onKeyDown:a}),"data-position":o.placement,"data-fixed":o.floatingStrategy==="fixed"||void 0,...o.getStyles("dropdown",{className:n,props:t,classNames:c,styles:f,style:[{...h,zIndex:o.zIndex,top:o.y??0,left:o.x??0,width:o.width==="target"?void 0:ze(o.width)},o.resolvedStyles.dropdown,f==null?void 0:f.dropdown,d]}),children:[i,v(je,{ref:o.arrowRef,arrowX:o.arrowX,arrowY:o.arrowY,visible:o.withArrow,position:o.placement,arrowSize:o.arrowSize,arrowRadius:o.arrowRadius,arrowOffset:o.arrowOffset,arrowPosition:o.arrowPosition,...o.getStyles("arrow",{props:t,classNames:c,styles:f})})]})})})})});T.classes=B;T.displayName="@mantine/core/PopoverDropdown";const no={refProp:"ref",popupType:"dialog"},q=V((e,r)=>{const{children:t,refProp:n,popupType:d,...l}=b("PopoverTarget",no,e);if(!Se(t))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=l,a=Y(),s=X(a.reference,Ke(t),r),c=a.withRoles?{"aria-haspopup":d,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return g.cloneElement(t,{...i,...c,...a.targetProps,className:Ne(a.targetProps.className,i.className,t.props.className),[n]:s,...a.controlled?null:{onClick:a.onToggle}})});q.displayName="@mantine/core/PopoverTarget";function ao(e){if(e===void 0)return{shift:!0,flip:!0};const r={...e};return e.shift===void 0&&(r.shift=!0),e.flip===void 0&&(r.flip=!0),r}function io(e,r){const t=ao(e.middlewares),n=[Ve(e.offset)];return t.shift&&n.push(Xe(typeof t.shift=="boolean"?{limiter:$(),padding:5}:{limiter:$(),padding:5,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?j():j(t.flip)),t.inline&&n.push(typeof t.inline=="boolean"?K():K(t.inline)),n.push(Ye({element:e.arrowRef,padding:e.arrowOffset})),(t.size||e.width==="target")&&n.push(Be({...typeof t.size=="boolean"?{}:t.size,apply({rects:d,availableWidth:l,availableHeight:i,...a}){var f;const c=((f=r().refs.floating.current)==null?void 0:f.style)??{};t.size&&(typeof t.size=="object"&&t.size.apply?t.size.apply({rects:d,availableWidth:l,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${l}px`,maxHeight:`${i}px`})),e.width==="target"&&Object.assign(c,{width:`${d.reference.width}px`})}})),n}function lo(e){const[r,t]=Qe({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=g.useRef(r),d=()=>{r&&t(!1)},l=()=>t(!r),i=Le({strategy:e.strategy,placement:e.position,middleware:io(e,()=>i)});return Ue({opened:r,position:e.position,positionDependencies:e.positionDependencies||[],floating:i}),L(()=>{var a;(a=e.onPositionChange)==null||a.call(e,i.placement)},[i.placement]),L(()=>{var a,s;r!==n.current&&(r?(s=e.onOpen)==null||s.call(e):(a=e.onClose)==null||a.call(e)),n.current=r},[r,e.onClose,e.onOpen]),{floating:i,controlled:typeof e.opened=="boolean",opened:r,onClose:d,onToggle:l}}const co={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ee("popover"),__staticSelector:"Popover",width:"max-content"},po=Ie((e,{radius:r,shadow:t})=>({dropdown:{"--popover-radius":r===void 0?void 0:Ae(r),"--popover-shadow":_e(t)}}));function D(e){var N,k,I,A,_,M;const r=b("Popover",co,e),{children:t,position:n,offset:d,onPositionChange:l,positionDependencies:i,opened:a,transitionProps:s,onExitTransitionEnd:c,onEnterTransitionEnd:f,width:y,middlewares:o,withArrow:P,arrowSize:x,arrowOffset:O,arrowRadius:R,arrowPosition:C,unstyled:m,classNames:w,styles:h,closeOnClickOutside:H,withinPortal:Z,portalProps:G,closeOnEscape:J,clickOutsideEvents:Q,trapFocus:W,onClose:ee,onOpen:oe,onChange:te,zIndex:re,radius:se,shadow:ne,id:ae,defaultOpened:ie,__staticSelector:S,withRoles:le,disabled:de,returnFocus:ce,variant:pe,keepMounted:fe,vars:ue,floatingStrategy:E,...ge}=r,we=ke({name:S,props:r,classes:B,classNames:w,styles:h,unstyled:m,rootSelector:"dropdown",vars:ue,varsResolver:po}),{resolvedStyles:me}=Me({classNames:w,styles:h,props:r}),F=g.useRef(null),[he,ve]=g.useState(null),[ye,Pe]=g.useState(null),{dir:xe}=$e(),z=We(ae),p=lo({middlewares:o,width:y,position:qe(xe,n),offset:typeof d=="number"?d+(P?x/2:0):d,arrowRef:F,arrowOffset:O,onPositionChange:l,positionDependencies:i,opened:a,defaultOpened:ie,onChange:te,onOpen:oe,onClose:ee,strategy:E});to(()=>H&&p.onClose(),Q,[he,ye]);const Oe=g.useCallback(u=>{ve(u),p.floating.refs.setReference(u)},[p.floating.refs.setReference]),Re=g.useCallback(u=>{Pe(u),p.floating.refs.setFloating(u)},[p.floating.refs.setFloating]),Ce=g.useCallback(()=>{var u;(u=s==null?void 0:s.onExited)==null||u.call(s),c==null||c()},[s==null?void 0:s.onExited,c]),De=g.useCallback(()=>{var u;(u=s==null?void 0:s.onEntered)==null||u.call(s),f==null||f()},[s==null?void 0:s.onEntered,f]);return v(ro,{value:{returnFocus:ce,disabled:de,controlled:p.controlled,reference:Oe,floating:Re,x:p.floating.x,y:p.floating.y,arrowX:(I=(k=(N=p.floating)==null?void 0:N.middlewareData)==null?void 0:k.arrow)==null?void 0:I.x,arrowY:(M=(_=(A=p.floating)==null?void 0:A.middlewareData)==null?void 0:_.arrow)==null?void 0:M.y,opened:p.opened,arrowRef:F,transitionProps:{...s,onExited:Ce,onEntered:De},width:y,withArrow:P,arrowSize:x,arrowOffset:O,arrowRadius:R,arrowPosition:C,placement:p.floating.placement,trapFocus:W,withinPortal:Z,portalProps:G,zIndex:re,radius:se,shadow:ne,closeOnEscape:J,onClose:p.onClose,onToggle:p.onToggle,getTargetId:()=>`${z}-target`,getDropdownId:()=>`${z}-dropdown`,withRoles:le,targetProps:ge,__staticSelector:S,classNames:w,styles:h,unstyled:m,variant:pe,keepMounted:fe,getStyles:we,resolvedStyles:me,floatingStrategy:E},children:t})}D.Target=q;D.Dropdown=T;D.displayName="@mantine/core/Popover";D.extend=e=>e;export{D as P};
