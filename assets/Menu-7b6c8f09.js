import{r as v,R as m}from"./index-76fb7be0.js";import{f as te,c as ne}from"./create-scoped-keydown-handler-870d0701.js";import{u as se}from"./use-resolved-styles-api-777d9903.js";import{f as F,u as E,B as j,p as re,b as ae,a as ce,h as le}from"./polymorphic-factory-e212381f.js";import{P as A}from"./Popover-b9d763ca.js";import{c as ie}from"./create-safe-context-978e3819.js";import{u as z}from"./use-merged-ref-962e80ee.js";import{u as de}from"./DirectionProvider-3f93a9e9.js";import{U as ue}from"./UnstyledButton-6bceb5b8.js";import{i as me}from"./OptionalPortal-d3ff2b4f.js";import{u as pe}from"./use-uncontrolled-625105b4.js";import{u as fe}from"./use-did-update-4c7f685e.js";function f(n,t){return o=>{n==null||n(o),t==null||t(o)}}function ve(n,t,o){var r;return o?Array.from(((r=te(o,t))==null?void 0:r.querySelectorAll(n))||[]).findIndex(a=>a===o):null}function ge(){const[n,t]=v.useState(-1);return[n,{setHovered:t,resetHovered:()=>t(-1)}]}function ye({open:n,close:t,openDelay:o,closeDelay:r}){const a=v.useRef(-1),e=v.useRef(-1),d=()=>{window.clearTimeout(a.current),window.clearTimeout(e.current)},c=()=>{d(),o===0||o===void 0?n():a.current=window.setTimeout(n,o)},l=()=>{d(),r===0||r===void 0?t():e.current=window.setTimeout(t,r)};return v.useEffect(()=>d,[]),{openDropdown:c,closeDropdown:l}}const[we,N]=ie("Menu component was not found in the tree");var C={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const he={},K=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,...c}=E("MenuDivider",he,n),l=N();return m.createElement(j,{ref:t,...l.getStyles("divider",{className:r,style:a,styles:e,classNames:o}),...c})});K.classes=C;K.displayName="@mantine/core/MenuDivider";const Me={},V=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,onMouseEnter:c,onMouseLeave:l,children:D,...I}=E("MenuDropdown",Me,n),M=v.useRef(null),i=N(),k=y=>{var u,x;(y.key==="ArrowUp"||y.key==="ArrowDown")&&(y.preventDefault(),(x=(u=M.current)==null?void 0:u.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||x.focus())},s=f(c,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),g=f(l,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.closeDropdown());return m.createElement(A.Dropdown,{...I,onMouseEnter:s,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:z(t,M),...i.getStyles("dropdown",{className:r,style:a,styles:e,classNames:o,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:k},m.createElement("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),D)});V.classes=C;V.displayName="@mantine/core/MenuDropdown";const De={},$=re((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,color:c,closeMenuOnClick:l,leftSection:D,rightSection:I,children:M,disabled:i,...k}=E("MenuItem",De,n),s=N(),g=ae(),{dir:y}=de(),u=v.useRef(),x=s.getItemIndex(u.current),b=k,P=f(b.onMouseLeave,()=>s.setHovered(-1)),T=f(b.onMouseEnter,()=>s.setHovered(s.getItemIndex(u.current))),R=f(b.onClick,()=>{typeof l=="boolean"?l&&s.closeDropdownImmediately():s.closeOnItemClick&&s.closeDropdownImmediately()}),_=f(b.onFocus,()=>s.setHovered(s.getItemIndex(u.current))),w=c?g.variantColorResolver({color:c,theme:g,variant:"light"}):void 0,p=c?ce({color:c,theme:g}):null;return m.createElement(ue,{...k,unstyled:s.unstyled,tabIndex:s.menuItemTabIndex,onFocus:_,...s.getStyles("item",{className:r,style:a,styles:e,classNames:o}),ref:z(u,t),role:"menuitem",disabled:i,"data-menu-item":!0,"data-disabled":i||void 0,"data-hovered":s.hovered===x?!0:void 0,onMouseEnter:T,onMouseLeave:P,onClick:R,onKeyDown:ne({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:s.loop,dir:y,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":p!=null&&p.isThemeColor&&(p==null?void 0:p.shade)===void 0?`var(--mantine-color-${p.color}-6)`:w==null?void 0:w.color,"--menu-item-hover":w==null?void 0:w.hover}},D&&m.createElement("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"left"},D),M&&m.createElement("div",{...s.getStyles("itemLabel",{styles:e,classNames:o})},M),I&&m.createElement("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"right"},I))});$.classes=C;$.displayName="@mantine/core/MenuItem";const Ie={},U=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:d,...c}=E("MenuLabel",Ie,n),l=N();return m.createElement(j,{ref:t,...l.getStyles("label",{className:r,style:a,styles:e,classNames:o}),...c})});U.classes=C;U.displayName="@mantine/core/MenuLabel";const ke={refProp:"ref"},G=v.forwardRef((n,t)=>{const{children:o,refProp:r,...a}=E("MenuTarget",ke,n);if(!me(o))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const e=N(),d=f(o.props.onClick,()=>{e.trigger==="click"?e.toggleDropdown():e.trigger==="click-hover"&&(e.setOpenedViaClick(!0),e.opened||e.openDropdown())}),c=f(o.props.onMouseEnter,()=>(e.trigger==="hover"||e.trigger==="click-hover")&&e.openDropdown()),l=f(o.props.onMouseLeave,()=>{(e.trigger==="hover"||e.trigger==="click-hover"&&!e.openedViaClick)&&e.closeDropdown()});return m.createElement(A.Target,{refProp:r,popupType:"menu",ref:t,...a},v.cloneElement(o,{onClick:d,onMouseEnter:c,onMouseLeave:l,"data-expanded":e.opened?!0:void 0}))});G.displayName="@mantine/core/MenuTarget";const xe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function h(n){const t=E("Menu",xe,n),{children:o,onOpen:r,onClose:a,opened:e,defaultOpened:d,trapFocus:c,onChange:l,closeOnItemClick:D,loop:I,closeOnEscape:M,trigger:i,openDelay:k,closeDelay:s,classNames:g,styles:y,unstyled:u,variant:x,vars:b,menuItemTabIndex:P,keepMounted:T,...R}=t,_=le({name:"Menu",classes:C,props:t,classNames:g,styles:y,unstyled:u}),[w,{setHovered:p,resetHovered:J}]=ge(),[S,H]=pe({value:e,defaultValue:d,finalValue:!1,onChange:l}),[Q,B]=v.useState(!1),L=()=>{H(!1),B(!1),S&&(a==null||a())},O=()=>{H(!0),!S&&(r==null||r())},q=()=>{S?L():O()},{openDropdown:W,closeDropdown:X}=ye({open:O,close:L,closeDelay:s,openDelay:k}),Y=oe=>ve("[data-menu-item]","[data-menu-dropdown]",oe),{resolvedClassNames:Z,resolvedStyles:ee}=se({classNames:g,styles:y,props:t});return fe(()=>{J()},[S]),m.createElement(we,{value:{getStyles:_,opened:S,toggleDropdown:q,getItemIndex:Y,hovered:w,setHovered:p,openedViaClick:Q,setOpenedViaClick:B,closeOnItemClick:D,closeDropdown:i==="click"?L:X,openDropdown:i==="click"?O:W,closeDropdownImmediately:L,loop:I,trigger:i,unstyled:u,menuItemTabIndex:P}},m.createElement(A,{...R,opened:S,onChange:q,defaultOpened:d,trapFocus:T?!1:c,closeOnEscape:M,__staticSelector:"Menu",classNames:Z,styles:ee,unstyled:u,variant:x,keepMounted:T},o))}h.extend=n=>n;h.classes=C;h.displayName="@mantine/core/Menu";h.Item=$;h.Label=U;h.Dropdown=V;h.Target=G;h.Divider=K;export{h as M,f as c};
