import{j as g,a as W}from"./jsx-runtime-c9381026.js";import{r as w}from"./index-8b3efc3f.js";import{f as se,c as re}from"./create-scoped-keydown-handler-870d0701.js";import{u as ae}from"./use-resolved-styles-api-07b5b463.js";import{f as A,u as C,B as z,p as ce,b as ie,a as le,h as de,A as ue}from"./polymorphic-factory-bf652503.js";import{P as K}from"./Popover-62e4c870.js";import{c as me}from"./create-safe-context-941c9e18.js";import{u as G}from"./use-merged-ref-a374cf59.js";import{u as pe}from"./DirectionProvider-1e219af7.js";import{U as fe}from"./UnstyledButton-5ea781f1.js";import{i as ve}from"./OptionalPortal-8c3f6fc2.js";import{u as he}from"./use-uncontrolled-f56237fb.js";import{u as ge}from"./use-did-update-bccd292e.js";function u(n,t){return o=>{n==null||n(o),t==null||t(o)}}function we(n,t,o){var r;return o?Array.from(((r=se(o,t))==null?void 0:r.querySelectorAll(n))||[]).findIndex(a=>a===o):null}function ye(){const[n,t]=w.useState(-1);return[n,{setHovered:t,resetHovered:()=>t(-1)}]}function Me({open:n,close:t,openDelay:o,closeDelay:r}){const a=w.useRef(-1),e=w.useRef(-1),i=()=>{window.clearTimeout(a.current),window.clearTimeout(e.current)},c=()=>{i(),o===0||o===void 0?n():a.current=window.setTimeout(n,o)},l=()=>{i(),r===0||r===void 0?t():e.current=window.setTimeout(t,r)};return w.useEffect(()=>i,[]),{openDropdown:c,closeDropdown:l}}const[De,T]=me("Menu component was not found in the tree");var P={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Ie={},V=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,...c}=C("MenuDivider",Ie,n),l=T();return g(z,{ref:t,...l.getStyles("divider",{className:r,style:a,styles:e,classNames:o}),...c})});V.classes=P;V.displayName="@mantine/core/MenuDivider";const be={},$=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,onMouseEnter:c,onMouseLeave:l,onKeyDown:y,children:b,...x}=C("MenuDropdown",be,n),p=w.useRef(null),d=T(),k=u(y,f=>{var v,N;(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),(N=(v=p.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||N.focus())}),s=u(c,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),M=u(l,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return W(K.Dropdown,{...x,onMouseEnter:s,onMouseLeave:M,role:"menu","aria-orientation":"vertical",ref:G(t,p),...d.getStyles("dropdown",{className:r,style:a,styles:e,classNames:o,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:k,children:[d.withInitialFocusPlaceholder&&g("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),b]})});$.classes=P;$.displayName="@mantine/core/MenuDropdown";const xe={},U=ce((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,color:c,closeMenuOnClick:l,leftSection:y,rightSection:b,children:x,disabled:p,"data-disabled":d,...k}=C("MenuItem",xe,n),s=T(),M=ie(),{dir:f}=pe(),v=w.useRef(null),N=s.getItemIndex(v.current),I=k,L=u(I.onMouseLeave,()=>s.setHovered(-1)),_=u(I.onMouseEnter,()=>s.setHovered(s.getItemIndex(v.current))),F=u(I.onClick,()=>{d||(typeof l=="boolean"?l&&s.closeDropdownImmediately():s.closeOnItemClick&&s.closeDropdownImmediately())}),O=u(I.onFocus,()=>s.setHovered(s.getItemIndex(v.current))),D=c?M.variantColorResolver({color:c,theme:M,variant:"light"}):void 0,h=c?le({color:c,theme:M}):null;return W(fe,{...k,unstyled:s.unstyled,tabIndex:s.menuItemTabIndex,onFocus:O,...s.getStyles("item",{className:r,style:a,styles:e,classNames:o}),ref:G(v,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||d||void 0,"data-hovered":s.hovered===N?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:_,onMouseLeave:L,onClick:F,onKeyDown:re({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:s.loop,dir:f,orientation:"vertical",onKeyDown:I.onKeyDown}),__vars:{"--menu-item-color":h!=null&&h.isThemeColor&&(h==null?void 0:h.shade)===void 0?`var(--mantine-color-${h.color}-6)`:D==null?void 0:D.color,"--menu-item-hover":D==null?void 0:D.hover},children:[y&&g("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"left",children:y}),x&&g("div",{...s.getStyles("itemLabel",{styles:e,classNames:o}),children:x}),b&&g("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"right",children:b})]})});U.classes=P;U.displayName="@mantine/core/MenuItem";const ke={},H=A((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:i,...c}=C("MenuLabel",ke,n),l=T();return g(z,{ref:t,...l.getStyles("label",{className:r,style:a,styles:e,classNames:o}),...c})});H.classes=P;H.displayName="@mantine/core/MenuLabel";const Se={refProp:"ref"},J=w.forwardRef((n,t)=>{const{children:o,refProp:r,...a}=C("MenuTarget",Se,n);if(!ve(o))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const e=T(),i=o.props,c=u(i.onClick,()=>{e.trigger==="click"?e.toggleDropdown():e.trigger==="click-hover"&&(e.setOpenedViaClick(!0),e.opened||e.openDropdown())}),l=u(i.onMouseEnter,()=>(e.trigger==="hover"||e.trigger==="click-hover")&&e.openDropdown()),y=u(i.onMouseLeave,()=>{(e.trigger==="hover"||e.trigger==="click-hover"&&!e.openedViaClick)&&e.closeDropdown()});return g(K.Target,{refProp:r,popupType:"menu",ref:t,...a,children:w.cloneElement(o,{onClick:c,onMouseEnter:l,onMouseLeave:y,"data-expanded":e.opened?!0:void 0})})});J.displayName="@mantine/core/MenuTarget";const Ce={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function m(n){const t=C("Menu",Ce,n),{children:o,onOpen:r,onClose:a,opened:e,defaultOpened:i,trapFocus:c,onChange:l,closeOnItemClick:y,loop:b,closeOnEscape:x,trigger:p,openDelay:d,closeDelay:k,classNames:s,styles:M,unstyled:f,variant:v,vars:N,menuItemTabIndex:I,keepMounted:L,withInitialFocusPlaceholder:_,...F}=t,O=de({name:"Menu",classes:P,props:t,classNames:s,styles:M,unstyled:f}),[D,{setHovered:h,resetHovered:Q}]=ye(),[S,j]=he({value:e,defaultValue:i,finalValue:!1,onChange:l}),[X,B]=w.useState(!1),E=()=>{j(!1),B(!1),S&&(a==null||a())},R=()=>{j(!0),!S&&(r==null||r())},q=()=>{S?E():R()},{openDropdown:Y,closeDropdown:Z}=Me({open:R,close:E,closeDelay:k,openDelay:d}),ee=ne=>we("[data-menu-item]","[data-menu-dropdown]",ne),{resolvedClassNames:oe,resolvedStyles:te}=ae({classNames:s,styles:M,props:t});return ge(()=>{Q()},[S]),g(De,{value:{getStyles:O,opened:S,toggleDropdown:q,getItemIndex:ee,hovered:D,setHovered:h,openedViaClick:X,setOpenedViaClick:B,closeOnItemClick:y,closeDropdown:p==="click"?E:Z,openDropdown:p==="click"?R:Y,closeDropdownImmediately:E,loop:b,trigger:p,unstyled:f,menuItemTabIndex:I,withInitialFocusPlaceholder:_},children:g(K,{...F,opened:S,onChange:q,defaultOpened:i,trapFocus:L?!1:c,closeOnEscape:x,__staticSelector:"Menu",classNames:oe,styles:te,unstyled:f,variant:v,keepMounted:L,children:o})})}m.extend=n=>n;m.withProps=ue(m);m.classes=P;m.displayName="@mantine/core/Menu";m.Item=U;m.Label=H;m.Dropdown=$;m.Target=J;m.Divider=V;export{m as M,u as c};
