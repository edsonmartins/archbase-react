import{j as g,a as q}from"./jsx-runtime-c9381026.js";import{r as h}from"./index-8b3efc3f.js";import{f as ne,c as se}from"./create-scoped-keydown-handler-870d0701.js";import{u as re}from"./use-resolved-styles-api-40413a9b.js";import{f as F,u as C,B as z,p as ae,b as ce,a as ie,h as le}from"./polymorphic-factory-0a97ecf2.js";import{P as A}from"./Popover-9d62da43.js";import{c as de}from"./create-safe-context-941c9e18.js";import{u as G}from"./use-merged-ref-add91123.js";import{u as ue}from"./DirectionProvider-1e219af7.js";import{U as me}from"./UnstyledButton-b043fbb8.js";import{i as pe}from"./OptionalPortal-f36e0e00.js";import{u as fe}from"./use-uncontrolled-f56237fb.js";import{u as ve}from"./use-did-update-bccd292e.js";function m(n,t){return o=>{n==null||n(o),t==null||t(o)}}function ge(n,t,o){var r;return o?Array.from(((r=ne(o,t))==null?void 0:r.querySelectorAll(n))||[]).findIndex(a=>a===o):null}function he(){const[n,t]=h.useState(-1);return[n,{setHovered:t,resetHovered:()=>t(-1)}]}function ye({open:n,close:t,openDelay:o,closeDelay:r}){const a=h.useRef(-1),e=h.useRef(-1),l=()=>{window.clearTimeout(a.current),window.clearTimeout(e.current)},c=()=>{l(),o===0||o===void 0?n():a.current=window.setTimeout(n,o)},i=()=>{l(),r===0||r===void 0?t():e.current=window.setTimeout(t,r)};return h.useEffect(()=>l,[]),{openDropdown:c,closeDropdown:i}}const[we,T]=de("Menu component was not found in the tree");var N={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Me={},K=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:l,...c}=C("MenuDivider",Me,n),i=T();return g(z,{ref:t,...i.getStyles("divider",{className:r,style:a,styles:e,classNames:o}),...c})});K.classes=N;K.displayName="@mantine/core/MenuDivider";const De={},V=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:l,onMouseEnter:c,onMouseLeave:i,onKeyDown:D,children:I,...x}=C("MenuDropdown",De,n),p=h.useRef(null),d=T(),s=m(D,u=>{var b,f;(u.key==="ArrowUp"||u.key==="ArrowDown")&&(u.preventDefault(),(f=(b=p.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||f.focus())}),y=m(c,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),k=m(i,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return q(A.Dropdown,{...x,onMouseEnter:y,onMouseLeave:k,role:"menu","aria-orientation":"vertical",ref:G(t,p),...d.getStyles("dropdown",{className:r,style:a,styles:e,classNames:o,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:s,children:[g("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),I]})});V.classes=N;V.displayName="@mantine/core/MenuDropdown";const Ie={},$=ae((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:l,color:c,closeMenuOnClick:i,leftSection:D,rightSection:I,children:x,disabled:p,...d}=C("MenuItem",Ie,n),s=T(),y=ce(),{dir:k}=ue(),u=h.useRef(),b=s.getItemIndex(u.current),f=d,P=m(f.onMouseLeave,()=>s.setHovered(-1)),L=m(f.onMouseEnter,()=>s.setHovered(s.getItemIndex(u.current))),_=m(f.onClick,()=>{typeof i=="boolean"?i&&s.closeDropdownImmediately():s.closeOnItemClick&&s.closeDropdownImmediately()}),O=m(f.onFocus,()=>s.setHovered(s.getItemIndex(u.current))),w=c?y.variantColorResolver({color:c,theme:y,variant:"light"}):void 0,v=c?ie({color:c,theme:y}):null;return q(me,{...d,unstyled:s.unstyled,tabIndex:s.menuItemTabIndex,onFocus:O,...s.getStyles("item",{className:r,style:a,styles:e,classNames:o}),ref:G(u,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||void 0,"data-hovered":s.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:L,onMouseLeave:P,onClick:_,onKeyDown:se({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:s.loop,dir:k,orientation:"vertical",onKeyDown:f.onKeyDown}),__vars:{"--menu-item-color":v!=null&&v.isThemeColor&&(v==null?void 0:v.shade)===void 0?`var(--mantine-color-${v.color}-6)`:w==null?void 0:w.color,"--menu-item-hover":w==null?void 0:w.hover},children:[D&&g("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"left",children:D}),x&&g("div",{...s.getStyles("itemLabel",{styles:e,classNames:o}),children:x}),I&&g("div",{...s.getStyles("itemSection",{styles:e,classNames:o}),"data-position":"right",children:I})]})});$.classes=N;$.displayName="@mantine/core/MenuItem";const xe={},U=F((n,t)=>{const{classNames:o,className:r,style:a,styles:e,vars:l,...c}=C("MenuLabel",xe,n),i=T();return g(z,{ref:t,...i.getStyles("label",{className:r,style:a,styles:e,classNames:o}),...c})});U.classes=N;U.displayName="@mantine/core/MenuLabel";const ke={refProp:"ref"},J=h.forwardRef((n,t)=>{const{children:o,refProp:r,...a}=C("MenuTarget",ke,n);if(!pe(o))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const e=T(),l=m(o.props.onClick,()=>{e.trigger==="click"?e.toggleDropdown():e.trigger==="click-hover"&&(e.setOpenedViaClick(!0),e.opened||e.openDropdown())}),c=m(o.props.onMouseEnter,()=>(e.trigger==="hover"||e.trigger==="click-hover")&&e.openDropdown()),i=m(o.props.onMouseLeave,()=>{(e.trigger==="hover"||e.trigger==="click-hover"&&!e.openedViaClick)&&e.closeDropdown()});return g(A.Target,{refProp:r,popupType:"menu",ref:t,...a,children:h.cloneElement(o,{onClick:l,onMouseEnter:c,onMouseLeave:i,"data-expanded":e.opened?!0:void 0})})});J.displayName="@mantine/core/MenuTarget";const be={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function M(n){const t=C("Menu",be,n),{children:o,onOpen:r,onClose:a,opened:e,defaultOpened:l,trapFocus:c,onChange:i,closeOnItemClick:D,loop:I,closeOnEscape:x,trigger:p,openDelay:d,closeDelay:s,classNames:y,styles:k,unstyled:u,variant:b,vars:f,menuItemTabIndex:P,keepMounted:L,..._}=t,O=le({name:"Menu",classes:N,props:t,classNames:y,styles:k,unstyled:u}),[w,{setHovered:v,resetHovered:Q}]=he(),[S,H]=fe({value:e,defaultValue:l,finalValue:!1,onChange:i}),[W,j]=h.useState(!1),E=()=>{H(!1),j(!1),S&&(a==null||a())},R=()=>{H(!0),!S&&(r==null||r())},B=()=>{S?E():R()},{openDropdown:X,closeDropdown:Y}=ye({open:R,close:E,closeDelay:s,openDelay:d}),Z=te=>ge("[data-menu-item]","[data-menu-dropdown]",te),{resolvedClassNames:ee,resolvedStyles:oe}=re({classNames:y,styles:k,props:t});return ve(()=>{Q()},[S]),g(we,{value:{getStyles:O,opened:S,toggleDropdown:B,getItemIndex:Z,hovered:w,setHovered:v,openedViaClick:W,setOpenedViaClick:j,closeOnItemClick:D,closeDropdown:p==="click"?E:Y,openDropdown:p==="click"?R:X,closeDropdownImmediately:E,loop:I,trigger:p,unstyled:u,menuItemTabIndex:P},children:g(A,{..._,opened:S,onChange:B,defaultOpened:l,trapFocus:L?!1:c,closeOnEscape:x,__staticSelector:"Menu",classNames:ee,styles:oe,unstyled:u,variant:b,keepMounted:L,children:o})})}M.extend=n=>n;M.classes=N;M.displayName="@mantine/core/Menu";M.Item=$;M.Label=U;M.Dropdown=V;M.Target=J;M.Divider=K;export{M,m as c};
