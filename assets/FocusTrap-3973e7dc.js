import{r as i}from"./index-8b3efc3f.js";import{u as v}from"./use-did-update-bccd292e.js";import{j as b}from"./jsx-runtime-c9381026.js";import{i as A}from"./OptionalPortal-1a980b57.js";import{f as x,u as I,h,B as w}from"./polymorphic-factory-0a97ecf2.js";import{u as F}from"./use-merged-ref-a374cf59.js";function P({opened:e,shouldReturnFocus:n=!0}){const t=i.useRef(null),s=()=>{var r;t.current&&"focus"in t.current&&typeof t.current.focus=="function"&&((r=t.current)==null||r.focus({preventScroll:!0}))};return v(()=>{let r=-1;const o=u=>{u.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",o),e?t.current=document.activeElement:n&&(r=window.setTimeout(s,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",o)}},[e,n]),s}const R=/input|select|textarea|button|object/,p="a, input, select, textarea, button, object, [tabindex]";function S(e){return e.style.display==="none"}function k(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let t=e;for(;t&&!(t===document.body||t.nodeType===11);){if(S(t))return!1;t=t.parentNode}return!0}function y(e){let n=e.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function l(e){const n=e.nodeName.toLowerCase(),t=!Number.isNaN(y(e));return(R.test(n)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||t)&&k(e)}function N(e){const n=y(e);return(Number.isNaN(n)||n>=0)&&l(e)}function L(e){return Array.from(e.querySelectorAll(p)).filter(N)}function H(e,n){const t=L(e);if(!t.length){n.preventDefault();return}const s=t[n.shiftKey?0:t.length-1],r=e.getRootNode();let o=s===r.activeElement||e===r.activeElement;const u=r.activeElement;if(u.tagName==="INPUT"&&u.getAttribute("type")==="radio"&&(o=t.filter(a=>a.getAttribute("type")==="radio"&&a.getAttribute("name")===u.getAttribute("name")).includes(s)),!o)return;n.preventDefault();const c=t[n.shiftKey?t.length-1:0];c&&c.focus()}function D(e=!0){const n=i.useRef(null),t=r=>{let o=r.querySelector("[data-autofocus]");if(!o){const u=Array.from(r.querySelectorAll(p));o=u.find(N)||u.find(l)||null,!o&&l(r)&&(o=r)}o&&o.focus({preventScroll:!0})},s=i.useCallback(r=>{e&&r!==null&&n.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&t(r)}),n.current=r):n.current=null)},[e]);return i.useEffect(()=>{if(!e)return;n.current&&setTimeout(()=>t(n.current));const r=o=>{o.key==="Tab"&&n.current&&H(n.current,o)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e]),s}var T={root:"m_515a97f8"};const B={},f=x((e,n)=>{const t=I("VisuallyHidden",B,e),{classNames:s,className:r,style:o,styles:u,unstyled:d,vars:c,...m}=t,a=h({name:"VisuallyHidden",classes:T,props:t,className:r,style:o,classNames:s,styles:u,unstyled:d});return b(w,{component:"span",ref:n,...a("root"),...m})});f.classes=T;f.displayName="@mantine/core/VisuallyHidden";function E({children:e,active:n=!0,refProp:t="ref",innerRef:s}){const r=D(n),o=F(r,s);return A(e)?i.cloneElement(e,{[t]:o}):e}function g(e){return b(f,{tabIndex:-1,"data-autofocus":!0,...e})}E.displayName="@mantine/core/FocusTrap";g.displayName="@mantine/core/FocusTrapInitialFocus";E.InitialFocus=g;export{E as F,P as u};
