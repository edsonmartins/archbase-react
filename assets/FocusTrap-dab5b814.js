import{r as c}from"./index-8b3efc3f.js";import{u as E}from"./use-did-update-bccd292e.js";import{j as m}from"./jsx-runtime-c9381026.js";import{i as g}from"./OptionalPortal-29ef8d11.js";import{f as h,u as I,h as x,B as w}from"./polymorphic-factory-0b25d542.js";import{r as F}from"./use-id-3df0f1f4.js";import{u as R}from"./use-merged-ref-add91123.js";function G({opened:t,shouldReturnFocus:n=!0}){const e=c.useRef(),o=()=>{var r;e.current&&"focus"in e.current&&typeof e.current.focus=="function"&&((r=e.current)==null||r.focus({preventScroll:!0}))};return E(()=>{let r=-1;const a=i=>{i.key==="Tab"&&window.clearTimeout(r)};return document.addEventListener("keydown",a),t?e.current=document.activeElement:n&&(r=window.setTimeout(o,10)),()=>{window.clearTimeout(r),document.removeEventListener("keydown",a)}},[t,n]),o}function H(t,n="body > :not(script)"){const e=F(),o=Array.from(document.querySelectorAll(n)).map(r=>{var s;if((s=r==null?void 0:r.shadowRoot)!=null&&s.contains(t)||r.contains(t))return;const a=r.getAttribute("aria-hidden"),i=r.getAttribute("data-hidden"),u=r.getAttribute("data-focus-id");return r.setAttribute("data-focus-id",e),a===null||a==="false"?r.setAttribute("aria-hidden","true"):!i&&!u&&r.setAttribute("data-hidden",a),{node:r,ariaHidden:i||null}});return()=>{o.forEach(r=>{!r||e!==r.node.getAttribute("data-focus-id")||(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden),r.node.removeAttribute("data-focus-id"),r.node.removeAttribute("data-hidden"))})}}const S=/input|select|textarea|button|object/,p="a, input, select, textarea, button, object, [tabindex]";function k(t){return t.style.display==="none"}function L(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let e=t;for(;e&&!(e===document.body||e.nodeType===11);){if(k(e))return!1;e=e.parentNode}return!0}function y(t){let n=t.getAttribute("tabindex");return n===null&&(n=void 0),parseInt(n,10)}function d(t){const n=t.nodeName.toLowerCase(),e=!Number.isNaN(y(t));return(S.test(n)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||e)&&L(t)}function A(t){const n=y(t);return(Number.isNaN(n)||n>=0)&&d(t)}function D(t){return Array.from(t.querySelectorAll(p)).filter(A)}function B(t,n){const e=D(t);if(!e.length){n.preventDefault();return}const o=e[n.shiftKey?0:e.length-1],r=t.getRootNode();let a=o===r.activeElement||t===r.activeElement;const i=r.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(a=e.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===i.getAttribute("name")).includes(o)),!a)return;n.preventDefault();const s=e[n.shiftKey?e.length-1:0];s&&s.focus()}function j(t=!0){const n=c.useRef(),e=c.useRef(null),o=a=>{let i=a.querySelector("[data-autofocus]");if(!i){const u=Array.from(a.querySelectorAll(p));i=u.find(A)||u.find(d)||null,!i&&d(a)&&(i=a)}i&&i.focus({preventScroll:!0})},r=c.useCallback(a=>{if(t){if(a===null){e.current&&(e.current(),e.current=null);return}e.current=H(a),n.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&o(a)}),n.current=a):n.current=null)}},[t]);return c.useEffect(()=>{if(!t)return;n.current&&setTimeout(()=>o(n.current));const a=i=>{i.key==="Tab"&&n.current&&B(n.current,i)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a),e.current&&e.current()}},[t]),r}var N={root:"m_515a97f8"};const q={},l=h((t,n)=>{const e=I("VisuallyHidden",q,t),{classNames:o,className:r,style:a,styles:i,unstyled:u,vars:s,...b}=e,f=x({name:"VisuallyHidden",classes:N,props:e,className:r,style:a,classNames:o,styles:i,unstyled:u});return m(w,{component:"span",ref:n,...f("root"),...b})});l.classes=N;l.displayName="@mantine/core/VisuallyHidden";function T({children:t,active:n=!0,refProp:e="ref"}){const o=j(n),r=R(o,t==null?void 0:t.ref);return g(t)?c.cloneElement(t,{[e]:r}):t}function v(t){return m(l,{tabIndex:-1,"data-autofocus":!0,...t})}T.displayName="@mantine/core/FocusTrap";v.displayName="@mantine/core/FocusTrapInitialFocus";T.InitialFocus=v;export{T as F,G as u};
