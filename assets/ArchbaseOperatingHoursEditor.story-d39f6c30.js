import{a as l,j as e}from"./jsx-runtime-c9381026.js";import{r as u}from"./index-8b3efc3f.js";import{M as U}from"./MultiSelect-bdb4b410.js";import{G as f}from"./Group-085e5d86.js";import{T as x}from"./TimeInput-f6ad37be.js";import{I as O}from"./IconClock-04b0092d.js";import{B as _}from"./Button-b17c03b7.js";import{B as j}from"./polymorphic-factory-8fbd487e.js";import{T as S}from"./Text-abd6ac62.js";import{A as k}from"./ActionIcon-3fa09022.js";import{I as V}from"./IconTrash-6b16e91d.js";import{G as v}from"./Grid-7c641e6e.js";import{C as g}from"./Card-2d38024c.js";import{S as C}from"./ScrollArea-5c50f26d.js";import{S as z}from"./Space-103726a6.js";import{T as $}from"./Textarea-6dee5c95.js";import"./_commonjsHelpers-de833af9.js";import"./use-resolved-styles-api-24bd5fc4.js";import"./OptionsDropdown-ffcf67cc.js";import"./CheckIcon-faa2ad1e.js";import"./Combobox-1a90f7f9.js";import"./Popover-93dfeb4e.js";import"./OptionalPortal-9514e460.js";import"./index-a38d0dca.js";import"./use-isomorphic-effect-aa890e3d.js";import"./use-merged-ref-add91123.js";import"./DirectionProvider-1e219af7.js";import"./use-floating-auto-update-3fafcba2.js";import"./use-did-update-bccd292e.js";import"./create-safe-context-941c9e18.js";import"./FocusTrap-c39ce1bd.js";import"./use-id-3df0f1f4.js";import"./Transition-1b2bc7c1.js";import"./use-reduced-motion-98306cff.js";import"./use-media-query-78751440.js";import"./use-uncontrolled-f56237fb.js";import"./CloseButton-55dafc48.js";import"./UnstyledButton-a7b3e9d9.js";import"./Input-77c95749.js";import"./create-optional-context-86e78b6c.js";import"./InputBase-6a6c9da1.js";import"./use-input-props-0d35260a.js";import"./createReactComponent-60e598cf.js";import"./index-9d475cdf.js";import"./Loader-279e7115.js";import"./Mantine.context-1df84d45.js";import"./get-sorted-breakpoints-91e0685a.js";import"./px-90b8b31c.js";import"./Paper-c978ba1b.js";import"./extends-4c19d496.js";import"./objectWithoutPropertiesLoose-68193569.js";const q={1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY",7:"SUNDAY"};function R(r){return r?r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0"):""}const G=r=>!r||r===""?[]:r.split(";").map(o=>{const[d,n]=o.split("|");return{days:d.split(",").filter(D=>D),timeRange:n}}),P=[{value:"1",label:"Segunda-feira"},{value:"2",label:"Terça-feira"},{value:"3",label:"Quarta-feira"},{value:"4",label:"Quinta-feira"},{value:"5",label:"Sexta-feira"},{value:"6",label:"Sábado"},{value:"7",label:"Domingo"}],Q=[{value:"MONDAY",label:"Seg"},{value:"TUESDAY",label:"Ter"},{value:"WEDNESDAY",label:"Qua"},{value:"THURSDAY",label:"Qui"},{value:"FRIDAY",label:"Sex"},{value:"SATURDAY",label:"Sáb"},{value:"SUNDAY",label:"Dom"}],W=r=>Array.isArray(r)?r.map(o=>`${o.days.map(n=>n).join(",")}|${o.timeRange}`).join(";"):"";function y({label:r,initialValue:o,onChange:d,readOnly:n=!1,error:D}){const[h,H]=u.useState([]),[a,T]=u.useState({start:null,end:null}),[c,A]=u.useState([]);u.useEffect(()=>{o&&A(G(o))},[o]),u.useEffect(()=>{d(W(c))},[c,d]);const E=(t,s)=>{const[i,m]=t.split(":").map(Number),p=new Date((s?a.start:a.end)||new Date);p.setHours(i,m),T(B=>({...B,[s?"start":"end"]:new Date(p)}))},w=t=>{if(!t)return"";const s=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${s}:${i}`},N=()=>{if(h.length>0&&a&&a.start&&a.end){const t=h.map(p=>q[p]),s=R(a.start),i=R(a.end),m={days:t,timeRange:`${s}-${i}`};A([...c,m]),H([]),T({start:null,end:null})}};return l("div",{children:[r&&e("div",{children:e("strong",{children:r})}),e(U,{data:P,value:h,onChange:H,placeholder:"Selecione os dias",label:"Dias da semana",clearable:!0,disabled:n}),l(f,{grow:!0,children:[e(x,{disabled:n,value:w(a.start),placeholder:"HH:MM",label:"Hora de Início",onChange:t=>E(t.currentTarget.value,!0),rightSection:e(O,{size:"1rem",stroke:1.5})}),e(x,{disabled:n,value:w(a.end),onChange:t=>E(t.currentTarget.value,!1),rightSection:e(O,{size:"1rem",stroke:1.5}),placeholder:"HH:MM",label:"Hora de Término"})]}),e(_,{onClick:N,disabled:!h.length||!a.start||!a.end||n,children:"Adicionar"}),c.map((t,s)=>e(j,{mt:2,children:l(f,{justify:"space-between",children:[l(f,{wrap:"nowrap",children:[e(S,{fw:700,size:"12px",children:t.days.map(i=>{var m;return((m=Q.find(p=>p.value===i))==null?void 0:m.label)||"Dia desconhecido"}).join(",")}),e(S,{size:"12px",fw:700,color:"blue",children:t.timeRange})]}),e(k,{color:"red",disabled:n,onClick:()=>{const i=[...c];i.splice(s,1),A(i)},children:e(V,{size:"1.2rem",color:"red"})})]})},s))]})}try{y.displayName="ArchbaseOperatingHoursEditor",y.__docgenInfo={description:"",displayName:"ArchbaseOperatingHoursEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: any) => void"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},initialValue:{defaultValue:null,description:"",name:"initialValue",required:!0,type:{name:"any"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"any"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}}}}}catch{}const F=()=>{const[r,o]=u.useState("último dia");return l(v,{children:[e(v.Col,{offset:1,span:5,children:l(g,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(g.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(f,{justify:"space-between",children:e(S,{fw:500,children:"Operating Hours Editor Component"})})}),e(j,{style:{height:500},children:e(C,{h:500,p:20,children:e(y,{initialValue:"",onChange:d=>{o(d)}})})})]})}),e(v.Col,{offset:1,span:4,children:l(g,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e(g.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:e(f,{justify:"space-between",children:e(S,{fw:500,children:"Resultado"})})}),l(C,{h:300,children:[e(z,{h:20}),e($,{minRows:12,value:r,autosize:!0})]})]})})]})},Qe={title:"Editores/OperatingHoursEditor",component:y},b={name:"Exemplo simples",render:()=>e(F,{})};var Y,M,I;b.parameters={...b.parameters,docs:{...(Y=b.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  name: 'Exemplo simples',
  render: () => <ArchbaseOperatingHoursEditorExample />
}`,...(I=(M=b.parameters)==null?void 0:M.docs)==null?void 0:I.source}}};export{b as Primary,Qe as default};
