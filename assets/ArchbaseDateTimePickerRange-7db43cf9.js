import{a as U,j as p}from"./jsx-runtime-c9381026.js";import{r as c,R as ge}from"./index-8b3efc3f.js";import{b as De,c as ve,d as Ve}from"./useArchbaseDataSource-bc04723a.js";import{D as A}from"./useArchbaseDataSourceListener-92dd263c.js";import{d as O}from"./dayjs.min-5b59225a.js";import{u as qe,a as Ee,p as Ce,s as ae}from"./pick-calendar-levels-props-31ce4af0.js";import{a as te}from"./assign-time-c53cee85.js";import{u as we,P as le,D as ie}from"./DatePicker-7aa0aff2.js";import{T as be}from"./TimeInput-feead10c.js";import{f as Te,u as ke,h as Se}from"./polymorphic-factory-bf652503.js";import{u as _e}from"./use-resolved-styles-api-07b5b463.js";import{u as Fe}from"./use-merged-ref-a374cf59.js";import{u as ne}from"./use-did-update-bccd292e.js";import{A as He}from"./ActionIcon-aabf0409.js";import{C as xe}from"./CheckIcon-c538e622.js";import{I as Re}from"./Input-7a6e621e.js";import{F as Ae}from"./Flex-ffd42070.js";import{I as re}from"./IconCalendar-5a729921.js";import{I as Ne}from"./IconArrowRight-10f4c313.js";var se={timeWrapper:"m_208d2562",timeInput:"m_62ee059"};const Ie={dropdownType:"popover"},$=Te((a,n)=>{const w=ke("DateTimePicker",Ie,a),{value:F,defaultValue:H,onChange:x,valueFormat:N,locale:m,classNames:b,styles:T,unstyled:u,timeInputProps:t,submitButtonProps:l,withSeconds:V,level:h,defaultLevel:i,size:D,variant:q,dropdownType:y,vars:k,minDate:f,maxDate:g,...v}=w,E=Se({name:"DateTimePicker",classes:se,props:w,classNames:b,styles:T,unstyled:u,vars:k}),{resolvedClassNames:C,resolvedStyles:e}=_e({classNames:b,styles:T,props:w}),I=N||(V?"DD/MM/YYYY HH:mm:ss":"DD/MM/YYYY HH:mm"),R=c.useRef(null),L=Fe(R,t==null?void 0:t.ref),{calendarProps:{allowSingleDateInRange:K,...S},others:s}=Ce(v),_=qe(),[o,P]=Ee({type:"default",value:F,defaultValue:H,onChange:x}),G=r=>r?O(r).format(V?"HH:mm:ss":"HH:mm"):"",[oe,J]=c.useState(G(o)),[de,Q]=c.useState(h||i||"month"),[M,W]=we(!1),ue=o?O(o).locale(_.getLocale(m)).tz(_.getTimezone(),!0).format(I):"",ce=r=>{var ee;(ee=t==null?void 0:t.onChange)==null||ee.call(t,r);const d=r.currentTarget.value;if(J(d),d){const[pe,he,ye]=d.split(":").map(Number),Y=ae("add",new Date,_.getTimezone());Y.setHours(pe),Y.setMinutes(he),Y.setSeconds(ye||0),Y.setMilliseconds(0),P(te(Y,o||ae("add",new Date,_.getTimezone())))}},me=r=>{var d;r&&P(te(o,r)),(d=R.current)==null||d.focus()},fe=r=>{var d;(d=t==null?void 0:t.onKeyDown)==null||d.call(t,r),r.key==="Enter"&&(r.preventDefault(),W.close())};ne(()=>{M||J(G(o))},[o,M]),ne(()=>{M&&Q("month")},[M]);const X=f?O(f).format("HH:mm:ss"):null,Z=g?O(g).format("HH:mm:ss"):null,j=y==="popover";return U(le,{formattedValue:ue,dropdownOpened:v.disabled?!1:M,dropdownHandlers:W,classNames:C,styles:e,unstyled:u,ref:n,onClear:()=>P(null),shouldClear:!!o,value:o,size:D,variant:q,dropdownType:y,...s,type:"default",__staticSelector:"DateTimePicker",children:[p(ie,{...S,maxDate:g,minDate:f,size:D,variant:q,type:"default",value:o,defaultDate:o,onChange:me,locale:m,classNames:C,styles:e,unstyled:u,__staticSelector:"DateTimePicker",__stopPropagation:j,level:h,defaultLevel:i,onLevelChange:r=>{var d;Q(r),(d=S.onLevelChange)==null||d.call(S,r)},__timezoneApplied:!0}),de==="month"&&U("div",{...E("timeWrapper"),children:[p(be,{value:oe,withSeconds:V,ref:L,unstyled:u,minTime:o&&f&&o.toDateString()===f.toDateString()?X??void 0:void 0,maxTime:o&&g&&o.toDateString()===g.toDateString()?Z??void 0:void 0,...t,...E("timeInput",{className:t==null?void 0:t.className,style:t==null?void 0:t.style}),onChange:ce,onKeyDown:fe,size:D,"data-mantine-stop-propagation":j||void 0}),p(He,{variant:"default",size:`input-${D||"sm"}`,...E("submitButton",{className:l==null?void 0:l.className,style:l==null?void 0:l.style}),unstyled:u,"data-mantine-stop-propagation":j||void 0,children:p(xe,{size:"30%"}),...l,onClick:r=>{var d;(d=l==null?void 0:l.onClick)==null||d.call(l,r),W.close()}})]})]})});$.classes={...se,...le.classes,...ie.classes};$.displayName="@mantine/dates/DateTimePicker";function Me({dataSource:a,dataField:n,disabled:w=!1,readOnly:F=!1,style:H,required:x,value:N,onFocusExit:m=()=>{},onFocusEnter:b=()=>{},onChange:T,onChangeValue:u=()=>{},width:t,...l},V){const[h,i]=c.useState(N||null),[D,q]=c.useState(void 0);c.useEffect(()=>{q(void 0)},[h]);const y=()=>{let e=h;a&&n&&(e=a.getFieldValue(n),e||(e=null)),i(e)},k=c.useCallback(()=>{y()},[]),f=c.useCallback(e=>{a&&n&&((e.type===A.dataChanged||e.type===A.recordChanged||e.type===A.afterScroll||e.type===A.afterCancel||e.type===A.afterEdit)&&y(),e.type===A.onFieldError&&e.fieldName===n&&q(e.error))},[]);De(()=>{y(),a&&n&&(a.addListener(f),a.addFieldChangeListener(n,k))}),ve(()=>{y()},[]);const g=e=>{i(e),a&&!a.isBrowsing()&&n&&a.getFieldValue(n)!==e&&a.setFieldValue(n,e),T&&T(e),u&&u(e)};Ve(()=>{a&&n&&(a.removeListener(f),a.removeFieldChangeListener(n,k))});const v=e=>{m&&m(e)},E=e=>{b&&b(e)};return p($,{...l,disabled:w,readOnly:(()=>{let e=F;return a&&!F&&(e=a.isBrowsing()),e})(),value:h,onChange:g,onBlur:v,onFocus:E,ref:V,required:x,error:D,style:{width:t,...H}})}const z=ge.forwardRef((a,n)=>Me({...a},n));z.displayName="ArchbaseDateTimePickerEdit";try{z.displayName="ArchbaseDateTimePickerEdit",z.__docgenInfo={description:"",displayName:"ArchbaseDateTimePickerEdit",props:{dataSource:{defaultValue:null,description:"Data source where the edit value will be assigned",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataField:{defaultValue:null,description:"Field where the edit value should be assigned in the data source",name:"dataField",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Indicates if the edit is disabled",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"Indicates if the edit is read-only. Note: used in conjunction with data source status",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:null,description:"Indicates if filling the edit is required",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Initial value",name:"value",required:!1,type:{name:"Date"}},style:{defaultValue:null,description:"Edit style",name:"style",required:!1,type:{name:"CSSProperties"}},width:{defaultValue:null,description:"Edit width",name:"width",required:!1,type:{name:"string | number"}},onFocusExit:{defaultValue:null,description:"Event occurs when focus exits the edit",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<T>"}},onFocusEnter:{defaultValue:null,description:"Event occurs when the edit receives focus",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<T>"}},onChange:{defaultValue:null,description:"Event when the edit value changes (internal use)",name:"onChange",required:!1,type:{name:"(value: Date) => void"}},onChangeValue:{defaultValue:null,description:"Event when the edit value changes (external use)",name:"onChangeValue",required:!1,type:{name:"(value: Date) => void"}},clearButtonProps:{defaultValue:null,description:"Clear button properties",name:"clearButtonProps",required:!1,type:{name:"Record<string, any>"}},withSeconds:{defaultValue:null,description:"With seconds input",name:"withSeconds",required:!1,type:{name:"boolean"}},valueFormat:{defaultValue:null,description:"Value format",name:"valueFormat",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"ForwardedRef<HTMLButtonElement>"}}}}}catch{}function B({dataSource:a,dataFieldStart:n,dataFieldEnd:w,label:F,disabled:H=!1,readOnly:x=!1,size:N,width:m,style:b,description:T,onRangeChange:u,placeholderStart:t,placeholderEnd:l,icon:V,error:h,value:i,minDate:D,maxDate:q,valueFormat:y="DD/MM/YYYY HH:mm",withSeconds:k=!1,clearButtonProps:f,required:g=!1}){const[v,E]=c.useState((i==null?void 0:i[0])||null),[C,e]=c.useState((i==null?void 0:i[1])||null),[I,R]=c.useState(h);c.useEffect(()=>{R(h)},[h]),c.useEffect(()=>{i&&(E(i[0]),e(i[1]))},[i]);const L=s=>{E(s),u&&u([s,C])},K=s=>{e(s),u&&u([v,s])},S=(s,_)=>s&&_&&s>_?(R("Data inicial nÃ£o pode ser maior que a data final"),!1):(R(void 0),!0);return p(Re.Wrapper,{label:F,size:N,error:I,description:T,style:{width:m,...b},children:U(Ae,{gap:"sm",justify:"flex-start",align:"center",direction:"row",children:[p(z,{dataSource:a,dataField:n,clearable:!0,rightSection:V||p(re,{size:"1rem"}),readOnly:x,placeholder:t,disabled:H,value:v,onChangeValue:L,error:I,style:{width:m||180},minDate:D,maxDate:C||q,valueFormat:y,withSeconds:k,clearButtonProps:f,required:g,onChange:s=>{S(s,C)&&L(s)}}),p(Ne,{size:"1rem"}),p(z,{dataSource:a,dataField:w,clearable:!0,rightSection:V||p(re,{size:"1rem"}),placeholder:l,readOnly:x,disabled:H,value:C,onChangeValue:K,error:I,style:{width:m||180},minDate:v||D,maxDate:q,valueFormat:y,withSeconds:k,clearButtonProps:f,required:g,onChange:s=>{S(v,s)&&K(s)}})]})})}B.displayName="ArchbaseDateTimePickerRange";try{B.displayName="ArchbaseDateTimePickerRange",B.__docgenInfo={description:"",displayName:"ArchbaseDateTimePickerRange",props:{dataSource:{defaultValue:null,description:"Data source where the range values will be assigned",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<T, ID>"}},dataFieldStart:{defaultValue:null,description:"Field for start date in the data source",name:"dataFieldStart",required:!1,type:{name:"string"}},dataFieldEnd:{defaultValue:null,description:"Field for end date in the data source",name:"dataFieldEnd",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"Indicates if the date picker range is disabled",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"Indicates if the date picker range is read-only",name:"readOnly",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"Indicates if filling the date picker range is required",name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"Initial value",name:"value",required:!1,type:{name:"[Date, Date]"}},style:{defaultValue:null,description:"Style of the date picker range",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"Size of the date picker range",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},width:{defaultValue:null,description:"Width of the date picker range",name:"width",required:!1,type:{name:"string | number"}},icon:{defaultValue:null,description:"Custom right section icon",name:"icon",required:!1,type:{name:"ReactNode"}},placeholderStart:{defaultValue:null,description:"Placeholder text for start date",name:"placeholderStart",required:!1,type:{name:"string"}},placeholderEnd:{defaultValue:null,description:"Placeholder text for end date",name:"placeholderEnd",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label for the date picker range",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Description for the date picker range",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"Error message",name:"error",required:!1,type:{name:"string"}},onRangeChange:{defaultValue:null,description:"Event when range value changes",name:"onRangeChange",required:!1,type:{name:"(value: [Date, Date]) => void"}},onKeyDown:{defaultValue:null,description:"Event when key down",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},onKeyUp:{defaultValue:null,description:"Event when key up",name:"onKeyUp",required:!1,type:{name:"(event: KeyboardEvent<HTMLInputElement>) => void"}},minDate:{defaultValue:null,description:"Minimum date allowed",name:"minDate",required:!1,type:{name:"Date"}},maxDate:{defaultValue:null,description:"Maximum date allowed",name:"maxDate",required:!1,type:{name:"Date"}},valueFormat:{defaultValue:{value:"DD/MM/YYYY HH:mm"},description:"Date format",name:"valueFormat",required:!1,type:{name:"string"}},withSeconds:{defaultValue:{value:"false"},description:"With seconds input",name:"withSeconds",required:!1,type:{name:"boolean"}},clearButtonProps:{defaultValue:null,description:"Clear button properties",name:"clearButtonProps",required:!1,type:{name:"Record<string, any>"}}}}}catch{}export{B as A,z as a};
