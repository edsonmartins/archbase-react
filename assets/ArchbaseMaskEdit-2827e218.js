import{j as g}from"./jsx-runtime-c9381026.js";import{r as o}from"./index-8b3efc3f.js";import{I as z}from"./input-4d992d77.js";import{b as W,d as H,c as j}from"./useArchbaseDataSource-c192df6e.js";import{u as U}from"./use-input-props-e0a3aa71.js";import{u as B}from"./use-id-3df0f1f4.js";import{u as J}from"./use-force-update-11fe72c1.js";import{D as n}from"./useArchbaseDataSourceListener-a0bbc6ee.js";import{I as k}from"./Input-da8fd83e.js";var G=(r=>(r.CNPJ="00.000.000/0000-00",r.CEP="00.000-000",r.CPF="000.000.000-00",r.PLACA="aaa-00*00",r.PHONE="(00) 00000-0000",r))(G||{});const K={type:"text",size:"sm",__staticSelector:"ArchbaseMaskEdit",value:"",readOnly:!1,disabled:!1,placeholderChar:"_",placeholder:"",mask:"",showMask:!0,saveWithMask:!1};function c(r){const{inputProps:F,wrapperProps:q,mask:l,placeholderChar:C,placeholder:A,readOnly:p,disabled:M,width:_,innerRef:I,title:S,...w}=U("ArchbaseMaskEdit",K,r),x=B(),O=I||o.useRef(),[d,m]=o.useState(""),R=J(),{dataSource:a,dataField:t,onChangeValue:f,onFocusEnter:y,onFocusExit:h,saveWithMask:N,error:s}=r,[E,u]=o.useState(s);o.useEffect(()=>{u(void 0)},[d]),o.useEffect(()=>{s!==E&&u(s)},[s]);const i=()=>{let e=d;a&&t&&(e=a.getFieldValue(t),e||(e="")),m(e)},v=o.useCallback(()=>{i()},[]),b=o.useCallback(e=>{a&&t&&((e.type===n.dataChanged||e.type===n.recordChanged||e.type===n.afterScroll||e.type===n.afterCancel||e.type===n.afterEdit)&&(i(),R()),e.type===n.onFieldError&&e.fieldName===t&&u(e.error))},[]);W(()=>{i(),a&&t&&(a.addListener(b),a.addFieldChangeListener(t,v))}),H(()=>{a&&t&&(a.removeListener(b),a.removeFieldChangeListener(t,v))}),j(()=>{i()},[]);const P=(e,V)=>{V.value.replaceAll("_","").length===(l==null?void 0:l.length)&&(m(Q=>e),a&&!a.isBrowsing()&&t&&a.getFieldValue(t)!==e&&a.setFieldValue(t,e),f&&f(e,V.value))},L=e=>{h&&h(e)},D=e=>{y&&y(e)},T=()=>{let e=p;return a&&!p&&(e=a.isBrowsing()),e};return g(k.Wrapper,{...q,label:S,children:g(k,{error:E,...F,...w,ref:O,component:z,mask:l,unmask:!N,lazy:!1,value:d,style:{width:_,...r.style},size:r.size,placeholderChar:C,id:x,readOnly:T(),disabled:M,placeholder:A,onAccept:P,onBlur:L,onFocus:D})})}c.displayName="ArchbaseMaskEdit";try{c.displayName="ArchbaseMaskEdit",c.__docgenInfo={description:"",displayName:"ArchbaseMaskEdit",props:{type:{defaultValue:null,description:"Tipo de campo html",name:"type",required:!1,type:{name:"HTMLInputTypeAttribute"}},wrapperProps:{defaultValue:null,description:"Propriedades para atribuir ao wrapper do mask edit",name:"wrapperProps",required:!1,type:{name:"Record<string, any>"}},__staticSelector:{defaultValue:null,description:"Nome do seletor estático",name:"__staticSelector",required:!1,type:{name:"string"}},dataSource:{defaultValue:null,description:"Fonte de dados onde será atribuido o valor do mask edit",name:"dataSource",required:!1,type:{name:"ArchbaseDataSource<any, any>"}},dataField:{defaultValue:null,description:"Campo onde deverá ser atribuido o valor do mask edit na fonte de dados",name:"dataField",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Indicador se o mask edit está desabilitado",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"Indicador se o mask edit é somente leitura. Obs: usado em conjunto com o status da fonte de dados",name:"readOnly",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"Estilo do mask edit",name:"style",required:!1,type:{name:"CSSProperties"}},size:{defaultValue:null,description:"Tamanho do mask edit",name:"size",required:!1,type:{name:"enum",value:[{value:'"xs"'},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},width:{defaultValue:null,description:"Largura do mask edit",name:"width",required:!1,type:{name:"string | number"}},value:{defaultValue:null,description:"Valor inicial do mask edit",name:"value",required:!1,type:{name:"any"}},placeholder:{defaultValue:null,description:"Texto sugestão do mask edit",name:"placeholder",required:!1,type:{name:"string"}},placeholderChar:{defaultValue:null,description:"Caractere a ser mostrado onde não houver valor no campo",name:"placeholderChar",required:!1,type:{name:"string"}},showMask:{defaultValue:null,description:"Indicador se apresenta ou não a máscara",name:"showMask",required:!1,type:{name:"boolean"}},mask:{defaultValue:null,description:"Mascara podendo ser o tipo MaskPattern, uma Function ou uma string. Mais detalhes em: https://github.com/uNmAnNeR/imaskjs",name:"mask",required:!1,type:{name:"string | Function"}},saveWithMask:{defaultValue:null,description:"Indicador se deverá ser salvo o valor com a máscara",name:"saveWithMask",required:!1,type:{name:"boolean"}},onFocusExit:{defaultValue:null,description:"Evento quando o foco sai do edit",name:"onFocusExit",required:!1,type:{name:"FocusEventHandler<any>"}},onFocusEnter:{defaultValue:null,description:"Evento quando o edit recebe o foco",name:"onFocusEnter",required:!1,type:{name:"FocusEventHandler<any>"}},onChangeValue:{defaultValue:null,description:"Evento quando o valor do edit é alterado",name:"onChangeValue",required:!1,type:{name:"(value: string, event: any) => void"}},innerRef:{defaultValue:null,description:"Referência para o componente interno",name:"innerRef",required:!1,type:{name:"RefObject<HTMLInputElement>"}},error:{defaultValue:null,description:"Último erro ocorrido no mask edit",name:"error",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Título do edit",name:"title",required:!1,type:{name:"string"}}}}}catch{}export{c as A,G as M};
